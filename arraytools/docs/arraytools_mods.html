

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Contents of arraytools &mdash; arraytools 0.9 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Sphinx Documentation" href="Sphinx_documentation.html" />
    <link rel="prev" title="Welcome to arraytools’s documentation!" href="index.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> arraytools
          

          
          </a>

          
            
            
              <div class="version">
                0.9
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">arraytools... :</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Modules in arraytools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#arraytools-init">arraytools <code class="docutils literal notranslate"><span class="pre">__init__</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#init">__init__</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#basic-module">_basic module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">_basic</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#io-module">_io module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#io-py">_io.py</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#create-module">create module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#create">create</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#format-arrays">format arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="#geometry-functions">geometry functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#geom">geom</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#arrays-as-grids">arrays as grids</a></li>
<li class="toctree-l2"><a class="reference internal" href="#set-operations">set operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#python-tools">python tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#py-tools">py_tools</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#switch-arrange-weave-shape">Switch arrange weave shape</a></li>
<li class="toctree-l2"><a class="reference internal" href="#statistical-tools-for-stacked-arrays">Statistical tools for stacked arrays</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#requires">Requires</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#table-operations-for-arrays">Table operations for arrays</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tbl">tbl</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id8">Requires</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#statistical-tools-for-tabular-arrays">Statistical tools for tabular arrays</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tblstats">tblstats</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#references">References:</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#main-array-tools">main array tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="#utility-functions">utility functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#useage">Useage:</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Sphinx...:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Sphinx_documentation.html">How to document Sphinx</a></li>
</ul>
<p class="caption"><span class="caption-text">ReStructuredText...:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md_tester.html">Documentation tips</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">arraytools</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Contents of arraytools</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/arraytools_mods.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="Sphinx_documentation.html" class="btn btn-neutral float-right" title="Sphinx Documentation" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Welcome to arraytools’s documentation!" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="contents-of-arraytools">
<h1>Contents of arraytools<a class="headerlink" href="#contents-of-arraytools" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<p>The imports and basic layout of the package are listed in the <code class="docutils literal notranslate"><span class="pre">__init__</span></code> file.
The remainder of the imports are presented in subsequent sections.</p>
<hr class="docutils" />
<div class="section" id="arraytools-init">
<h2>arraytools <code class="docutils literal notranslate"><span class="pre">__init__</span></code><a class="headerlink" href="#arraytools-init" title="Permalink to this headline">¶</a></h2>
<p>Initialization of arraytools doesn’t import any of the functionality for
<code class="docutils literal notranslate"><span class="pre">arcpy</span></code> by default so that extra requirement doesn’t clog namespace.</p>
<span class="target" id="module-arraytools.__init__"></span><div class="section" id="init">
<h3>__init__<a class="headerlink" href="#init" title="Permalink to this headline">¶</a></h3>
<p>Script : __init__.py</p>
<p>Author : <a class="reference external" href="mailto:Dan&#46;Patterson&#37;&#52;&#48;carleton&#46;ca">Dan<span>&#46;</span>Patterson<span>&#64;</span>carleton<span>&#46;</span>ca</a></p>
<p>Modified : 2018-12-16</p>
<p><strong>Purpose</strong></p>
<p>Provide tools to facilitate working with numpy and geometry and attributes
largely derived from ArcMap and ArcGIS Pro.</p>
<p class="rubric">Notes</p>
<p>It is assumed throughout that numpy has been imported as</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</pre></div>
</div>
<dl class="docutils">
<dt><strong>Available modules and subpackages</strong></dt>
<dd>Produced using the art.__art_modules__[‘create’] for a module.</dd>
</dl>
<p>_basic:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">arr_info</span><span class="p">,</span> <span class="n">arr_info</span><span class="p">,</span> <span class="n">keep_ascii</span><span class="p">,</span> <span class="n">is_float</span><span class="p">,</span> <span class="n">keep_nums</span><span class="p">,</span> <span class="n">del_punc</span><span class="p">,</span> <span class="n">even_odd</span><span class="p">,</span>
<span class="n">n_largest</span><span class="p">,</span> <span class="n">n_smallest</span><span class="p">,</span> <span class="n">num_to_mask</span><span class="p">,</span> <span class="n">num_to_nan</span><span class="p">,</span> <span class="n">pad_even_odd</span><span class="p">,</span> <span class="n">pad_nan</span><span class="p">,</span>
<span class="n">pad_zero</span><span class="p">,</span> <span class="n">reshape_options</span><span class="p">,</span> <span class="n">shape_to2D</span>
</pre></div>
</div>
<p>a_io:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">arr_json</span><span class="p">,</span> <span class="n">dict_arrays</span><span class="p">,</span> <span class="n">dict_struct</span><span class="p">,</span> <span class="n">excel_np</span><span class="p">,</span> <span class="n">iterable_dict</span><span class="p">,</span> <span class="n">load_npy</span><span class="p">,</span>
<span class="n">load_txt</span><span class="p">,</span> <span class="n">save_npy</span><span class="p">,</span> <span class="n">save_txt</span><span class="p">,</span> <span class="n">struct_dict</span>
</pre></div>
</div>
<p>create:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">convex</span><span class="p">,</span> <span class="n">circle</span><span class="p">,</span> <span class="n">ellipse</span><span class="p">,</span> <span class="n">hex_flat</span><span class="p">,</span> <span class="n">hex_pointy</span><span class="p">,</span> <span class="n">rectangle</span><span class="p">,</span>
<span class="n">triangle</span><span class="p">,</span> <span class="n">pnt_from_dist_bearing</span><span class="p">,</span> <span class="n">xy_grid</span><span class="p">,</span> <span class="n">transect_lines</span>
</pre></div>
</div>
<p>frmts:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">arr_info</span><span class="p">,</span> <span class="n">del_punc</span><span class="p">,</span> <span class="n">even_odd</span><span class="p">,</span> <span class="n">is_float</span><span class="p">,</span> <span class="n">keep_ascii</span><span class="p">,</span> <span class="n">keep_nums</span><span class="p">,</span> <span class="n">n_largest</span><span class="p">,</span>
<span class="n">n_smallest</span><span class="p">,</span> <span class="n">num_to_mask</span><span class="p">,</span> <span class="n">num_to_nan</span><span class="p">,</span> <span class="n">pad_even_odd</span><span class="p">,</span> <span class="n">pad_nan</span><span class="p">,</span> <span class="n">pad_zero</span><span class="p">,</span>
<span class="n">reshape_options</span><span class="p">,</span> <span class="n">shape_to2D</span>
</pre></div>
</div>
<p>geom:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_center</span><span class="p">,</span> <span class="n">_centroid</span><span class="p">,</span> <span class="n">_convert</span><span class="p">,</span> <span class="n">_densify_2D</span><span class="p">,</span> <span class="n">_extent</span><span class="p">,</span> <span class="n">_flat_</span><span class="p">,</span> <span class="n">_max</span><span class="p">,</span> <span class="n">_min</span><span class="p">,</span>
<span class="n">_new_view_</span><span class="p">,</span> <span class="n">_reshape_</span><span class="p">,</span> <span class="n">_unpack</span><span class="p">,</span> <span class="n">_view_</span><span class="p">,</span> <span class="n">angle_2pnts</span><span class="p">,</span> <span class="n">angle_np</span><span class="p">,</span> <span class="n">angle_seq</span><span class="p">,</span>
<span class="n">angles_poly</span><span class="p">,</span> <span class="n">areas</span><span class="p">,</span> <span class="n">azim_np</span><span class="p">,</span> <span class="n">centers</span><span class="p">,</span> <span class="n">centroids</span><span class="p">,</span> <span class="n">circle</span><span class="p">,</span> <span class="n">densify</span><span class="p">,</span>
<span class="n">dist_bearing</span><span class="p">,</span> <span class="n">dx_dy_np</span><span class="p">,</span> <span class="n">e_area</span><span class="p">,</span> <span class="n">e_dist</span><span class="p">,</span> <span class="n">e_leng</span><span class="p">,</span> <span class="n">ellipse</span><span class="p">,</span> <span class="n">hex_flat</span><span class="p">,</span>
<span class="n">hex_pointy</span><span class="p">,</span> <span class="n">lengths</span><span class="p">,</span> <span class="n">radial_sort</span><span class="p">,</span> <span class="n">rectangle</span><span class="p">,</span> <span class="n">repeat</span><span class="p">,</span> <span class="n">rotate</span><span class="p">,</span> <span class="n">seg_lengths</span><span class="p">,</span>
<span class="n">segment</span><span class="p">,</span> <span class="n">simplify</span><span class="p">,</span> <span class="n">stride</span><span class="p">,</span> <span class="n">total_length</span><span class="p">,</span> <span class="n">trans_rot</span>
</pre></div>
</div>
<p>grid:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">combine_</span><span class="p">,</span> <span class="n">expand_zone</span><span class="p">,</span> <span class="n">fill_arr</span><span class="p">,</span> <span class="n">reclass_ranges</span><span class="p">,</span> <span class="n">reclass_vals</span><span class="p">,</span> <span class="n">scale_up</span>
</pre></div>
</div>
<p>image:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_even_odd</span><span class="p">,</span> <span class="n">_pad_even_odd</span><span class="p">,</span> <span class="n">_pad_nan</span><span class="p">,</span> <span class="n">_pad_zero</span><span class="p">,</span> <span class="n">a_filter</span><span class="p">,</span> <span class="n">equalize</span><span class="p">,</span>
<span class="n">normalize</span><span class="p">,</span> <span class="n">plot_img</span><span class="p">,</span> <span class="n">rgb_gray</span>
</pre></div>
</div>
<p>ndset:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_view_as_</span><span class="p">,</span> <span class="n">_check_dtype_</span><span class="p">,</span> <span class="n">nd_diff</span><span class="p">,</span> <span class="n">nd_diffxor</span><span class="p">,</span> <span class="n">nd_intersect</span><span class="p">,</span> <span class="n">nd_isin</span><span class="p">,</span>
<span class="n">nd_union</span><span class="p">,</span> <span class="n">nd_uniq</span>
</pre></div>
</div>
<p>py_tools:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_flatten</span><span class="p">,</span> <span class="n">combine_dicts</span><span class="p">,</span> <span class="n">comp_info</span><span class="p">,</span> <span class="n">dir_py</span><span class="p">,</span> <span class="n">flatten_shape</span><span class="p">,</span> <span class="n">folders</span><span class="p">,</span>
<span class="n">get_dir</span><span class="p">,</span> <span class="n">pack</span><span class="p">,</span> <span class="n">sub_folders</span><span class="p">,</span> <span class="n">unpack</span>
</pre></div>
</div>
<p>stackstats:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">check_shapes</span><span class="p">,</span> <span class="n">check_stack</span><span class="p">,</span> <span class="n">mask_stack</span><span class="p">,</span> <span class="n">stack_cumprod</span><span class="p">,</span> <span class="n">stack_cumsum</span><span class="p">,</span>
<span class="n">stack_max</span><span class="p">,</span> <span class="n">stack_mean</span><span class="p">,</span> <span class="n">stack_median</span><span class="p">,</span> <span class="n">stack_min</span><span class="p">,</span> <span class="n">stack_percentile</span><span class="p">,</span>
<span class="n">stack_prod</span><span class="p">,</span> <span class="n">stack_stats</span><span class="p">,</span> <span class="n">stack_stats_tbl</span><span class="p">,</span> <span class="n">stack_std</span><span class="p">,</span> <span class="n">stack_sum</span><span class="p">,</span> <span class="n">stack_var</span>
</pre></div>
</div>
<p>tbl:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">find_in</span><span class="p">,</span> <span class="n">tbl_count</span><span class="p">,</span> <span class="n">tbl_replace</span><span class="p">,</span> <span class="n">tbl_sum</span>
</pre></div>
</div>
<p>tblstats:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_calc_stats</span><span class="p">,</span> <span class="n">_numeric_fields_</span><span class="p">,</span> <span class="n">col_stats</span><span class="p">,</span> <span class="n">freq</span><span class="p">,</span> <span class="n">group_stats</span><span class="p">,</span> <span class="n">skew_kurt</span><span class="p">,</span> <span class="n">summ</span>
</pre></div>
</div>
<p>tools:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_func</span><span class="p">,</span> <span class="n">_tools_help_</span><span class="p">,</span> <span class="n">arr2xyz</span><span class="p">,</span> <span class="n">arrays_struct</span><span class="p">,</span> <span class="n">block</span><span class="p">,</span> <span class="n">block_arr</span><span class="p">,</span> <span class="n">change_arr</span><span class="p">,</span>
<span class="n">concat_arrs</span><span class="p">,</span> <span class="n">find</span><span class="p">,</span> <span class="n">group_pnts</span><span class="p">,</span> <span class="n">group_vals</span><span class="p">,</span> <span class="n">is_in</span><span class="p">,</span> <span class="n">make_blocks</span><span class="p">,</span> <span class="n">make_flds</span><span class="p">,</span>
<span class="n">nd2rec</span><span class="p">,</span> <span class="n">nd2struct</span><span class="p">,</span> <span class="n">nd_rec</span><span class="p">,</span> <span class="n">nd_struct</span><span class="p">,</span> <span class="n">pack_last_axis</span><span class="p">,</span> <span class="n">pad_</span><span class="p">,</span> <span class="n">radial_sort</span><span class="p">,</span>
<span class="n">rc_vals</span><span class="p">,</span> <span class="n">reclass</span><span class="p">,</span> <span class="n">rolling_stats</span><span class="p">,</span> <span class="n">running_count</span><span class="p">,</span> <span class="n">scale</span><span class="p">,</span> <span class="n">sequences</span><span class="p">,</span>
<span class="n">sliding_window_view</span><span class="p">,</span> <span class="n">sort_cols_by_row</span><span class="p">,</span> <span class="n">sort_rows_by_col</span><span class="p">,</span> <span class="n">view_sort</span><span class="p">,</span>
<span class="n">split_array</span><span class="p">,</span> <span class="n">stride</span><span class="p">,</span> <span class="n">uniq</span><span class="p">,</span> <span class="n">xy_vals</span>
</pre></div>
</div>
<p>utils:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_utils_help_</span><span class="p">,</span> <span class="n">dirr</span><span class="p">,</span> <span class="n">doc_func</span><span class="p">,</span> <span class="n">get_func</span><span class="p">,</span> <span class="n">get_modu</span><span class="p">,</span> <span class="n">run_deco</span><span class="p">,</span> <span class="n">time_deco</span><span class="p">,</span>
<span class="n">wrapper</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="basic-module">
<span id="basic"></span><h2>_basic module<a class="headerlink" href="#basic-module" title="Permalink to this headline">¶</a></h2>
<p>Fundamental array methods and properties.</p>
<span class="target" id="module-arraytools._basic"></span><div class="section" id="id1">
<h3>_basic<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Script : _basic.py</p>
<p>Author : <a class="reference external" href="mailto:Dan_Patterson&#37;&#52;&#48;carleton&#46;ca">Dan_Patterson<span>&#64;</span>carleton<span>&#46;</span>ca</a></p>
<p>Modified : 2019-01-06</p>
<p>Purpose : tools for working with numpy arrays</p>
<p class="rubric">References</p>
<p>see
<a class="reference external" href="https://docs.python.org/3/library/itertools.html#itertools-recipes">https://docs.python.org/3/library/itertools.html#itertools-recipes</a>.</p>
<p class="rubric">Notes</p>
<p>num_to_nan num_to_mask:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>  <span class="c1"># array([0, 1, 2, 3, 4, 5])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">num_to_nan</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">nums</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="go">array([ 0.,  1., nan, nan,  4.,  5.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">num_to_mask</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">nums</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="go">masked_array(data = [0 1 - - 4 5],</span>
<span class="gp">... </span>         <span class="n">mask</span> <span class="o">=</span> <span class="p">[</span><span class="kc">False</span> <span class="kc">False</span>  <span class="kc">True</span>  <span class="kc">True</span> <span class="kc">False</span> <span class="kc">False</span><span class="p">],</span>
<span class="gp">... </span>         <span class="n">fill_value</span> <span class="o">=</span> <span class="mi">999999</span><span class="p">)</span>
</pre></div>
</div>
<p>shape_to2D:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">shp</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span><span class="n">shp</span><span class="p">))</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">shp</span><span class="p">)</span>
<span class="go">array([[[ 0,  1,  2],</span>
<span class="go">        [ 3,  4,  5]],</span>
<span class="go">       [[ 6,  7,  8],</span>
<span class="go">        [ 9, 10, 11]]])</span>
</pre></div>
</div>
<p>2D stack by row:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">re_shape</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">stack2D</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="n">by_column</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># np.hstack((a[0], a[1]))</span>
<span class="go">array([[ 0,  1,  2,  6,  7,  8],</span>
<span class="go">       [ 3,  4,  5,  9, 10, 11]])</span>
</pre></div>
</div>
<p>2D stack raveled by row:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">re_shape</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">stack2D</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">by_column</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">array([[ 0,  1,  2,  3,  4,  5],</span>
<span class="go">       [ 6,  7,  8,  9, 10, 11]])</span>
</pre></div>
</div>
<p>2D stack by column:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">re_shape</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<span class="go">array([[ 0,  3],</span>
<span class="go">       [ 1,  4],</span>
<span class="go">       [ 2,  5],  # note here a[0] is translated and stacked onto a[1]</span>
<span class="go">       [ 6,  9],</span>
<span class="go">       [ 7, 10],</span>
<span class="go">       [ 8, 11]])</span>
<span class="gp">&gt;&gt;&gt; </span> <span class="n">re_shape</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<span class="go">array([[ 0,  6],</span>
<span class="go">       [ 1,  7],</span>
<span class="go">       [ 2,  8],  # note here a[0] becomes raveled and translated and</span>
<span class="go">       [ 3,  9],  # a[1] is stacked column-wise to it.</span>
<span class="go">       [ 4, 10],</span>
<span class="go">       [ 5, 11]])</span>
</pre></div>
</div>
<p>Some useful array reshaping:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">shape_to2D</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">swapaxes</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<span class="go">array([[ 0,  6],</span>
<span class="go">       [ 1,  7],</span>
<span class="go">       [ 2,  8],</span>
<span class="go">       [ 3,  9],</span>
<span class="go">       [ 4, 10],</span>
<span class="go">       [ 5, 11]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">shape_to2D</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">swapaxes</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<span class="go">array([[ 0,  1,  2,  3,  4,  5],</span>
<span class="go">       [ 6,  7,  8,  9, 10, 11]])</span>
</pre></div>
</div>
<p>For other shapes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">shp</span>          <span class="n">re_shape</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">shape</span>
<span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>       <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>    <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
<span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>
</pre></div>
</div>
<p>np.transpose and np.swapaxes are related:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">swapaxes</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)))</span>
</pre></div>
</div>
<dl class="function">
<dt id="arraytools._basic.arr_info">
<code class="descclassname">arraytools._basic.</code><code class="descname">arr_info</code><span class="sig-paren">(</span><em>a=None</em>, <em>prn=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/_basic.html#arr_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools._basic.arr_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns basic information about an numpy array.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>a</strong> (<em>array</em>) – An array to return basic information on.</li>
<li><strong>prn</strong> (<em>Boolean</em>) – True to print, False to return as string.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><em>Example array information</em></li>
<li><em>&gt;&gt;&gt; a = np.arange(2. * 3.).reshape(2, 3) # quick float64 array</em></li>
<li><em>&gt;&gt;&gt; arr_info(a)</em></li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<p>Results returned:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Array information....
OWNDATA: if &#39;False&#39;, data are a view
flags....
... snip ...
array
    | __shape (2, 3)
    | __ndim  2
    | __size  6
    | __bytes
    | __type  &lt;class &#39;numpy.ndarray&#39;&gt;
    | __strides  (24, 8)
dtype      float64
    | __kind  f
    | __char  d
    | __num   12
    | __type  &lt;class &#39;numpy.float64&#39;&gt;
    | __name  float64
    | __shape ()
    | __description
         | __name, itemsize
         | __[&#39;&#39;, &#39;&lt;f8&#39;]
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools._basic.keep_ascii">
<code class="descclassname">arraytools._basic.</code><code class="descname">keep_ascii</code><span class="sig-paren">(</span><em>s</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/_basic.html#keep_ascii"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools._basic.keep_ascii" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove non-ascii characters which may be bytes or unicode characters</p>
</dd></dl>

<dl class="function">
<dt id="arraytools._basic.is_float">
<code class="descclassname">arraytools._basic.</code><code class="descname">is_float</code><span class="sig-paren">(</span><em>a</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/_basic.html#is_float"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools._basic.is_float" title="Permalink to this definition">¶</a></dt>
<dd><p>float check</p>
</dd></dl>

<dl class="function">
<dt id="arraytools._basic.keep_nums">
<code class="descclassname">arraytools._basic.</code><code class="descname">keep_nums</code><span class="sig-paren">(</span><em>s</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/_basic.html#keep_nums"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools._basic.keep_nums" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove all non-numbers and return an integer.</p>
</dd></dl>

<dl class="function">
<dt id="arraytools._basic.del_punc">
<code class="descclassname">arraytools._basic.</code><code class="descname">del_punc</code><span class="sig-paren">(</span><em>s</em>, <em>keep_under=False</em>, <em>keep_space=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/_basic.html#del_punc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools._basic.del_punc" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove punctuation with options to keep the underscore and spaces.
If keep_space is True, then they will not be replaced with an underscore.
False, will replace them.  Check for bytes as well.</p>
</dd></dl>

<dl class="function">
<dt id="arraytools._basic.n_largest">
<code class="descclassname">arraytools._basic.</code><code class="descname">n_largest</code><span class="sig-paren">(</span><em>a</em>, <em>num=1</em>, <em>by_row=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/_basic.html#n_largest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools._basic.n_largest" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the`num` largest entries in an array by row sorted by column, or
by column sorted by row.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>a</strong> (<em>ndarray</em>) – Array dimensions &lt;=3 supported</li>
<li><strong>num</strong> (<em>integer</em>) – The number of elements to return</li>
<li><strong>by_row</strong> (<em>boolean</em>) – True for returns by row, False to determine by column</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n_largest</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">by_row</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">array([[1, 2],</span>
<span class="go">       [4, 5],</span>
<span class="go">       [7, 8]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n_largest</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">by_row</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">array([[3, 4, 5],</span>
<span class="go">       [6, 7, 8]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools._basic.n_smallest">
<code class="descclassname">arraytools._basic.</code><code class="descname">n_smallest</code><span class="sig-paren">(</span><em>a</em>, <em>num=1</em>, <em>by_row=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/_basic.html#n_smallest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools._basic.n_smallest" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the ‘n’ smallest entries in an array by row sorted by column.
see <cite>n_largest</cite> for parameter description</p>
</dd></dl>

<dl class="function">
<dt id="arraytools._basic.num_to_nan">
<code class="descclassname">arraytools._basic.</code><code class="descname">num_to_nan</code><span class="sig-paren">(</span><em>a</em>, <em>nums=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/_basic.html#num_to_nan"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools._basic.num_to_nan" title="Permalink to this definition">¶</a></dt>
<dd><p>Reverse of np.nan_to_num introduced in numpy 1.13</p>
<p class="rubric">Notes</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">num_to_nan</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="go">array([  0.,   1.,   nan,  nan,   4.,   5.,   6.,   7.,   8.,   9.])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools._basic.num_to_mask">
<code class="descclassname">arraytools._basic.</code><code class="descname">num_to_mask</code><span class="sig-paren">(</span><em>a</em>, <em>nums=None</em>, <em>hardmask=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/_basic.html#num_to_mask"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools._basic.num_to_mask" title="Permalink to this definition">¶</a></dt>
<dd><p>Reverse of nan_to_num introduced in numpy 1.13</p>
<p class="rubric">Notes</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">art</span><span class="o">.</span><span class="n">num_to_mask</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">nums</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="go">``masked_array(data = [0 - - 3 - 5 6 7 8 9],``</span>
<span class="go">``mask = [False  True  True False  True False``</span>
<span class="go">``False False False False], fill_value = 999999)``</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools._basic.even_odd">
<code class="descclassname">arraytools._basic.</code><code class="descname">even_odd</code><span class="sig-paren">(</span><em>a</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/_basic.html#even_odd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools._basic.even_odd" title="Permalink to this definition">¶</a></dt>
<dd><p>Even/odd from modulus.  Returns 0 for even, 1 for odd</p>
</dd></dl>

<dl class="function">
<dt id="arraytools._basic.pad_even_odd">
<code class="descclassname">arraytools._basic.</code><code class="descname">pad_even_odd</code><span class="sig-paren">(</span><em>a</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/_basic.html#pad_even_odd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools._basic.pad_even_odd" title="Permalink to this definition">¶</a></dt>
<dd><p>To use when padding a strided array for window construction</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-func docutils literal notranslate"><span class="pre">art.num_to_nan()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">art.pad_nan()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">art.pan_zero()</span></code></p>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools._basic.pad_nan">
<code class="descclassname">arraytools._basic.</code><code class="descname">pad_nan</code><span class="sig-paren">(</span><em>a</em>, <em>nan_edge=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/_basic.html#pad_nan"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools._basic.pad_nan" title="Permalink to this definition">¶</a></dt>
<dd><p>Pad a sliding array to allow for stats, padding uses np.nan</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-func docutils literal notranslate"><span class="pre">art.num_to_nan()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">art.pan_zero()</span></code>, <a class="reference internal" href="#arraytools._basic.pad_even_odd" title="arraytools._basic.pad_even_odd"><code class="xref py py-func docutils literal notranslate"><span class="pre">pad_even_odd()</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools._basic.pad_zero">
<code class="descclassname">arraytools._basic.</code><code class="descname">pad_zero</code><span class="sig-paren">(</span><em>a</em>, <em>n=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/_basic.html#pad_zero"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools._basic.pad_zero" title="Permalink to this definition">¶</a></dt>
<dd><p>To use when padding a strided array for window construction. n = number
of zeros to pad arround the array</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-func docutils literal notranslate"><span class="pre">art.num_to_nan()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">art.pad_nan()</span></code>, <a class="reference internal" href="#arraytools._basic.pad_even_odd" title="arraytools._basic.pad_even_odd"><code class="xref py py-func docutils literal notranslate"><span class="pre">pad_even_odd()</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools._basic.fill_diagonal">
<code class="descclassname">arraytools._basic.</code><code class="descname">fill_diagonal</code><span class="sig-paren">(</span><em>n=5</em>, <em>seq=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/_basic.html#fill_diagonal"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools._basic.fill_diagonal" title="Permalink to this definition">¶</a></dt>
<dd><p>Fill the diagonal of a square array with a sequence</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>n</strong> (<em>integer</em>) – Rows and columns to create.</li>
<li><strong>seq</strong> (<em>array-like</em>) – Sequence to put on the diagonal.  It need not but sequential</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools._basic.shape_to2D">
<code class="descclassname">arraytools._basic.</code><code class="descname">shape_to2D</code><span class="sig-paren">(</span><em>a</em>, <em>to_col=False</em>, <em>as_stack=False</em>, <em>col_wise=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/_basic.html#shape_to2D"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools._basic.shape_to2D" title="Permalink to this definition">¶</a></dt>
<dd><p>Reshape an ndim array to a 2D array for print formatting and other uses.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>a</strong> (<em>array</em>) – array ndim &gt;= 3</li>
<li><strong>to_col</strong> (<em>boolean</em>) – True, swaps axis 0 and 1 before determine the shape, this ravels the
last axis prior to stacking</li>
<li><strong>as_stack</strong> (<em>boolean</em>) – True, swaps, then stacks the last two dimensions row-wise.  If False,
the first two dimensions are raveled then vertically stacked</li>
<li><strong>col_wise</strong> (<em>boolean</em>) – True returns the output array as a column</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>See the script header for detailed examples.</p>
</dd></dl>

<dl class="function">
<dt id="arraytools._basic.reshape_options">
<code class="descclassname">arraytools._basic.</code><code class="descname">reshape_options</code><span class="sig-paren">(</span><em>a</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/_basic.html#reshape_options"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools._basic.reshape_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Alternative shapes for a numpy array.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>a</strong> (<em>ndarray</em>) – The ndarray with ndim &gt;= 2</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><ul class="simple">
<li><em>An object array containing the shapes of equal or lower dimension,</em></li>
<li><em>excluding ndim=1</em></li>
<li><em>&gt;&gt;&gt; a.shape # =&gt; (3, 2, 4)</em></li>
<li><em>array([(2, 12), (3, 8), (4, 6), (6, 4), (8, 3), (12, 2), (2, 3, 4),</em> – (2, 4, 3), (3, 2, 4), (3, 4, 2), (4, 2, 3), (4, 3, 2)], dtype=object)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">case</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">(</span><span class="n">permutations</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span>
<span class="go">                    for r in range(len(s)+1)))[1:])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prod</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">case</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">match</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">prod</span> <span class="o">==</span> <span class="n">size</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<p class="rubric">References</p>
<p><a class="reference external" href="https://docs.python.org/3/library/itertools.html#itertools-recipes">https://docs.python.org/3/library/itertools.html#itertools-recipes</a>.</p>
</dd></dl>

<dl class="function">
<dt id="arraytools._basic.cartesian">
<code class="descclassname">arraytools._basic.</code><code class="descname">cartesian</code><span class="sig-paren">(</span><em>arrays</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/_basic.html#cartesian"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools._basic.cartesian" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a cartesian product of input arrays.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>arrays</strong> (<em>list of array-like</em>) – 1D or 2D arrays to form the cartesian product of.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>out</strong> – 2-D array of shape (M, len(arrays)) containing cartesian products
formed of input arrays.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">ndarray</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cartesian</span><span class="p">(([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">6</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cartesian</span><span class="p">(([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">]))</span>
<span class="go">array([[1, 4, 6],     array([[&#39;a&#39;, &#39;a&#39;],</span>
<span class="go">       [1, 5, 6],            [&#39;a&#39;, &#39;b&#39;]</span>
<span class="go">       [2, 4, 6],            [&#39;a&#39;, &#39;c&#39;],</span>
<span class="go">       [2, 5, 6],            [&#39;b&#39;, &#39;a&#39;],</span>
<span class="go">       [3, 4, 6],            [&#39;b&#39;, &#39;b&#39;],</span>
<span class="go">       [3, 5, 6]])           [&#39;b&#39;, &#39;c&#39;]], dtype=&#39;&lt;U1&#39;)</span>
</pre></div>
</div>
<p class="rubric">References</p>
<p><a class="reference external" href="https://stackoverflow.com/questions/11144513/numpy-cartesian-product-of-x-and-y-array-points-into-single-array-of-2d-points">https://stackoverflow.com/questions/11144513/numpy-cartesian-product-of-x-and-y-array-points-into-single-array-of-2d-points</a>.</p>
<p>René Descartes : <a class="reference external" href="https://en.wikipedia.org/wiki/René_Descartes">https://en.wikipedia.org/wiki/René_Descartes</a>.</p>
</dd></dl>

<dl class="function">
<dt id="arraytools._basic.all_pairs">
<code class="descclassname">arraytools._basic.</code><code class="descname">all_pairs</code><span class="sig-paren">(</span><em>a</em>, <em>to_3d=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/_basic.html#all_pairs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools._basic.all_pairs" title="Permalink to this definition">¶</a></dt>
<dd><p>Make pairs for all combinations in a 2D array.  It is a stacked array
version of <cite>ft_pairs</cite>. More combinations without duplicates are returned</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>a</strong> (<em>array-like</em>) – A (N,2) array or list such as pairs of x,y coordinates.</li>
<li><strong>to_3d</strong> – If True, then from-to pairs are created within a 3D structure.
If False, than a 2D array is created with each row representing a
fromX, fromY, toX, toY sequence</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<p><a class="reference external" href="https://stackoverflow.com/questions/46339926/finding-all-combinations-of-paired-numpy-arrays-via-meshgrid">https://stackoverflow.com/questions/46339926/finding-all-combinations-of-paired-numpy-arrays-via-meshgrid</a>.</p>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ab</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">ab</span>
<span class="go">array([[ 0,  1],</span>
<span class="go">       [ 2,  3],</span>
<span class="go">       [ 4,  5],</span>
<span class="go">       [ 7,  8],</span>
<span class="go">       [ 9, 10]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">all_pairs</span><span class="p">(</span><span class="n">ab</span><span class="p">)</span>
<span class="go">array([[ 0,  1,  2,  3],   ** within `a` pair</span>
<span class="go">       [ 0,  1,  4,  5],   ** within `a` pair</span>
<span class="go">       [ 0,  1,  7,  8],</span>
<span class="go">       [ 0,  1,  9, 10],</span>
<span class="go">       [ 2,  3,  4,  5],</span>
<span class="go">       [ 2,  3,  7,  8],</span>
<span class="go">       [ 2,  3,  9, 10],</span>
<span class="go">       [ 4,  5,  7,  8],</span>
<span class="go">       [ 4,  5,  9, 10],</span>
<span class="go">       [ 7,  8,  9, 10]])  ** within `b` pair</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools._basic.ft_pairs">
<code class="descclassname">arraytools._basic.</code><code class="descname">ft_pairs</code><span class="sig-paren">(</span><em>a</em>, <em>b</em>, <em>to_2D=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/_basic.html#ft_pairs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools._basic.ft_pairs" title="Permalink to this definition">¶</a></dt>
<dd><p>Make pairs or coordinates from arrays of the same or different lengths.
The current implementation is designed to pair coordinate data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>a</strong> (<em>array like</em>) – Two (N, 2) arrays or lists such pairs of x,y coordinates.</li>
<li><strong>to_2d</strong> (<em>boolean</em>) – <p>If True, then (from, to pairs) are created within a 3D structure.</p>
<p>If False, than a 2D array is created with each row representing a
fromX, fromY, toX, toY sequence</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<p>A couple</p>
<p><a class="reference external" href="https://stackoverflow.com/questions/11144513/numpy-cartesian-product-of-x-and-y-array-points-into-single-array-of-2d-points">https://stackoverflow.com/questions/11144513/numpy-cartesian-product-of-x-and-y-array-points-into-single-array-of-2d-points</a>.</p>
<p><a class="reference external" href="https://stackoverflow.com/questions/34502254/vectorizing-haversine-distance-calculation-in-python">https://stackoverflow.com/questions/34502254/vectorizing-haversine-distance-calculation-in-python</a>.</p>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="go">     array([[0, 1],   array([[ 7,  8],</span>
<span class="go">            [2, 3],          [ 9, 10]])</span>
<span class="go">            [4, 5]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z0</span> <span class="o">=</span> <span class="n">make_pairs</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prn</span><span class="p">(</span><span class="n">z0</span><span class="p">)</span>
<span class="go">array([[ 0,  1,  7,  8],</span>
<span class="go">       [ 0,  1,  9, 10],</span>
<span class="go">       [ 2,  3,  7,  8],</span>
<span class="go">       [ 2,  3,  9, 10],</span>
<span class="go">       [ 4,  5,  7,  8],</span>
<span class="go">       [ 4,  5,  9, 10]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">([[</span><span class="o">*</span><span class="n">i</span><span class="p">,</span> <span class="o">*</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">a</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">b</span><span class="p">]</span>  <span class="c1"># same as</span>
</pre></div>
</div>
</dd></dl>

</div>
<hr class="docutils" />
</div>
<div class="section" id="io-module">
<span id="io"></span><h2>_io module<a class="headerlink" href="#io-module" title="Permalink to this headline">¶</a></h2>
<p>Input and output for arrays to and from disk.</p>
<span class="target" id="module-arraytools._io"></span><div class="section" id="io-py">
<h3>_io.py<a class="headerlink" href="#io-py" title="Permalink to this headline">¶</a></h3>
<p>Script :   _io.py</p>
<p>Author :   <a class="reference external" href="mailto:Dan&#46;Patterson&#37;&#52;&#48;carleton&#46;ca">Dan<span>&#46;</span>Patterson<span>&#64;</span>carleton<span>&#46;</span>ca</a></p>
<p>Modified : 2019-01-06</p>
<p>Purpose : Basic io tools for numpy arrays</p>
<p>Notes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">0.</span>  <span class="n">dtype_info</span>  <span class="o">-</span> <span class="n">returns</span> <span class="n">names</span><span class="p">,</span> <span class="n">formats</span> <span class="k">for</span> <span class="n">structured</span> <span class="n">arrays</span>
<span class="mf">1.</span>  <span class="n">load_npy</span>    <span class="o">-</span> <span class="n">load</span> <span class="n">numpy</span> <span class="n">npy</span> <span class="n">files</span>
<span class="mf">2.</span>  <span class="n">save_npy</span>    <span class="o">-</span> <span class="n">save</span> <span class="n">array</span> <span class="n">to</span> <span class="o">.</span><span class="n">npy</span> <span class="nb">format</span>
<span class="mf">3.</span>  <span class="n">load_txt</span>    <span class="o">-</span> <span class="n">read</span> <span class="n">array</span> <span class="n">created</span> <span class="n">by</span> <span class="n">save_txtt</span>
<span class="mf">4.</span>  <span class="n">save_txt</span>    <span class="o">-</span> <span class="n">save</span> <span class="n">array</span> <span class="n">to</span> <span class="n">npy</span> <span class="nb">format</span>
<span class="mf">5.</span>  <span class="n">arr_json</span>    <span class="o">-</span> <span class="n">save</span> <span class="n">to</span> <span class="n">json</span> <span class="nb">format</span>
<span class="mi">6</span><span class="o">-</span><span class="mi">9</span> <span class="nb">dict</span><span class="o">&lt;-&gt;</span><span class="n">array</span> <span class="n">conversions</span>
<span class="mf">10.</span> <span class="n">excel_np</span>    <span class="o">-</span> <span class="n">convert</span> <span class="n">xls</span><span class="o">/</span><span class="n">xlsx</span> <span class="n">files</span> <span class="n">to</span> <span class="n">numpy</span> <span class="n">structured</span><span class="o">/</span><span class="n">recarray</span>
</pre></div>
</div>
<dl class="function">
<dt id="arraytools._io.dtype_info">
<code class="descclassname">arraytools._io.</code><code class="descname">dtype_info</code><span class="sig-paren">(</span><em>a=None</em>, <em>as_string=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/_io.html#dtype_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools._io.dtype_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Return dtype information for a structured/recarray as either tuples
or as strings.</p>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">array</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span>  <span class="mi">4</span><span class="p">,</span>  <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span>  <span class="mi">7</span><span class="p">,</span>  <span class="mi">8</span><span class="p">),</span> <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">)],</span>
<span class="go">              dtype=[(&#39;f0&#39;, &#39;&lt;i4&#39;), (&#39;f1&#39;, &#39;&lt;i4&#39;), (&#39;f2&#39;, &#39;&lt;i4&#39;)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">dtype</span><span class="o">.</span><span class="n">descr</span>
<span class="go">[(&#39;f0&#39;, &#39;&lt;i4&#39;), (&#39;f1&#39;, &#39;&lt;i4&#39;), (&#39;f2&#39;, &#39;&lt;i4&#39;)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">names</span><span class="p">,</span> <span class="n">formats</span> <span class="o">=</span> <span class="n">dtype_info</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">as_string</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">#   [&#39;f0&#39;, &#39;f1&#39;, &#39;f2&#39;], [&#39;&lt;i4&#39;, &#39;&lt;i4&#39;, &#39;&lt;i4&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">names</span><span class="p">,</span> <span class="n">formats</span> <span class="o">=</span> <span class="n">dtype_info</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">as_string</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">#   &#39;f0, f1, f2&#39;, &#39;&lt;i4, &lt;i4, &lt;i4&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">dtype_info</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="kc">False</span><span class="p">)))</span>  <span class="c1"># to reconstruct</span>
<span class="go">[(&#39;f0&#39;, &#39;&lt;i4&#39;), (&#39;f1&#39;, &#39;&lt;i4&#39;), (&#39;f2&#39;, &#39;&lt;i4&#39;)]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools._io.load_npy">
<code class="descclassname">arraytools._io.</code><code class="descname">load_npy</code><span class="sig-paren">(</span><em>f_name</em>, <em>all_info=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/_io.html#load_npy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools._io.load_npy" title="Permalink to this definition">¶</a></dt>
<dd><p>load a well formed <cite>npy</cite> file representing a structured array</p>
<p>Returns an array, the description, field names and their size.</p>
</dd></dl>

<dl class="function">
<dt id="arraytools._io.save_npy">
<code class="descclassname">arraytools._io.</code><code class="descname">save_npy</code><span class="sig-paren">(</span><em>a</em>, <em>f_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/_io.html#save_npy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools._io.save_npy" title="Permalink to this definition">¶</a></dt>
<dd><p>Save an array as an npy file.</p>
<p>The type of data in each column is arbitrary.  It will be cast to the
given dtype at runtime</p>
</dd></dl>

<dl class="function">
<dt id="arraytools._io.load_txt">
<code class="descclassname">arraytools._io.</code><code class="descname">load_txt</code><span class="sig-paren">(</span><em>name='arr.txt'</em>, <em>data_type=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/_io.html#load_txt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools._io.load_txt" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the structured/recarray created by save_txt.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>dtype</strong> (<em>data type</em>) – If <cite>None</cite>, it allows the structure to be read from the array.</li>
<li><strong>delimiter</strong> (<em>string</em>) – Use a comma delimiter by default.</li>
<li><strong>skip_header</strong> (<em>int</em>) – Number of rows to skip at the beginning</li>
<li><strong>names</strong> (<em>boolean</em>) – If <cite>True</cite>, the first row contains the field names.</li>
<li><strong>encoding</strong> – Set to None to use system default</li>
<li><strong>np.genfromtxt for all args and kwargs.</strong> (<em>see</em>) – </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools._io.save_txt">
<code class="descclassname">arraytools._io.</code><code class="descname">save_txt</code><span class="sig-paren">(</span><em>a</em>, <em>name='arr.txt'</em>, <em>sep='</em>, <em>'</em>, <em>dt_hdr=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/_io.html#save_txt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools._io.save_txt" title="Permalink to this definition">¶</a></dt>
<dd><p>Save a NumPy structured, recarray to text.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>a</strong> (<em>array</em>) – input array</li>
<li><strong>fname</strong> (<em>filename</em>) – output filename and path otherwise save to script folder</li>
<li><strong>sep</strong> (<em>separator</em>) – column separater, include a space if needed</li>
<li><strong>dt_hdr</strong> (<em>boolean</em>) – if True, add dtype names to the header of the file</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools._io.arr_json">
<code class="descclassname">arraytools._io.</code><code class="descname">arr_json</code><span class="sig-paren">(</span><em>file_out</em>, <em>arr=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/_io.html#arr_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools._io.arr_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Send an array out to json format. Use json_arr to read the file.
No error checking</p>
</dd></dl>

<dl class="function">
<dt id="arraytools._io.dict_arrays">
<code class="descclassname">arraytools._io.</code><code class="descname">dict_arrays</code><span class="sig-paren">(</span><em>d</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/_io.html#dict_arrays"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools._io.dict_arrays" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary to arrays</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>d</strong> (<em>dictionary</em>) – The dictionary to convert to arrays</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><ul class="simple">
<li><em>A list, which can be converted to an array if needed.  It will probably</em></li>
<li>be an <cite>object</cite> array if the array types are mixed.</li>
<li><strong>&gt;&gt;&gt; d =  {‘A’</strong> (<em>1, ‘B’: [1, 2], ‘C’: (3.0, 4), ‘D’: (5.0, 6.0),</em>) – ‘E’: [‘a’, ‘bb’], ‘F’: [‘ccc’, 7, 8.0], ‘G’: [[1, 2], [3, 4]]}</li>
<li><em>&gt;&gt;&gt; arr = np.asarray(dict_arrays(d))</em></li>
<li><em>&gt;&gt;&gt; arr</em></li>
<li><em>array([array(1), array([1, 2]), array([3., 4.]), array([5., 6.]),</em> – array([‘a’, ‘bb’], dtype=’&lt;U2’),
array([‘ccc’, 7, 8.0], dtype=object),
array([[1, 2], [3, 4]], dtype=object)], dtype=object)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools._io.iterable_dict">
<code class="descclassname">arraytools._io.</code><code class="descname">iterable_dict</code><span class="sig-paren">(</span><em>a</em>, <em>use_numbers=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/_io.html#iterable_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools._io.iterable_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterable (list, tuple, np.ndarray) to dictionary</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>a</strong> (<em>iterable</em>) – The iterable to convert to a dictionary.  Normally useful if it is a
list of lists or np.ndarray</li>
<li><strong>use_numbers</strong> (<em>boolean</em>) – True, the dictionary keys are assigned 0…n.  False, letters are
sliced from the lett_lst below</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><p class="first"><em>A dictionary.</em></p>
</li>
<li><div class="first highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># see `arr` in `dict_arrays`</span>
</pre></div>
</div>
</li>
<li><p class="first"><em>&gt;&gt;&gt; iterable_dict(arr, use_numbers=False)</em></p>
</li>
<li><p class="first"><strong>&gt;&gt;&gt; {‘A’</strong> (<em>array(1), ‘B’: array([1, 2]), ‘C’: array([3., 4.]),</em>) – ‘D’: array([5., 6.]), ‘E’: array([‘a’, ‘bb’], dtype=’&lt;U2’),
‘F’: array([‘ccc’, 7, 8.0], dtype=object),
‘G’: array([[1, 2], [3, 4]], dtype=object)}</p>
</li>
<li><p class="first"><em>Simpler cases</em></p>
</li>
<li><p class="first"><em>&gt;&gt;&gt; z = ‘abcde’</em></p>
</li>
<li><p class="first"><em>&gt;&gt;&gt; iterable_dict(z)</em></p>
</li>
<li><p class="first"><strong>{0</strong> (<em>‘a’, 1: ‘b’, 2: ‘c’, 3: ‘d’, 4: ‘e’}</em>)</p>
</li>
<li><p class="first"><em>&gt;&gt;&gt; iterable_dict(z, False)</em></p>
</li>
<li><p class="first"><strong>{‘A’</strong> (<em>‘a’, ‘B’: ‘b’, ‘C’: ‘c’, ‘D’: ‘d’, ‘E’: ‘e’}</em>)</p>
</li>
<li><p class="first"><em>&gt;&gt;&gt; iterable_dict([1,’a’, 2], False)</em></p>
</li>
<li><p class="first"><strong>{‘A’</strong> (<em>1, ‘B’: ‘a’, ‘C’: 2}</em>)</p>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools._io.dict_struct">
<code class="descclassname">arraytools._io.</code><code class="descname">dict_struct</code><span class="sig-paren">(</span><em>d</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/_io.html#dict_struct"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools._io.dict_struct" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary to simple structured/recarray</p>
</dd></dl>

<dl class="function">
<dt id="arraytools._io.struct_dict">
<code class="descclassname">arraytools._io.</code><code class="descname">struct_dict</code><span class="sig-paren">(</span><em>a</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/_io.html#struct_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools._io.struct_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Structured/recarray to dictionary</p>
</dd></dl>

<dl class="function">
<dt id="arraytools._io.excel_np">
<code class="descclassname">arraytools._io.</code><code class="descname">excel_np</code><span class="sig-paren">(</span><em>path</em>, <em>sheet_num=0</em>, <em>int_null=-999</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/_io.html#excel_np"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools._io.excel_np" title="Permalink to this definition">¶</a></dt>
<dd><p>Read excel files to numpy structured/record arrays.  Your spreadsheet
must adhere to simple rules:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">first</span> <span class="n">row</span> <span class="n">must</span> <span class="n">contain</span> <span class="n">the</span> <span class="n">field</span> <span class="n">names</span> <span class="k">for</span> <span class="n">the</span> <span class="n">output</span> <span class="n">array</span>
<span class="o">-</span> <span class="n">no</span> <span class="n">blank</span> <span class="n">rows</span> <span class="ow">or</span> <span class="n">columns</span><span class="p">,</span> <span class="n">basically</span><span class="p">,</span> <span class="n">no</span> <span class="n">fluff</span> <span class="ow">or</span> <span class="n">formatting</span>
<span class="o">-</span> <span class="k">if</span> <span class="n">you</span> <span class="n">have</span> <span class="n">nodata</span> <span class="n">values</span><span class="p">,</span> <span class="n">put</span> <span class="n">them</span> <span class="ow">in</span><span class="p">,</span> <span class="n">since</span> <span class="n">blank</span> <span class="n">cells</span> <span class="n">will</span> <span class="n">be</span>
  <span class="s1">&#39;corrected&#39;</span> <span class="k">as</span> <span class="n">best</span> <span class="k">as</span> <span class="n">possible</span><span class="o">.</span>
<span class="o">-</span> <span class="n">text</span> <span class="ow">and</span> <span class="n">numbers</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">column</span><span class="p">,</span> <span class="n">results</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">text</span> <span class="n">column</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>path</strong> (<em>text</em>) – Full path to the xls, xlsx file</li>
<li><strong>sheet_num</strong> (<em>integer</em>) – Sheets are numbered from 0.</li>
<li><strong>int_null</strong> (<em>integer</em>) – Integer value to use for nulls. Strings have <cite>None</cite>, floats <cite>np.nan</cite>
but integers have no equivalent so you have to provide one.
you could use np.iinfo(np.intXX).min where XX is 8, 16, 32 to reflect
the appropriate integer minimums</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><em>A numpy structured array is returned.  Excel only uses float or string</em></li>
<li><em>data, so attempts are made to coerse integer columns by comparing the</em></li>
<li><em>float vs int versions of the arrays.  A tad of a kludge, but it works.</em></li>
<li><em>The first row’s data type is compared to its matching column data type.</em></li>
<li><em>If they match, then it is used as the dtype.  If there is a mismatch an</em></li>
<li><em>attempt is made to recover numeric data by assigning blanks etc in numeric</em></li>
<li><em>columns a value of np.nan.</em></li>
<li><em>String/text columns are check for empty cells, ‘’, “” and that ever so</em></li>
<li><em>ugly invisible space.</em></li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">aString</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;c:/temp/test.xlsx&#39;</span><span class="p">,</span><span class="s1">&#39;rb&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">book_</span> <span class="o">=</span> <span class="n">open_workbook</span><span class="p">(</span><span class="n">file_contents</span><span class="o">=</span><span class="n">aString</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">dir</span><span class="p">(</span><span class="n">book_</span><span class="p">):</span>
<span class="go">    get_sheet, nsheets, sheet_by_index, sheet_by_name etc....</span>
</pre></div>
</div>
<p>Now you can read a sheet</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sheet</span> <span class="o">=</span> <span class="n">book_</span><span class="o">.</span><span class="n">sheet_by_index</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># first sheet</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sheet</span><span class="o">.</span><span class="n">col_types</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">References</p>
<p><a class="reference external" href="https://media.readthedocs.org/pdf/xlrd/latest/xlrd.pdf">https://media.readthedocs.org/pdf/xlrd/latest/xlrd.pdf</a>.</p>
</dd></dl>

</div>
<hr class="docutils" />
</div>
<div class="section" id="create-module">
<h2>create module<a class="headerlink" href="#create-module" title="Permalink to this headline">¶</a></h2>
<p>Create arrays representing geometric objects.</p>
<span class="target" id="module-arraytools.create"></span><div class="section" id="create">
<h3>create<a class="headerlink" href="#create" title="Permalink to this headline">¶</a></h3>
<p>Script :   create.py</p>
<p>Author :   <a class="reference external" href="mailto:Dan_Patterson&#37;&#52;&#48;carleton&#46;ca">Dan_Patterson<span>&#64;</span>carleton<span>&#46;</span>ca</a></p>
<p>Modified : 2019-01-15</p>
<p>Purpose :  Tools for creating arrays of various geometric shapes</p>
<p>Notes:</p>
<p>References</p>
<dl class="function">
<dt id="arraytools.create.convex">
<code class="descclassname">arraytools.create.</code><code class="descname">convex</code><span class="sig-paren">(</span><em>points</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/create.html#convex"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.create.convex" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the convex hull for given points
:Input is a list of 2D points [(x, y), …]</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.create.circle">
<code class="descclassname">arraytools.create.</code><code class="descname">circle</code><span class="sig-paren">(</span><em>radius=1.0</em>, <em>theta=10.0</em>, <em>xc=0.0</em>, <em>yc=0.0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/create.html#circle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.create.circle" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce a circle/ellipse depending on parameters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>radius</strong> (<em>number</em>) – Distance from centre</li>
<li><strong>theta</strong> (<em>number</em>) – Angle of densification of the shape around 360 degrees</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools.create.ellipse">
<code class="descclassname">arraytools.create.</code><code class="descname">ellipse</code><span class="sig-paren">(</span><em>x_radius=1.0</em>, <em>y_radius=1.0</em>, <em>theta=10.0</em>, <em>xc=0.0</em>, <em>yc=0.0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/create.html#ellipse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.create.ellipse" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce an ellipse depending on parameters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>radius</strong> (<em>number</em>) – Distance from centre in the X and Y directions</li>
<li><strong>theta</strong> (<em>number</em>) – Angle of densification of the shape around 360 degrees</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools.create.hex_flat">
<code class="descclassname">arraytools.create.</code><code class="descname">hex_flat</code><span class="sig-paren">(</span><em>dx=1</em>, <em>dy=1</em>, <em>cols=1</em>, <em>rows=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/create.html#hex_flat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.create.hex_flat" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate the points for the flat-headed hexagon</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>dy_dx</strong> (<em>number</em>) – The radius width, remember this when setting hex spacing</li>
<li><strong>dx</strong> (<em>number</em>) – Increment in x direction, +ve moves west to east, left/right</li>
<li><strong>dy</strong> (<em>number</em>) – Increment in y direction, -ve moves north to south, top/bottom</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools.create.hex_pointy">
<code class="descclassname">arraytools.create.</code><code class="descname">hex_pointy</code><span class="sig-paren">(</span><em>dx=1</em>, <em>dy=1</em>, <em>cols=1</em>, <em>rows=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/create.html#hex_pointy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.create.hex_pointy" title="Permalink to this definition">¶</a></dt>
<dd><p>Pointy hex angles, convert to sin, cos, zip and send</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>- number</strong> (<em>dy_dx</em>) – The radius width, remember this when setting hex spacing</li>
<li><strong>dx</strong> (<em>number</em>) – Increment in x direction, +ve moves west to east, left/right</li>
<li><strong>dy</strong> (<em>number</em>) – Increment in y direction, -ve moves north to south, top/bottom</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools.create.rectangle">
<code class="descclassname">arraytools.create.</code><code class="descname">rectangle</code><span class="sig-paren">(</span><em>dx=1</em>, <em>dy=1</em>, <em>cols=1</em>, <em>rows=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/create.html#rectangle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.create.rectangle" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the array of pnts to pass on to arcpy using numpy magic</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>dx</strong> (<em>number</em>) – Increment in x direction, +ve moves west to east, left/right</li>
<li><strong>dy</strong> (<em>number</em>) – Increment in y direction, -ve moves north to south, top/bottom</li>
<li><strong>cols</strong> (<em>rows</em><em>,</em>) – Row and columns to produce</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools.create.triangle">
<code class="descclassname">arraytools.create.</code><code class="descname">triangle</code><span class="sig-paren">(</span><em>dx=1</em>, <em>dy=1</em>, <em>cols=1</em>, <em>rows=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/create.html#triangle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.create.triangle" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a row of meshed triangles</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>rectangle</strong> (<em>see</em>) – </td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools.create.pnt_from_dist_bearing">
<code class="descclassname">arraytools.create.</code><code class="descname">pnt_from_dist_bearing</code><span class="sig-paren">(</span><em>orig=(0</em>, <em>0)</em>, <em>bearings=None</em>, <em>dists=None</em>, <em>prn=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/create.html#pnt_from_dist_bearing"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.create.pnt_from_dist_bearing" title="Permalink to this definition">¶</a></dt>
<dd><p>Point locations given distance and bearing from an origin.
Calculate the point coordinates from distance and angle</p>
<p class="rubric">References</p>
<p><a class="reference external" href="https://community.esri.com/thread/66222">https://community.esri.com/thread/66222</a>.</p>
<p><a class="reference external" href="https://community.esri.com/blogs/dan_patterson/2018/01/21/origin-distances-and-bearings-geometry-wanderings">https://community.esri.com/blogs/dan_patterson/2018/01/21/origin-distances-and-bearings-geometry-wanderings</a>.</p>
<p class="rubric">Notes</p>
<p>Sample calculation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bearings</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">361</span><span class="p">,</span> <span class="mf">22.5</span><span class="p">)</span>  <span class="c1"># 17 bearings</span>
<span class="n">dists</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">bearings</span><span class="p">))</span> <span class="o">*</span> <span class="mf">1.0</span>  <span class="n">OR</span>
<span class="n">dists</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">full</span><span class="p">(</span><span class="n">bearings</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="mf">100.</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">dist_bearing</span><span class="p">(</span><span class="n">orig</span><span class="o">=</span><span class="n">orig</span><span class="p">,</span> <span class="n">bearings</span><span class="o">=</span><span class="n">bearings</span><span class="p">,</span> <span class="n">dists</span><span class="o">=</span><span class="n">dists</span><span class="p">)</span>
</pre></div>
</div>
<p>Create a featureclass from the results:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">shapeXY</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;X_to&#39;</span><span class="p">,</span> <span class="s1">&#39;Y_to&#39;</span><span class="p">]</span>
<span class="n">fc_name</span> <span class="o">=</span> <span class="s1">&#39;C:/path/Geodatabase.gdb/featureclassname&#39;</span>
<span class="n">arcpy</span><span class="o">.</span><span class="n">da</span><span class="o">.</span><span class="n">NumPyArrayToFeatureClass</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="n">fc_name</span><span class="p">,</span>
                                  <span class="p">[</span><span class="s1">&#39;X_to&#39;</span><span class="p">,</span> <span class="s1">&#39;Y_to&#39;</span><span class="p">],</span> <span class="s2">&quot;2951&quot;</span><span class="p">)</span>
<span class="c1"># ... syntax</span>
<span class="n">arcpy</span><span class="o">.</span><span class="n">da</span><span class="o">.</span><span class="n">NumPyArrayToFeatureClass</span><span class="p">(</span><span class="n">in_array</span><span class="o">=</span><span class="n">out</span><span class="p">,</span>
                                  <span class="n">out_table</span><span class="o">=</span><span class="n">fc_name</span><span class="p">,</span>
                                  <span class="n">shape_fields</span><span class="o">=</span><span class="n">shapeXY</span><span class="p">,</span>
                                  <span class="n">spatial_reference</span><span class="o">=</span><span class="n">SR</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools.create.xy_grid">
<code class="descclassname">arraytools.create.</code><code class="descname">xy_grid</code><span class="sig-paren">(</span><em>x</em>, <em>y=None</em>, <em>top_left=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/create.html#xy_grid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.create.xy_grid" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a 2D array of locations from x, y values.  The values need not
be uniformly spaced just sequential. Derived from <cite>meshgrid</cite> in References.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>y</strong> (<em>x</em><em>,</em>) – To form a mesh, there must at least be 2 values in each sequence</li>
<li><strong>top_left</strong> (<em>boolean</em>) – True, y’s are sorted in descending order, x’s in ascending</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<p><a class="reference external" href="https://github.com/numpy/numpy/blob/master/numpy/lib/function_base.py">https://github.com/numpy/numpy/blob/master/numpy/lib/function_base.py</a>.</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.create.transect_lines">
<code class="descclassname">arraytools.create.</code><code class="descname">transect_lines</code><span class="sig-paren">(</span><em>N=5</em>, <em>orig=None</em>, <em>dist=1</em>, <em>x_offset=0</em>, <em>y_offset=0</em>, <em>bearing=0</em>, <em>as_ndarray=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/create.html#transect_lines"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.create.transect_lines" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct transect lines from origin-destination points given a
distance and bearing from the origin point</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>N</strong> (<em>number</em>) – The number of transect lines</li>
<li><strong>orig</strong> (<em>array-like</em>) – A single origin.  If None, the cartesian origin (0, 0) is used</li>
<li><strong>dist</strong> (<em>number</em><em> or </em><em>array-like</em>) – The distance(s) from the origin</li>
<li><strong>y_offset</strong> (<em>x_offset</em><em>,</em>) – If the <cite>orig</cite> is a single location, you can construct offset lines
using these values</li>
<li><strong>bearing</strong> (<em>number</em><em> or </em><em>array-like</em>) – If a single number, parallel lines are produced. An array of values
equal to the <cite>orig</cite> can be used.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li>Two outputs are returned, the first depends on the <cite>as_ndarray</cite> setting.</li>
<li><em>1. True, a structured array. False - a recarray</em></li>
<li><em>2. An ndarray with the field names in case the raw data are required.</em></li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>It is easiest of you pick a <cite>corner</cite>, then use x_offset, y_offset to
control whether you are moving horizontally and vertically from the origin.
The bottom left is easiest, and positive offsets move east and north from.</p>
<p>Use XY to Line tool in ArcGIS Pro to convert the from/to pairs to a line</p>
<p><a class="reference external" href="http://pro.arcgis.com/en/pro-app/tool-reference/data-management/xy-to-line.htm">http://pro.arcgis.com/en/pro-app/tool-reference/data-management/xy-to-line.htm</a>.</p>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">out</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">transect_lines</span><span class="p">(</span><span class="n">N</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">orig</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="go">                               dist=100, x_offset=10,</span>
<span class="go">                               y_offset=0, bearing=45, as_ndarray=True)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span>
<span class="go">array([[  0.  ,   0.  ,  70.71,  70.71],</span>
<span class="go">       [ 10.  ,   0.  ,  80.71,  70.71],</span>
<span class="go">       [ 20.  ,   0.  ,  90.71,  70.71],</span>
<span class="go">       [ 30.  ,   0.  , 100.71,  70.71],</span>
<span class="go">       [ 40.  ,   0.  , 110.71,  70.71]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">out</span>
<span class="go">array([( 0., 0.,  70.71, 70.71), (10., 0.,  80.71, 70.71),</span>
<span class="gp">... </span>   <span class="p">(</span><span class="mf">20.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span>  <span class="mf">90.71</span><span class="p">,</span> <span class="mf">70.71</span><span class="p">),</span> <span class="p">(</span><span class="mf">30.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">100.71</span><span class="p">,</span> <span class="mf">70.71</span><span class="p">),</span>
<span class="gp">... </span>   <span class="p">(</span><span class="mf">40.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">110.71</span><span class="p">,</span> <span class="mf">70.71</span><span class="p">)],</span>
<span class="gp">... </span>  <span class="n">dtype</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;X_from&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;f8&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Y_from&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;f8&#39;</span><span class="p">),</span>
<span class="gp">... </span>         <span class="p">(</span><span class="s1">&#39;X_to&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;f8&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Y_to&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;f8&#39;</span><span class="p">)])</span>
<span class="gp">...</span>
<span class="gp">... </span><span class="n">Create</span> <span class="n">the</span> <span class="n">table</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">lines</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tbl</span> <span class="o">=</span> <span class="s1">&#39;c:/folder/your.gdb/table_name&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># arcpy.da.NumPyArrayToTable(a, tbl)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># arcpy.XYToLine_management(</span>
<span class="gp">... </span>       <span class="n">in_table</span><span class="p">,</span> <span class="n">out_featureclass</span><span class="p">,</span>
<span class="gp">... </span>       <span class="n">startx_field</span><span class="p">,</span> <span class="n">starty_field</span><span class="p">,</span> <span class="n">endx_field</span><span class="p">,</span> <span class="n">endy_field</span><span class="p">,</span>
<span class="gp">... </span>       <span class="p">{</span><span class="n">line_type</span><span class="p">},</span> <span class="p">{</span><span class="n">id_field</span><span class="p">},</span> <span class="p">{</span><span class="n">spatial_reference</span><span class="p">}</span>
<span class="gp">... </span><span class="n">This</span> <span class="ow">is</span> <span class="n">general</span> <span class="n">syntax</span><span class="p">,</span> <span class="n">the</span> <span class="n">first</span> <span class="n">two</span> <span class="n">are</span> <span class="n">paths</span> <span class="n">of</span> <span class="n">source</span> <span class="ow">and</span> <span class="n">output</span>
<span class="gp">... </span><span class="n">files</span><span class="p">,</span> <span class="n">followed</span> <span class="n">by</span> <span class="n">coordinates</span> <span class="ow">and</span> <span class="n">options</span> <span class="n">parameters</span><span class="o">.</span>
<span class="gp">...</span>
<span class="gp">... </span><span class="n">To</span> <span class="n">create</span> <span class="n">compass</span> <span class="n">lines</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">361</span><span class="p">,</span> <span class="mf">22.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span><span class="n">transect_lines</span><span class="p">(</span><span class="n">N</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">orig</span><span class="o">=</span><span class="p">[</span><span class="mi">299000</span><span class="p">,</span> <span class="mi">4999000</span><span class="p">],</span>
<span class="go">                           dist=100, x_offset=0, y_offset=0,</span>
<span class="go">                           bearing=b, as_ndarray=True)</span>
</pre></div>
</div>
<p class="rubric">References</p>
<p><a class="reference external" href="https://community.esri.com/blogs/dan_patterson/2019/01/17/transect-lines-parallel-lines-offset-lines">https://community.esri.com/blogs/dan_patterson/2019/01/17/transect-lines-parallel-lines-offset-lines</a></p>
</dd></dl>

</div>
<hr class="docutils" />
</div>
<div class="section" id="format-arrays">
<h2>format arrays<a class="headerlink" href="#format-arrays" title="Permalink to this headline">¶</a></h2>
<p>Format arrays in a variety of ways.</p>
<span class="target" id="module-arraytools.frmts"></span><p>Script:   frmts.py</p>
<p>Author:   <a class="reference external" href="mailto:Dan_Patterson&#37;&#52;&#48;carleton&#46;ca">Dan_Patterson<span>&#64;</span>carleton<span>&#46;</span>ca</a></p>
<p>Modified: 2019-02-01</p>
<p class="rubric">References</p>
<p><cite>np.set_printoptions</cite> and <cite>np.printoptions</cite></p>
<p><a class="reference external" href="https://github.com/numpy/numpy/blob/master/numpy/core/arrayprint.py">https://github.com/numpy/numpy/blob/master/numpy/core/arrayprint.py</a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">set_printoptions</span><span class="p">(</span><span class="n">precision</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">edgeitems</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">80</span><span class="p">,</span>
<span class="go">                     suppress=True, nanstr=&#39;nan&#39;, infstr=&#39;inf&#39;,</span>
<span class="go">                     formatter=None, sign=None, floatmode=None, **kwarg)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">np</span><span class="o">.</span><span class="n">printoptions</span><span class="p">(</span><span class="n">precision</span><span class="o">=</span><span class="n">deci</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">ln_wdth</span><span class="p">):</span>
<span class="go">        print(a)  # the original options will be reset after printing</span>
</pre></div>
</div>
<p>Unicode:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Originals had a `u` in front of the single quotes
arrows
- &#39;⇐ ⇑ ⇒ ⇓&#39;: &quot;{} {} {} {}&quot;.format(&#39;\u21D0&#39;, &#39;\u21D1&#39;,
    &#39;\u21D2&#39;,  &#39;\u21D3&#39;)

box drawing
- &#39;╔═══╗&#39; : &#39;{}{}{}&#39;.format(&#39;\u2554&#39;, &#39;\u2550&#39;*3, &#39;\u2557&#39;)
- &#39;║ A ║&#39; : `{}{}{}&#39;.format(&#39;\u2551&#39;, &#39; A &#39;, &#39;\u2551&#39;)
- &#39;╚═══╝&#39; : &#39;{}{}{}&#39;.format(&#39;\u255A&#39;, &#39;\u2550&#39;*3, &#39;\u255D&#39;)
</pre></div>
</div>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/List_of_Unicode_characters#Arrows">https://en.wikipedia.org/wiki/List_of_Unicode_characters#Arrows</a>.
<a class="reference external" href="https://en.wikipedia.org/wiki/List_of_Unicode_characters#Box_Drawing">https://en.wikipedia.org/wiki/List_of_Unicode_characters#Box_Drawing</a>.</p>
<dl class="function">
<dt id="arraytools.frmts.col_hdr">
<code class="descclassname">arraytools.frmts.</code><code class="descname">col_hdr</code><span class="sig-paren">(</span><em>num=8</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/frmts.html#col_hdr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.frmts.col_hdr" title="Permalink to this definition">¶</a></dt>
<dd><p>Print numbers from 1 to 10*num to show column positions</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.frmts.xy_dist_headers">
<code class="descclassname">arraytools.frmts.</code><code class="descname">xy_dist_headers</code><span class="sig-paren">(</span><em>N</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/frmts.html#xy_dist_headers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.frmts.xy_dist_headers" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct headers for the optional table output</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.frmts.deline">
<code class="descclassname">arraytools.frmts.</code><code class="descname">deline</code><span class="sig-paren">(</span><em>a</em>, <em>width=100</em>, <em>header='Array...'</em>, <em>prefix='  .'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/frmts.html#deline"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.frmts.deline" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove extraneous lines from array output.
More useful for long arrays with ndim &gt;= 3</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>a</strong> (<em>anything</em>) – anything that can be put into array form</li>
<li><strong>header</strong> – an optional header</li>
<li><strong>prefix</strong> (<em>text</em>) – could be just spaces or something like shown</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools.frmts.in_by">
<code class="descclassname">arraytools.frmts.</code><code class="descname">in_by</code><span class="sig-paren">(</span><em>obj</em>, <em>hdr=''</em>, <em>line_nums=False</em>, <em>prefix='   .'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/frmts.html#in_by"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.frmts.in_by" title="Permalink to this definition">¶</a></dt>
<dd><p>A <cite>textwrap.indent</cite> variant for python 2.7 or a substitute for
any version of python.  The function stands for <cite>indent by</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>obj</strong> (<em>object that can be cast as string</em>) – obj to indent, List, tuple, ndarray converted to strings
first. You can use repr representation before using if needed.</li>
<li><strong>hdr</strong> (<em>text</em>) – optional header</li>
<li><strong>line_nums</strong> (<em>boolean</em>) – True to add line numbers</li>
<li><strong>prefix</strong> (<em>test</em>) – Text to use for indent ie ‘  ‘ for 2 spaces or ‘….’</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<p>[1] <a class="reference external" href="https://docs.python.org/3.7/library/textwrap.html">https://docs.python.org/3.7/library/textwrap.html</a> for python &gt; 3.3</p>
<p class="rubric">Notes</p>
<p>Header and line numbers options added.</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.frmts.redent">
<code class="descclassname">arraytools.frmts.</code><code class="descname">redent</code><span class="sig-paren">(</span><em>lines</em>, <em>spaces=4</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/frmts.html#redent"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.frmts.redent" title="Permalink to this definition">¶</a></dt>
<dd><p>Strip and reindent by num_spaces, a sequence of lines</p>
<dl class="docutils">
<dt><cite>lines</cite> <span class="classifier-delimiter">:</span> <span class="classifier">text</span></dt>
<dd>Text or what can be made text
Use str() or repr() on the inputs if you want control on form</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="arraytools.frmts.head_tail">
<code class="descclassname">arraytools.frmts.</code><code class="descname">head_tail</code><span class="sig-paren">(</span><em>size=10</em>, <em>head=3</em>, <em>tail=None</em>, <em>fill=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/frmts.html#head_tail"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.frmts.head_tail" title="Permalink to this definition">¶</a></dt>
<dd><p>Slice <cite>head</cite> and <cite>tail</cite> elements of a 1D array of a given <cite>size</cite>.
Optionally, insert a middle <cite>fill</cite> element.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">head_tail</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">tail</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="go">[0, 1, 2, 7, 8, 9]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">head_tail</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">tail</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s2">&quot;...&quot;</span><span class="p">)</span>
<span class="go">[0, 1, 2, &#39;...&#39;, 7, 8, 9]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools.frmts.prn_nd">
<code class="descclassname">arraytools.frmts.</code><code class="descname">prn_nd</code><span class="sig-paren">(</span><em>a</em>, <em>deci=2</em>, <em>width=100</em>, <em>prefix='  .'</em>, <em>prnt=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/frmts.html#prn_nd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.frmts.prn_nd" title="Permalink to this definition">¶</a></dt>
<dd><p>Format number arrays by row, and print</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>a</strong> (<em>array</em>) – An array of int or float dtypes, 1, 2, 3 and 4D arrays tested.</li>
<li><strong>- int</strong> (<em>deci</em>) – Decimal places for floating point numbers</li>
<li><strong>width</strong> (<em>int</em>) – Default width for onscreen and printing, output beyond this
length will be truncated with a warning.  Reshape to overcome.</li>
<li><strong>title</strong> (<em>string</em>) – The default title, change to provide more information.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Prints the array with the 1st dimension flattened-like by row</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<ul class="simple">
<li><cite>w_frmt</cite> :  width formatter</li>
<li><cite>m_frmt</cite> :  max number formatter to get max. number of characters</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="arraytools.frmts.prn_ma">
<code class="descclassname">arraytools.frmts.</code><code class="descname">prn_ma</code><span class="sig-paren">(</span><em>a</em>, <em>edge=5</em>, <em>deci=2</em>, <em>width=120</em>, <em>prefix='  .'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/frmts.html#prn_ma"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.frmts.prn_ma" title="Permalink to this definition">¶</a></dt>
<dd><p>Format a masked array to preserve columns widths and style.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>a</strong> (<em>masked array</em>) – A masked array</li>
<li><strong>prn</strong> (<em>Boolean</em>) – True to print</li>
<li><strong>prefix</strong> (<em>text</em>) – Can be “” for no indentation or ”   ” or the default</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><em>Returns a print version of a masked array formatted with masked</em></li>
<li><em>values and appropriate spacing.</em></li>
<li><em>b = a.reshape(2,4,5) for 3d</em></li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Get a string representation of the array.  Determine the maximum value
length of a string of the values in the array  and format each column
using that value.  Pad the result with a leader or replace the prefix
with ‘’</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.frmts.prn_rec">
<code class="descclassname">arraytools.frmts.</code><code class="descname">prn_rec</code><span class="sig-paren">(</span><em>a</em>, <em>rows_m=25</em>, <em>cols_m=None</em>, <em>deci=2</em>, <em>width=100</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/frmts.html#prn_rec"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.frmts.prn_rec" title="Permalink to this definition">¶</a></dt>
<dd><p>Format a structured array with a mixed dtype</p>
<p>Can be called as <cite>pd_(a, … )</cite> to emulate pandas dataframes
You should limit large arrays to a slice ie. a[:50]</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>a</strong> (<em>array</em>) – A structured/recarray</li>
<li><strong>edges</strong> (<em>integer</em>) – Rows to keep from the start and end if max_rows is exceeded.</li>
<li><strong>deci</strong> (<em>int</em>) – To facilitate printing, this value is the number of decimal
points to use for all floating point fields.</li>
<li><strong>max_rows</strong> (<em>integer</em>) – The number of rows to print before truncating to the <cite>edges</cite> option.
Change this to a larger value should you need to print whole arrays.</li>
<li><strong>subsample</strong> (<em>function</em>) – Requires this fucction for sampling an array that exceeds max_rows.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p><cite>_col_format</cite> does the actual work of obtaining a representation of
the column format.</p>
<p>It is not really possible to deconstruct the exact number of decimals
to use for float values, so a decision had to be made to simplify.</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.frmts.pd_">
<code class="descclassname">arraytools.frmts.</code><code class="descname">pd_</code><span class="sig-paren">(</span><em>a</em>, <em>deci=2</em>, <em>use_names=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/frmts.html#pd_"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.frmts.pd_" title="Permalink to this definition">¶</a></dt>
<dd><p>see help for <cite>prn_rec</cite>…</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.frmts.prn_struct">
<code class="descclassname">arraytools.frmts.</code><code class="descname">prn_struct</code><span class="sig-paren">(</span><em>a</em>, <em>rows_m=25</em>, <em>cols_m=None</em>, <em>deci=2</em>, <em>width=100</em>, <em>prnt=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/frmts.html#prn_struct"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.frmts.prn_struct" title="Permalink to this definition">¶</a></dt>
<dd><p>Format a structured or recarray array.  See prn_rec for more details.
This variant adds row and column slicing with the <cite>width</cite> and
<cite>max_lines</cite> parameters.  Requires <cite>subsample</cite> and <cite>_col_format</cite>.</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.frmts.make_row_format">
<code class="descclassname">arraytools.frmts.</code><code class="descname">make_row_format</code><span class="sig-paren">(</span><em>dim=3</em>, <em>cols=5</em>, <em>a_kind='f'</em>, <em>deci=1</em>, <em>a_max=10</em>, <em>a_min=-10</em>, <em>width=100</em>, <em>prnt=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/frmts.html#make_row_format"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.frmts.make_row_format" title="Permalink to this definition">¶</a></dt>
<dd><p>Format the row based on input parameters</p>
<dl class="docutils">
<dt><cite>dim</cite> - int</dt>
<dd>Number of dimensions</dd>
<dt><cite>cols</cite> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd>Columns per dimension</dd>
</dl>
<p><cite>a_kind</cite>, <cite>deci</cite>, <cite>a_max</cite> and <cite>a_min</cite> allow you to specify a data type,
number of decimals and maximum and minimum values to test formatting.</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.frmts.prn_">
<code class="descclassname">arraytools.frmts.</code><code class="descname">prn_</code><span class="sig-paren">(</span><em>a</em>, <em>deci=2</em>, <em>width=120</em>, <em>prefix='. . '</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/frmts.html#prn_"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.frmts.prn_" title="Permalink to this definition">¶</a></dt>
<dd><p>Alternate format to prn_nd function.
Inputs are largely the same.</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.frmts.prn">
<code class="descclassname">arraytools.frmts.</code><code class="descname">prn</code><span class="sig-paren">(</span><em>a</em>, <em>rows=20</em>, <em>cols=3</em>, <em>deci=2</em>, <em>width=120</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/frmts.html#prn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.frmts.prn" title="Permalink to this definition">¶</a></dt>
<dd><p>Calling function for all the array print options.  Supports structured
and ndarrays.  For multidimensional ndarrays, the first 3 dimensions are
presented in a horizontal layout (see below).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>rows</strong> (<em>integer</em>) – Limits the reported number of rows for large arrays</li>
<li><strong>cols</strong> (<em>integer</em>) – Equivalent to <cite>edgeitems</cite> in np.setprintoptions used to split and keep
array corners for large arranys.</li>
<li><strong>deci</strong> (<em>integer</em>) – Reported number of decimal places for float values, it applies to all
columns of that type.</li>
<li><strong>width</strong> (<em>integer</em>) – Maximum character limit before clipping occurs at the right edge.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>This script calls other scripts depending on the input array dtype.  See
the list below.</p>
<p>The &#64;pr decorator can be commented out from the source code if you prefer
not to have the ancillary array shape information at the top of the output.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Array info...
shape... (2, 3, 4, 5)  ndim... 4  dtype... int32
╔════3
║ ╔═5
2 4

 =&gt; (0, 3, 4, 5)
 ..   0   1   2   3   4    20  21  22  23  24    40  41  42  43  44
 ..   5   6   7   8   9    25  26  27  28  29    45  46  47  48  49
 ..  10  11  12  13  14    30  31  32  33  34    50  51  52  53  54
 ..  15  16  17  18  19    35  36  37  38  39    55  56  57  58  59
 =&gt; (1, 3, 4, 5)
 ..  60  61  62  63  64    80  81  82  83  84   100 101 102 103 104
 ..  65  66  67  68  69    85  86  87  88  89   105 106 107 108 109
 ..  70  71  72  73  74    90  91  92  93  94   110 111 112 113 114
 ..  75  76  77  78  79    95  96  97  98  99   115 116 117 118 119
Array shape (2, 3, 4, 5)
</pre></div>
</div>
<p class="rubric">References</p>
<p><a class="reference external" href="https://github.com/numpy/numpy/blob/f85c71a6d16ab64695f07fde23e2c19104d36208/numpy/core/numerictypes.py">https://github.com/numpy/numpy/blob/f85c71a6d16ab64695f07fde23e2c19104d36208/numpy/core/numerictypes.py</a>.</p>
<p>Sample useage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">prn_nd</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">deci</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Array&quot;</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;  .&quot;</span><span class="p">,</span> <span class="n">prnt</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">prn_</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">deci</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Array&quot;</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;. . &quot;</span><span class="p">,</span> <span class="n">prnt</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">prn_ma</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">deci</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">prnt</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;  .&quot;</span><span class="p">)</span>
<span class="n">prn_struct</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">rows_m</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">cols_m</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">deci</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">prnt</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">prn_rec</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">rows_m</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">cols_m</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">deci</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">prnt</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">prn_3d4d</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">deci</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">edgeitems</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">prnt</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
</div>
<div class="section" id="geometry-functions">
<h2>geometry functions<a class="headerlink" href="#geometry-functions" title="Permalink to this headline">¶</a></h2>
<p>Functions dealing with geometry.</p>
<span class="target" id="module-arraytools.geom"></span><div class="section" id="geom">
<h3>geom<a class="headerlink" href="#geom" title="Permalink to this headline">¶</a></h3>
<p>Script :   geom.py</p>
<p>Author :   <a class="reference external" href="mailto:Dan_Patterson&#37;&#52;&#48;carleton&#46;ca">Dan_Patterson<span>&#64;</span>carleton<span>&#46;</span>ca</a></p>
<p>Modified : 2019-01-01</p>
<p>Purpose :  tools for working with numpy arrays and geometry</p>
<p class="rubric">Notes</p>
<p>Do not rely on the OBJECTID field for anything
<a class="reference external" href="http://support.esri.com/en/technical-article/000010834">http://support.esri.com/en/technical-article/000010834</a></p>
<p>When working with large coordinates, you should check to see whether a
translation about the origin (array - centre) produces different results.
This has been noted when calculating area using projected coordinates for the
Ontario.npy file.  The difference isn’t huge, but subtracting the centre or
minimum from the coordinates produces area values which are equal but differ
slightly from those using the unaltered coordinates.</p>
<p>Included in this module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;__all__&#39;</span><span class="p">,</span> <span class="s1">&#39;__builtins__&#39;</span><span class="p">,</span> <span class="s1">&#39;__cached__&#39;</span><span class="p">,</span> <span class="s1">&#39;__doc__&#39;</span><span class="p">,</span> <span class="s1">&#39;__file__&#39;</span><span class="p">,</span>
<span class="s1">&#39;__loader__&#39;</span><span class="p">,</span> <span class="s1">&#39;__name__&#39;</span><span class="p">,</span> <span class="s1">&#39;__package__&#39;</span><span class="p">,</span> <span class="s1">&#39;__spec__&#39;</span><span class="p">,</span> <span class="s1">&#39;_arrs_&#39;</span><span class="p">,</span> <span class="s1">&#39;_convert&#39;</span><span class="p">,</span>
<span class="s1">&#39;_demo&#39;</span><span class="p">,</span> <span class="s1">&#39;_densify_2D&#39;</span><span class="p">,</span> <span class="s1">&#39;_flat_&#39;</span><span class="p">,</span> <span class="s1">&#39;_new_view_&#39;</span><span class="p">,</span> <span class="s1">&#39;_reshape_&#39;</span><span class="p">,</span> <span class="s1">&#39;_test&#39;</span><span class="p">,</span>
<span class="s1">&#39;_unpack&#39;</span><span class="p">,</span> <span class="s1">&#39;_view_&#39;</span><span class="p">,</span> <span class="s1">&#39;adjacency_edge&#39;</span><span class="p">,</span> <span class="s1">&#39;angle_2pnts&#39;</span><span class="p">,</span> <span class="s1">&#39;angle_between&#39;</span><span class="p">,</span>
<span class="s1">&#39;angle_np&#39;</span><span class="p">,</span> <span class="s1">&#39;angle_seq&#39;</span><span class="p">,</span> <span class="s1">&#39;angles_poly&#39;</span><span class="p">,</span> <span class="s1">&#39;areas&#39;</span><span class="p">,</span> <span class="s1">&#39;as_strided&#39;</span><span class="p">,</span> <span class="s1">&#39;azim_np&#39;</span><span class="p">,</span>
<span class="s1">&#39;center_&#39;</span><span class="p">,</span> <span class="s1">&#39;centers&#39;</span><span class="p">,</span> <span class="s1">&#39;centroid_&#39;</span><span class="p">,</span> <span class="s1">&#39;centroids&#39;</span><span class="p">,</span> <span class="s1">&#39;convex&#39;</span><span class="p">,</span>
<span class="s1">&#39;cross&#39;</span><span class="p">,</span> <span class="s1">&#39;dedent&#39;</span><span class="p">,</span> <span class="s1">&#39;densify&#39;</span><span class="p">,</span> <span class="s1">&#39;dist_bearing&#39;</span><span class="p">,</span> <span class="s1">&#39;dx_dy_np&#39;</span><span class="p">,</span> <span class="s1">&#39;e_2d&#39;</span><span class="p">,</span>
<span class="s1">&#39;e_area&#39;</span><span class="p">,</span> <span class="s1">&#39;e_dist&#39;</span><span class="p">,</span> <span class="s1">&#39;e_leng&#39;</span><span class="p">,</span> <span class="s1">&#39;extent_&#39;</span><span class="p">,</span> <span class="s1">&#39;fill_diagonal&#39;</span><span class="p">,</span> <span class="s1">&#39;ft&#39;</span><span class="p">,</span>
<span class="s1">&#39;intersect_pnt&#39;</span><span class="p">,</span> <span class="s1">&#39;knn&#39;</span><span class="p">,</span> <span class="s1">&#39;lengths&#39;</span><span class="p">,</span> <span class="s1">&#39;line_dir&#39;</span><span class="p">,</span> <span class="s1">&#39;max_&#39;</span><span class="p">,</span>
<span class="s1">&#39;min_&#39;</span><span class="p">,</span> <span class="s1">&#39;nn_kdtree&#39;</span><span class="p">,</span> <span class="s1">&#39;np&#39;</span><span class="p">,</span> <span class="s1">&#39;p_o_p&#39;</span><span class="p">,</span> <span class="s1">&#39;pnt_&#39;</span><span class="p">,</span> <span class="s1">&#39;pnt_in_list&#39;</span><span class="p">,</span> <span class="s1">&#39;pnt_on_poly&#39;</span><span class="p">,</span>
<span class="s1">&#39;pnt_on_seg&#39;</span><span class="p">,</span> <span class="s1">&#39;point_in_polygon&#39;</span><span class="p">,</span> <span class="s1">&#39;radial_sort&#39;</span><span class="p">,</span>
<span class="s1">&#39;remove_self&#39;</span><span class="p">,</span> <span class="s1">&#39;rotate&#39;</span><span class="p">,</span> <span class="s1">&#39;seg_lengths&#39;</span><span class="p">,</span> <span class="s1">&#39;segment&#39;</span><span class="p">,</span> <span class="s1">&#39;simplify&#39;</span><span class="p">,</span> <span class="s1">&#39;stride&#39;</span><span class="p">,</span>
<span class="s1">&#39;total_length&#39;</span><span class="p">,</span> <span class="s1">&#39;trans_rot&#39;</span>
</pre></div>
</div>
<p class="rubric">References</p>
<p>See ein_geom.py for full details and examples</p>
<p><a class="reference external" href="https://www.redblobgames.com/grids/hexagons/">https://www.redblobgames.com/grids/hexagons/</a></p>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Centroid#Centroid_of_polygon">https://en.wikipedia.org/wiki/Centroid#Centroid_of_polygon</a></p>
<p><a class="reference external" href="https://iliauk.com/2016/03/02/centroids-and-centres-numpy-r/">https://iliauk.com/2016/03/02/centroids-and-centres-numpy-r/</a></p>
<p><em>includes KDTree as well</em></p>
<p><a class="reference external" href="https://stackoverflow.com/questions/50751135/iterating-operation-with-two-arrays-using-numpy">https://stackoverflow.com/questions/50751135/iterating-operation-with-two-arrays-using-numpy</a></p>
<p><a class="reference external" href="https://stackoverflow.com/questions/21483999/using-atan2-to-find-angle-between-two-vectors">https://stackoverflow.com/questions/21483999/using-atan2-to-find-angle-between-two-vectors</a></p>
<p>point in/on segment</p>
<p><a class="reference external" href="https://stackoverflow.com/questions/328107/how-can-you-determine-a-point-is-between-two-other-points-on-a-line-segment">https://stackoverflow.com/questions/328107/how-can-you-determine-a-point-is-between-two-other-points-on-a-line-segment</a>.</p>
<p>benchmarking KDTree</p>
<p><a class="reference external" href="https://www.ibm.com/developerworks/community/blogs/jfp/entry/Python_Is_Not_C_Take_Two?lang=en">https://www.ibm.com/developerworks/community/blogs/jfp/entry/Python_Is_Not_C_Take_Two?lang=en</a>.</p>
<p><a class="reference external" href="https://iliauk.wordpress.com/2016/02/16/millions-of-distances-high-performance-python/">https://iliauk.wordpress.com/2016/02/16/millions-of-distances-high-performance-python/</a>.</p>
<p><strong>cKDTree examples</strong></p>
<p>query_ball_point:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mgrid</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="n">pnts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">c_</span><span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">ravel</span><span class="p">(),</span> <span class="n">y</span><span class="o">.</span><span class="n">ravel</span><span class="p">()]</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">cKDTree</span><span class="p">(</span><span class="n">pnts</span><span class="p">)</span>
<span class="n">idx</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">query_ball_point</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1"># find points within x,y = (1,0)</span>
<span class="n">pnts</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
<span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="o">...</span>    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="o">...</span>    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="o">...</span>    <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>
</pre></div>
</div>
<hr class="docutils" />
<dl class="function">
<dt id="arraytools.geom.poly2segments">
<code class="descclassname">arraytools.geom.</code><code class="descname">poly2segments</code><span class="sig-paren">(</span><em>a</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#poly2segments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.poly2segments" title="Permalink to this definition">¶</a></dt>
<dd><p>Segment poly* structures into o-d pairs from start to finish</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>a</strong> (<em>array</em>) – A 2D array of x,y coordinates representing polyline or polygons.</li>
<li><strong>fr_to</strong> (<em>array</em>) – Returns a 3D array of point pairs.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.stride">
<code class="descclassname">arraytools.geom.</code><code class="descname">stride</code><span class="sig-paren">(</span><em>a</em>, <em>win=(3</em>, <em>3)</em>, <em>stepby=(1</em>, <em>1)</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#stride"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.stride" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide a 2D sliding/moving view of an array.
There is no edge correction for outputs. Use the <cite>_pad_</cite> function first.</p>
<p class="rubric">Notes</p>
<p>Origin arraytools.tools  stride, see it for more information</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.min_">
<code class="descclassname">arraytools.geom.</code><code class="descname">min_</code><span class="sig-paren">(</span><em>a</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#min_"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.min_" title="Permalink to this definition">¶</a></dt>
<dd><p>Array minimums</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.max_">
<code class="descclassname">arraytools.geom.</code><code class="descname">max_</code><span class="sig-paren">(</span><em>a</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#max_"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.max_" title="Permalink to this definition">¶</a></dt>
<dd><p>Array maximums</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.extent_">
<code class="descclassname">arraytools.geom.</code><code class="descname">extent_</code><span class="sig-paren">(</span><em>a</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#extent_"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.extent_" title="Permalink to this definition">¶</a></dt>
<dd><p>Array extent values</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.center_">
<code class="descclassname">arraytools.geom.</code><code class="descname">center_</code><span class="sig-paren">(</span><em>a</em>, <em>remove_dup=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#center_"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.center_" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the center of an array. If the array represents a polygon, then
a check is made for the duplicate first and last point to remove one.</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.centroid_">
<code class="descclassname">arraytools.geom.</code><code class="descname">centroid_</code><span class="sig-paren">(</span><em>a</em>, <em>a_6=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#centroid_"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.centroid_" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the centroid of a closed polygon.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>a</strong> (<em>array</em>) – A 2D or more of point coordinates.  You need to keep the duplicate
first and last point.</li>
<li><strong>a_6</strong> (<em>number</em>) – If area has been precalculated, you can use its value.</li>
<li><strong>e_area</strong> (<em>function</em><em> (</em><em>required</em><em>)</em>) – Contained in this module.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.centers">
<code class="descclassname">arraytools.geom.</code><code class="descname">centers</code><span class="sig-paren">(</span><em>a</em>, <em>remove_dup=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#centers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.centers" title="Permalink to this definition">¶</a></dt>
<dd><p>batch centres (ie _center)</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.centroids">
<code class="descclassname">arraytools.geom.</code><code class="descname">centroids</code><span class="sig-paren">(</span><em>a</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#centroids"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.centroids" title="Permalink to this definition">¶</a></dt>
<dd><p>batch centroids (ie _centroid)</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.intersect_pnt">
<code class="descclassname">arraytools.geom.</code><code class="descname">intersect_pnt</code><span class="sig-paren">(</span><em>a</em>, <em>b=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#intersect_pnt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.intersect_pnt" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the point of intersection of the vectors passing through two
point pairs (p0, p1) and (p2, p3).  This is not segment-segment
intersection.  An extrapolation will be returned if the segments do not
cross and the point of intersection will be returned where they <strong>would</strong>
intersect.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>a</strong> (<em>array-like</em>) – 1 segment  [p0, p1]
2 segments [p0, p1], [p2, p3] or
1 array-like np.array([p0, p1, p2, p3])</li>
<li><strong>b</strong> (<em>None</em><em> or </em><em>array-like</em>) – 1 segment [p2, p3]  if <cite>a</cite> is [p0, p1], or <code class="docutils literal notranslate"><span class="pre">None</span></code></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span> <span class="mi">0</span><span class="p">,</span>  <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="p">[</span> <span class="mi">0</span><span class="p">,</span>  <span class="mi">5</span><span class="p">],</span> <span class="p">[</span> <span class="mi">5</span><span class="p">,</span>  <span class="mi">0</span><span class="p">]])</span>
<span class="go"> s: array([[ 0,  0],    h: array([[  0.,   0.,   1.],</span>
<span class="go">           [10, 10],              [ 10.,  10.,   1.],</span>
<span class="go">           [ 0,  5],              [  0.,   5.,   1.],</span>
<span class="go">           [ 5,  0]])             [  5.,   0.,   1.]])</span>
</pre></div>
</div>
<p class="rubric">References</p>
<p><a class="reference external" href="https://stackoverflow.com/questions/3252194/numpy-and-line-intersections">https://stackoverflow.com/questions/3252194/numpy-and-line-intersections</a>.</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.intersects">
<code class="descclassname">arraytools.geom.</code><code class="descname">intersects</code><span class="sig-paren">(</span><em>*args</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#intersects"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.intersects" title="Permalink to this definition">¶</a></dt>
<dd><p>Line intersection check.  Two lines or 4 points that form the lines.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>intersects</strong><strong>(</strong><strong>line0</strong><strong>, </strong><strong>line1</strong><strong>)</strong> (<em>-</em>) – </li>
<li><strong>intersects</strong><strong>(</strong><strong>p0</strong><strong>, </strong><strong>p1</strong><strong>, </strong><strong>p2</strong><strong>, </strong><strong>p3</strong><strong>)</strong> (<em>-</em>) – <ul>
<li>p0, p1 -&gt; line 0</li>
<li>p2, p3 -&gt; line 1</li>
</ul>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><em>boolean, if the segments do intersect</em></li>
<li><em>&gt;&gt;&gt; a = np.array([[0, 0], [10, 10]])</em></li>
<li><em>&gt;&gt;&gt; b = np.array([[0, 10], [10, 0]])</em></li>
<li><em>&gt;&gt;&gt; intersects(*args)  # True</em></li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">90</span><span class="p">],</span> <span class="p">[</span><span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">],</span> <span class="p">[</span><span class="mi">60</span><span class="p">,</span> <span class="mi">60</span><span class="p">],</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>
<span class="n">segs</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">]])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="p">))]</span>
<span class="n">ln</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">50</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">],</span> <span class="p">[</span><span class="mi">50</span><span class="p">,</span> <span class="mi">100</span><span class="p">]])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;line </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ln</span><span class="o">.</span><span class="n">ravel</span><span class="p">()))</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">segs</span><span class="p">):</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">intersects</span><span class="p">(</span><span class="n">ln</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">..</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">j</span><span class="o">.</span><span class="n">ravel</span><span class="p">(),</span> <span class="n">r</span><span class="p">))</span>
<span class="o">...</span>
<span class="n">line</span> <span class="p">[</span> <span class="mi">50</span> <span class="o">-</span><span class="mi">10</span>  <span class="mi">50</span> <span class="mi">100</span><span class="p">]</span>
<span class="p">[</span> <span class="mi">0</span>  <span class="mi">0</span>  <span class="mi">0</span> <span class="mi">90</span><span class="p">]</span><span class="o">..</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;collinear&#39;</span><span class="p">)</span>
<span class="p">[</span> <span class="mi">0</span> <span class="mi">90</span> <span class="mi">90</span> <span class="mi">90</span><span class="p">]</span><span class="o">..</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="p">(</span><span class="mf">50.0</span><span class="p">,</span> <span class="mf">90.0</span><span class="p">))</span>
<span class="p">[</span><span class="mi">90</span> <span class="mi">90</span> <span class="mi">60</span> <span class="mi">60</span><span class="p">]</span><span class="o">..</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;denom check&#39;</span><span class="p">)</span>
<span class="p">[</span><span class="mi">60</span> <span class="mi">60</span> <span class="mi">20</span> <span class="mi">20</span><span class="p">]</span><span class="o">..</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="p">(</span><span class="mf">50.0</span><span class="p">,</span> <span class="mi">50</span><span class="p">))</span>
<span class="p">[</span><span class="mi">20</span> <span class="mi">20</span>  <span class="mi">0</span>  <span class="mi">0</span><span class="p">]</span><span class="o">..</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;cross(p1-p0, p0-p2)&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">References</p>
<p><a class="reference external" href="https://stackoverflow.com/questions/563198/how-do-you-detect-where-two-line-segments-intersect#565282">https://stackoverflow.com/questions/563198/how-do-you-detect-where-two-line-segments-intersect#565282</a>.</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.e_area">
<code class="descclassname">arraytools.geom.</code><code class="descname">e_area</code><span class="sig-paren">(</span><em>a</em>, <em>b=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#e_area"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.e_area" title="Permalink to this definition">¶</a></dt>
<dd><p>Area calculation, using einsum.</p>
<p>Some may consider this overkill, but consider a huge list of polygons,
many multipart, many with holes and even multiple version therein.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>preprocessing</strong> – use <cite>_view_</cite>, <cite>_new_view_</cite> or <cite>_reshape_</cite> with structured/recarrays</li>
<li><strong>a</strong> (<em>array</em>) – Either a 2D+ array of coordinates or arrays of x, y values</li>
<li><strong>b</strong> (<em>array</em><em>, </em><em>optional</em>) – If a &lt; 2D, then the y values need to be supplied</li>
<li><strong>rings are ordered clockwise</strong><strong>, </strong><strong>inner holes are counter-clockwise</strong> (<em>Outer</em>) – </li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>See ein_geom.py for examples</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.e_dist">
<code class="descclassname">arraytools.geom.</code><code class="descname">e_dist</code><span class="sig-paren">(</span><em>a</em>, <em>b</em>, <em>metric='euclidean'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#e_dist"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.e_dist" title="Permalink to this definition">¶</a></dt>
<dd><p>Distance calculation for 1D, 2D and 3D points using einsum</p>
<dl class="docutils">
<dt>preprocessing :</dt>
<dd>use <cite>_view_</cite>, <cite>_new_view_</cite> or <cite>_reshape_</cite> with structured/recarrays</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>b</strong> (<em>a</em><em>,</em>) – Inputs, list, tuple, array in 1, 2 or 3D form</li>
<li><strong>metric</strong> (<em>string</em>) – euclidean (‘e’, ‘eu’…), sqeuclidean (‘s’, ‘sq’…),</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>mini e_dist for 2d points array and a single point</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">e_2d</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
<span class="go">        diff = a - p[np.newaxis, :]  # a and p are ndarrays</span>
<span class="go">        return np.sqrt(np.einsum(&#39;ij,ij-&gt;i&#39;, diff, diff))</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="#arraytools.geom.cartesian_dist" title="arraytools.geom.cartesian_dist"><code class="xref py py-func docutils literal notranslate"><span class="pre">cartesian_dist()</span></code></a></dt>
<dd>function Produces pairs of x,y coordinates and the distance, without duplicates.</dd>
</dl>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.e_leng">
<code class="descclassname">arraytools.geom.</code><code class="descname">e_leng</code><span class="sig-paren">(</span><em>a</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#e_leng"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.e_leng" title="Permalink to this definition">¶</a></dt>
<dd><p>Length/distance between points in an array using einsum</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>preprocessing</strong> – use <cite>_view_</cite>, <cite>_new_view_</cite> or <cite>_reshape_</cite> with structured/recarrays</li>
<li><strong>a</strong> (<em>array-like</em>) – A list/array coordinate pairs, with ndim = 3 and the minimum
shape = (1,2,2), eg. (1,4,2) for a single line of 4 pairs</li>
<li><strong>minimum input needed is a pair</strong><strong>, </strong><strong>a sequence of pairs can be used.</strong> (<em>The</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><p class="first"><strong>length</strong> (<em>float</em>) – The total length/distance formed by the points</p>
</li>
<li><p class="first"><strong>d_leng</strong> (<em>float</em>) – The distances between points forming the array</p>
<p>(40.0, [array([[ 10.,  10.,  10.,  10.]])])</p>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">diff</span> <span class="o">=</span> <span class="n">g</span><span class="p">[:,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">g</span><span class="p">[:,</span> <span class="p">:,</span> <span class="mi">1</span><span class="p">:]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># for 4D</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">einsum</span><span class="p">(</span><span class="s1">&#39;ijk..., ijk...-&gt;ijk...&#39;</span><span class="p">,</span> <span class="n">diff</span><span class="p">,</span> <span class="n">diff</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>  <span class="c1"># or</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span>  <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">einsum</span><span class="p">(</span><span class="s1">&#39;ijkl, ijkl-&gt;ijk&#39;</span><span class="p">,</span> <span class="n">diff</span><span class="p">,</span> <span class="n">diff</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.e_2d">
<code class="descclassname">arraytools.geom.</code><code class="descname">e_2d</code><span class="sig-paren">(</span><em>p</em>, <em>a</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#e_2d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.e_2d" title="Permalink to this definition">¶</a></dt>
<dd><p>array points to point distance… mini e_dist</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.cartesian_dist">
<code class="descclassname">arraytools.geom.</code><code class="descname">cartesian_dist</code><span class="sig-paren">(</span><em>a</em>, <em>b</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#cartesian_dist"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.cartesian_dist" title="Permalink to this definition">¶</a></dt>
<dd><p>Form the cartesian product of two 2D arrays.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>b</strong> (<em>a</em><em>,</em>) – 2D array of x,y values</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>The <cite>cartesian</cite> function defined within.  The arrays are passed to it to
format the data structure to from-to x,y coordinate pairs.</p>
<p>The cartesian_dist function is about 2X slower than e_dist from
arraytools.geom.  It depends on whether you need the x,y coordinate pairs
and the distance or just one of the two forms of the distance matrix.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">,</span> <span class="n">b</span>
<span class="go">array([[0., 0.],   array([[3., 3.],</span>
<span class="go">       [1., 1.],          [4., 4.]])</span>
<span class="go">       [2., 2.]])</span>
<span class="go">cartesian_dist(a,b)</span>
<span class="go">array([[0.  , 0.  , 3.  , 3.  , 4.24],</span>
<span class="go">       [0.  , 0.  , 4.  , 4.  , 5.66],</span>
<span class="go">       [1.  , 1.  , 3.  , 3.  , 2.83],</span>
<span class="go">       [1.  , 1.  , 4.  , 4.  , 4.24],</span>
<span class="go">       [2.  , 2.  , 3.  , 3.  , 1.41],</span>
<span class="go">       [2.  , 2.  , 4.  , 4.  , 2.83]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">e_dist</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="go">array([[4.24, 5.66],   # a0-&gt;b0, a0-&gt;b1</span>
<span class="go">       [2.83, 4.24],   # a1-&gt;b0, a1-&gt;b1</span>
<span class="go">       [1.41, 2.83]])  # a2-&gt;b0, a2-&gt;b1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>  <span class="c1"># array([4.24, 5.66, 2.83, 4.24, 1.41, 2.83])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.areas">
<code class="descclassname">arraytools.geom.</code><code class="descname">areas</code><span class="sig-paren">(</span><em>a</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#areas"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.areas" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls e_area to calculate areas for many types of nested objects.</p>
<p>This would include object arrays, list of lists and similar constructs.
Each part is considered separately.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">A list with one or more areas.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.lengths">
<code class="descclassname">arraytools.geom.</code><code class="descname">lengths</code><span class="sig-paren">(</span><em>a</em>, <em>prn=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#lengths"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.lengths" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls <cite>e_leng</cite> to calculate lengths for many types of nested objects.
This would include object arrays, list of lists and similar constructs.
Each part is considered separately.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">A list with one or more lengths. <cite>prn=True</cite> for optional printing.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.total_length">
<code class="descclassname">arraytools.geom.</code><code class="descname">total_length</code><span class="sig-paren">(</span><em>a</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#total_length"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.total_length" title="Permalink to this definition">¶</a></dt>
<dd><p>Just return total length from ‘length’ above</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">List of array(s) containing the total length for each object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.seg_lengths">
<code class="descclassname">arraytools.geom.</code><code class="descname">seg_lengths</code><span class="sig-paren">(</span><em>a</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#seg_lengths"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.seg_lengths" title="Permalink to this definition">¶</a></dt>
<dd><p>Just return segment lengths from ‘length above.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">List of array(s) containing the segment lengths for each object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.radial_sort">
<code class="descclassname">arraytools.geom.</code><code class="descname">radial_sort</code><span class="sig-paren">(</span><em>pnts</em>, <em>cent=None</em>, <em>distance=True</em>, <em>as_azimuth=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#radial_sort"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.radial_sort" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort about the point cloud center or from a given point</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pnts</strong> (<em>points</em>) – An array of points (x,y) as array or list</li>
<li><strong>cent</strong> (<em>array-like</em>) – <ul>
<li>A list, tuple, array of the center’s x,y coordinates.</li>
<li>None, the center’s coordinate is calculated from the values with
duplicates removed</li>
</ul>
</li>
<li><strong>cent =</strong><strong> [</strong><strong>0</strong><strong>, </strong><strong>0</strong><strong>] or </strong><strong>np.array</strong><strong>(</strong><strong>[</strong><strong>0</strong><strong>, </strong><strong>0</strong><strong>]</strong><strong>)</strong> (<em>&gt;&gt;&gt;</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><em>- The angles in the range -180, 180 x-axis oriented</em></li>
<li><em>- The pnts are NOT returned sorted, you will have to use the sort_order to</em> – complete the sorting.</li>
<li><em>&gt;&gt;&gt; pnts_sorted = pnts[sort_order]</em></li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.dist_bearing_sort">
<code class="descclassname">arraytools.geom.</code><code class="descname">dist_bearing_sort</code><span class="sig-paren">(</span><em>pnts</em>, <em>cent=None</em>, <em>as_struct=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#dist_bearing_sort"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.dist_bearing_sort" title="Permalink to this definition">¶</a></dt>
<dd><p>Sorts points based on a radial sort of a point set (X, Y) relative to
the center of the points.  The sort is done using the bearing, then the
distance of a point to the center.</p>
<p><strong>* Note done *</strong> move to arraytools.wars when complete</p>
<p>xy = a0[0][[‘X’, ‘Y’]]
pnts = _view_(xy) or….
s = dist_bearing_sort(a0[0][[‘X’, ‘Y’]])
s.shape # (69688, 2)
11.4 ms ± 272 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.dx_dy_np">
<code class="descclassname">arraytools.geom.</code><code class="descname">dx_dy_np</code><span class="sig-paren">(</span><em>a</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#dx_dy_np"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.dx_dy_np" title="Permalink to this definition">¶</a></dt>
<dd><p>Sequential difference in the x/y pairs from a table/array</p>
<dl class="docutils">
<dt>a <span class="classifier-delimiter">:</span> <span class="classifier">ndarray or structured array.</span></dt>
<dd>It is changed as necessary to a 2D array of x/y values.</dd>
<dt>_new_view_ <span class="classifier-delimiter">:</span> <span class="classifier">function</span></dt>
<dd>Does the array conversion to 2D from structured if necessary</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.angle_between">
<code class="descclassname">arraytools.geom.</code><code class="descname">angle_between</code><span class="sig-paren">(</span><em>p0</em>, <em>p1</em>, <em>p2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#angle_between"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.angle_between" title="Permalink to this definition">¶</a></dt>
<dd><p>angle between 3 sequential points</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">p0</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>
<span class="go">angle_between(p0, p1, p2)</span>
<span class="go">(45.0, -135.0, -90.0)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.angle_np">
<code class="descclassname">arraytools.geom.</code><code class="descname">angle_np</code><span class="sig-paren">(</span><em>a</em>, <em>as_degrees=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#angle_np"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.angle_np" title="Permalink to this definition">¶</a></dt>
<dd><p>Angle between successive points.</p>
<p>Requires, <cite>dx_dy_np</cite> and hence, <cite>_new_view_</cite></p>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.azim_np">
<code class="descclassname">arraytools.geom.</code><code class="descname">azim_np</code><span class="sig-paren">(</span><em>a</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#azim_np"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.azim_np" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the azimuth/bearing relative to North</p>
<p>Requires, <cite>angle_np</cite>, which calls <cite>dx_dy_np</cite> which calls <cite>_new_view_</cite></p>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.angle_2pnts">
<code class="descclassname">arraytools.geom.</code><code class="descname">angle_2pnts</code><span class="sig-paren">(</span><em>p0</em>, <em>p1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#angle_2pnts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.angle_2pnts" title="Permalink to this definition">¶</a></dt>
<dd><p>Two point angle. p0 represents the <cite>from</cite> point and p1 the <cite>to</cite> point.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">angle</span> <span class="o">=</span> <span class="n">atan2</span><span class="p">(</span><span class="n">vector2</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">vector2</span><span class="o">.</span><span class="n">x</span><span class="p">)</span> <span class="o">-</span> <span class="n">atan2</span><span class="p">(</span><span class="n">vector1</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">vector1</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
<p>Accepted answer from the poly_angles link</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.angle_seq">
<code class="descclassname">arraytools.geom.</code><code class="descname">angle_seq</code><span class="sig-paren">(</span><em>a</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#angle_seq"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.angle_seq" title="Permalink to this definition">¶</a></dt>
<dd><p>Sequential angles for a points list</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">angle</span> <span class="o">=</span> <span class="n">atan2</span><span class="p">(</span><span class="n">vector2</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">vector2</span><span class="o">.</span><span class="n">x</span><span class="p">)</span> <span class="o">-</span> <span class="n">atan2</span><span class="p">(</span><span class="n">vector1</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">vector1</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
<span class="go">Accepted answer from the poly_angles link</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.angles_poly">
<code class="descclassname">arraytools.geom.</code><code class="descname">angles_poly</code><span class="sig-paren">(</span><em>a=None</em>, <em>inside=True</em>, <em>in_deg=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#angles_poly"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.angles_poly" title="Permalink to this definition">¶</a></dt>
<dd><p>Sequential 3 point angles from a poly* shape</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>a</strong> (<em>array</em>) – an array of points, derived from a polygon/polyline geometry</li>
<li><strong>inside</strong> (<em>boolean</em>) – determine inside angles, outside if False</li>
<li><strong>in_deg</strong> (<em>bolean</em>) – convert to degrees from radians</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>General comments:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">points</span> <span class="o">-</span> <span class="n">subtract</span> <span class="mi">2</span><span class="n">nd</span> <span class="ow">and</span> <span class="mi">1</span><span class="n">st</span> <span class="n">points</span><span class="p">,</span> <span class="n">effectively</span> <span class="n">making</span> <span class="n">the</span>
<span class="n">calculation</span> <span class="n">relative</span> <span class="n">to</span> <span class="n">the</span> <span class="n">origin</span> <span class="ow">and</span> <span class="n">x</span> <span class="n">axis</span><span class="p">,</span> <span class="n">aka</span><span class="o">...</span> <span class="n">slope</span>
<span class="n">n</span> <span class="n">points</span> <span class="o">-</span> <span class="n">sequential</span> <span class="n">angle</span> <span class="n">between</span> <span class="mi">3</span> <span class="n">points</span>
</pre></div>
</div>
<p>To keep:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>``keep to convert object to array``
a - a shape from the shape field
a = p1.getPart()
b = np.asarray([(i.X, i.Y) if i is not None else ()
               for j in a for i in j])
</pre></div>
</div>
<p>Sample data: the letter C</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span>  <span class="mi">80</span><span class="p">],</span>
<span class="go">                  [ 20,  80], [ 20, 20], [100, 20], [100, 0], [ 0, 0]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">angles_poly</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>  <span class="c1"># array([ 90.,  90.,  90., 270., 270.,  90.,  90.])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.line_dir">
<code class="descclassname">arraytools.geom.</code><code class="descname">line_dir</code><span class="sig-paren">(</span><em>orig</em>, <em>dest</em>, <em>fromNorth=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#line_dir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.line_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Direction of a line given 2 points</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>dest</strong> (<em>orig</em><em>,</em>) – 2D arrays of representing the start and end coordinates of two point
lines.</li>
<li><strong>fromNorth</strong> (<em>boolean</em>) – True or False gives angle relative to North or the x-axis.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">orig</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xy_s</span> <span class="o">=</span> <span class="n">array</span><span class="p">([[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span>
<span class="go">                  [ 1,  1,  1,  0, -1, -1, -1,  0]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dest</span> <span class="o">-</span> <span class="n">xy_s</span><span class="o">.</span><span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dir_</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;From x-axis&quot;</span><span class="p">,</span> <span class="s2">&quot;From N.&quot;</span><span class="p">][</span><span class="n">fromNorth</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ang</span> <span class="o">=</span> <span class="n">line_dir</span><span class="p">(</span><span class="n">orig</span><span class="p">,</span> <span class="n">dest</span><span class="p">,</span> <span class="n">fromNorth</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.densify">
<code class="descclassname">arraytools.geom.</code><code class="descname">densify</code><span class="sig-paren">(</span><em>polys</em>, <em>fact=2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#densify"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.densify" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert polygon objects to arrays, densify.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>_densify_2D</strong> (<em>function</em>) – the function that is called for each shape part</li>
<li><strong>_unpack</strong> (<em>function</em>) – unpack objects</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.simplify">
<code class="descclassname">arraytools.geom.</code><code class="descname">simplify</code><span class="sig-paren">(</span><em>a</em>, <em>deviation=10</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#simplify"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.simplify" title="Permalink to this definition">¶</a></dt>
<dd><p>Simplify array</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.rotate">
<code class="descclassname">arraytools.geom.</code><code class="descname">rotate</code><span class="sig-paren">(</span><em>pnts</em>, <em>angle=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#rotate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.rotate" title="Permalink to this definition">¶</a></dt>
<dd><p>Rotate points about the origin in degrees, (+ve for clockwise)</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.trans_rot">
<code class="descclassname">arraytools.geom.</code><code class="descname">trans_rot</code><span class="sig-paren">(</span><em>a</em>, <em>cent=None</em>, <em>angle=0.0</em>, <em>unique=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#trans_rot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.trans_rot" title="Permalink to this definition">¶</a></dt>
<dd><p>Translate and rotate and array of points about the point cloud origin.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>a</strong> (<em>array</em>) – 2d array of x,y coordinates.</li>
<li><strong>angle</strong> (<em>double</em>) – angle in degrees in the range -180. to 180</li>
<li><strong>unique</strong> (<em>boolean</em>) – If True, then duplicate points are removed.  If False, then this would
be similar to doing a weighting on the points based on location.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><em>Points rotated about the origin and translated back.</em></li>
<li><em>&gt;&gt;&gt; a = np.array([[0, 0], [0, 6], [8, 6], [8, 0]])  #, [0, 0]])</em></li>
<li><em>&gt;&gt;&gt; b = trans_rot(a, 2.5)</em></li>
<li><em>&gt;&gt;&gt; b</em></li>
<li><em>array([[ 0.5,  1.5],</em> – [ 1.5,  1.5],
[ 0.5, -0.5],
[ 1.5, -0.5]])</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<ul class="simple">
<li>if the points represent a polygon, make sure that the duplicate</li>
<li>np.einsum(‘ij,kj-&gt;ik’, a - cent, R)  =  np.dot(a - cent, R.T).T</li>
<li>ik does the rotation in einsum</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">R</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(((</span><span class="n">c</span><span class="p">,</span> <span class="n">s</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="n">s</span><span class="p">,</span>  <span class="n">c</span><span class="p">)))</span>  <span class="c1"># clockwise about the origin</span>
</pre></div>
</div>
<p><strong>* use this *</strong>
<a class="reference external" href="https://stackoverflow.com/questions/54445195/np-tensordot-for-rotation-of-point-clouds">https://stackoverflow.com/questions/54445195/np-tensordot-for-rotation-of-point-clouds</a>.</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.pnt_in_list">
<code class="descclassname">arraytools.geom.</code><code class="descname">pnt_in_list</code><span class="sig-paren">(</span><em>pnt</em>, <em>pnts_list</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#pnt_in_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.pnt_in_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Check to see if a point is in a list of points</p>
<p>sum([(x, y) == tuple(i) for i in [p0, p1, p2, p3]]) &gt; 0</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.pnt_on_seg">
<code class="descclassname">arraytools.geom.</code><code class="descname">pnt_on_seg</code><span class="sig-paren">(</span><em>pnt</em>, <em>seg</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#pnt_on_seg"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.pnt_on_seg" title="Permalink to this definition">¶</a></dt>
<dd><p>Orthogonal projection of a point onto a 2 point line segment.
Returns the intersection point, if the point is between the segment end
points, otherwise, it returns the distance to the closest endpoint.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>pnt</strong> (<em>array-like</em>) – <cite>x,y</cite> coordinate pair as list or ndarray</li>
<li><strong>seg</strong> (<em>array-like</em>) – <cite>from-to points</cite>, of x,y coordinates as an ndarray or equivalent</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">seg</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">]])</span>  <span class="c1"># p0, p1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pnt_on_seg</span><span class="p">(</span><span class="n">seg</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
<span class="go">array([5., 5.])</span>
</pre></div>
</div>
<p>Generically, with crossproducts and norms</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="n">p1</span><span class="o">-</span><span class="n">p0</span><span class="p">,</span> <span class="n">p0</span><span class="o">-</span><span class="n">p</span><span class="p">))</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">p1</span><span class="o">-</span><span class="n">p0</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.pnt_on_poly">
<code class="descclassname">arraytools.geom.</code><code class="descname">pnt_on_poly</code><span class="sig-paren">(</span><em>pnt</em>, <em>poly</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#pnt_on_poly"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.pnt_on_poly" title="Permalink to this definition">¶</a></dt>
<dd><p>Find closest point location on a polygon/polyline.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pnt</strong> (<em>1D ndarray array</em>) – XY pair representing the point coordinates.</li>
<li><strong>poly</strong> (<em>2D ndarray array</em>) – A sequence of XY pairs in clockwise order is expected.  The first and
last points may or may not be duplicates, signifying sequence closure.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><em>A list of [x, y, distance, angle] for the intersection point on the line.</em></li>
<li><em>The angle is relative to north from the origin point to the point on the</em></li>
<li><em>polygon.</em></li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>e_dist is represented by _e_2d and pnt_on_seg by its equivalent below.</p>
<p>_line_dir_ is from it’s equivalent line_dir included here.</p>
<p>This may be as simple as finding the closest point on the edge, but if
needed, an orthogonal projection onto a polygon/line edge will be done.
This situation arises when the distance to two sequential points is the
same</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.point_in_polygon">
<code class="descclassname">arraytools.geom.</code><code class="descname">point_in_polygon</code><span class="sig-paren">(</span><em>pnt</em>, <em>poly</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#point_in_polygon"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.point_in_polygon" title="Permalink to this definition">¶</a></dt>
<dd><p>Point is in polygon. ## fix this and use pip from arraytools</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.knn">
<code class="descclassname">arraytools.geom.</code><code class="descname">knn</code><span class="sig-paren">(</span><em>p</em>, <em>pnts</em>, <em>k=1</em>, <em>return_dist=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#knn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.knn" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates k nearest neighbours for a given point.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>p</strong> (<em>array</em>) – x,y reference point</li>
<li><strong>pnts</strong> (<em>array</em>) – Points array to examine</li>
<li><strong>k</strong> (<em>integer</em>) – The <cite>k</cite> in k-nearest neighbours</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Array of k-nearest points and optionally their distance from the source.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.nn_kdtree">
<code class="descclassname">arraytools.geom.</code><code class="descname">nn_kdtree</code><span class="sig-paren">(</span><em>a</em>, <em>N=1</em>, <em>sorted_=True</em>, <em>to_tbl=True</em>, <em>as_cKD=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#nn_kdtree"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.nn_kdtree" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce the N closest neighbours array with their distances using
scipy.spatial.KDTree as an alternative to einsum.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>a</strong> (<em>array</em>) – Assumed to be an array of point objects for which <cite>nearest</cite> is needed.</li>
<li><strong>N</strong> (<em>integer</em>) – Number of neighbors to return.  Note: the point counts as 1, so N=3
returns the closest 2 points, plus itself.
For table output, max N is limited to 5 so that the tabular output
isn’t ridiculous.</li>
<li><strong>sorted</strong> (<em>boolean</em>) – A nice option to facilitate things.  See <cite>xy_sort</cite>.  Its mini-version
is included in this function.</li>
<li><strong>to_tbl</strong> (<em>boolean</em>) – Produce a structured array output of coordinate pairs and distances.</li>
<li><strong>as_cKD</strong> (<em>boolean</em>) – Whether to use the <cite>c</cite> compiled or pure python version</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<p><a class="reference external" href="https://stackoverflow.com/questions/52366421/how-to-do-n-d-distance-and-nearest-neighbor-calculations-on-numpy-arrays/52366706#52366706">https://stackoverflow.com/questions/52366421/how-to-do-n-d-distance-and-nearest-neighbor-calculations-on-numpy-arrays/52366706#52366706</a>.</p>
<p><a class="reference external" href="https://stackoverflow.com/questions/6931209/difference-between-scipy-spatial-kdtree-and-scipy-spatial-ckdtree/6931317#6931317">https://stackoverflow.com/questions/6931209/difference-between-scipy-spatial-kdtree-and-scipy-spatial-ckdtree/6931317#6931317</a>.</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.cross">
<code class="descclassname">arraytools.geom.</code><code class="descname">cross</code><span class="sig-paren">(</span><em>o</em>, <em>a</em>, <em>b</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#cross"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.cross" title="Permalink to this definition">¶</a></dt>
<dd><p>Cross-product for vectors o-a and o-b</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.remove_self">
<code class="descclassname">arraytools.geom.</code><code class="descname">remove_self</code><span class="sig-paren">(</span><em>p</em>, <em>pnts</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#remove_self"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.remove_self" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a point which is duplicated or itself from the array</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.geom.adjacency_edge">
<code class="descclassname">arraytools.geom.</code><code class="descname">adjacency_edge</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/geom.html#adjacency_edge"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.geom.adjacency_edge" title="Permalink to this definition">¶</a></dt>
<dd><p>keep… adjacency-edge list association
: the columns are ‘from’, the rows are ‘to’ the cell value is the ‘weight’.</p>
</dd></dl>

</div>
<hr class="docutils" />
</div>
<div class="section" id="arrays-as-grids">
<h2>arrays as grids<a class="headerlink" href="#arrays-as-grids" title="Permalink to this headline">¶</a></h2>
<p>Arrays as grids, largely as replacements for the Spatial Analyst.</p>
<span class="target" id="module-arraytools.grid"></span><p>Script :   grid.py</p>
<p>Author :   <a class="reference external" href="mailto:Dan_Patterson&#37;&#52;&#48;carleton&#46;ca">Dan_Patterson<span>&#64;</span>carleton<span>&#46;</span>ca</a></p>
<p>Modified : 2018-11-23</p>
<p>Purpose :  tools for working with numpy arrays</p>
<p>Functions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">art</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">__all__</span>
<span class="p">[</span><span class="s1">&#39;check_shapes&#39;</span><span class="p">,</span> <span class="s1">&#39;combine_&#39;</span><span class="p">,</span> <span class="s1">&#39;expand_zone&#39;</span><span class="p">,</span> <span class="s1">&#39;euc_dist&#39;</span><span class="p">,</span> <span class="s1">&#39;euc_alloc&#39;</span><span class="p">,</span>
  <span class="s1">&#39;expand_&#39;</span><span class="p">,</span> <span class="s1">&#39;shrink_&#39;</span><span class="p">,</span> <span class="s1">&#39;regions_&#39;</span><span class="p">,</span> <span class="s1">&#39;expand_zone&#39;</span><span class="p">,</span> <span class="s1">&#39;fill_arr&#39;</span><span class="p">,</span>
  <span class="s1">&#39;reclass_vals&#39;</span><span class="p">,</span> <span class="s1">&#39;reclass_ranges&#39;</span><span class="p">,</span> <span class="s1">&#39;scale_up&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p class="rubric">References</p>
<p><a class="reference external" href="https://community.esri.com/blogs/dan_patterson/2018/01/19/combine-data-classification-from-raster-combinations">https://community.esri.com/blogs/dan_patterson/2018/01/19/combine-data-classification-from-raster-combinations</a></p>
<p><a class="reference external" href="https://stackoverflow.com/questions/48035246/intersect-multiple-2d-np-arrays-for-determining-zones">https://stackoverflow.com/questions/48035246/intersect-multiple-2d-np-arrays-for-determining-zones</a></p>
<hr class="docutils" />
<dl class="function">
<dt id="arraytools.grid.check_shapes">
<code class="descclassname">arraytools.grid.</code><code class="descname">check_shapes</code><span class="sig-paren">(</span><em>arrs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/grid.html#check_shapes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.grid.check_shapes" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the shapes of the arrays to ensure they are all equal</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.grid.combine_">
<code class="descclassname">arraytools.grid.</code><code class="descname">combine_</code><span class="sig-paren">(</span><em>arrs</em>, <em>ret_classes=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/grid.html#combine_"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.grid.combine_" title="Permalink to this definition">¶</a></dt>
<dd><p>Combine arrays to produce a unique classification scheme</p>
<dl class="docutils">
<dt><cite>arrs</cite> <span class="classifier-delimiter">:</span> <span class="classifier">iterable</span></dt>
<dd>list, tuple of arrays of the same shape</dd>
<dt><cite>ret_classes</cite> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd>a structured array with the class values for each array and the
last column is the new_class</dd>
</dl>
<p class="rubric">Notes</p>
<p>You should mask any values prior to running this if you want to account
for nodata values.</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.grid.euc_dist">
<code class="descclassname">arraytools.grid.</code><code class="descname">euc_dist</code><span class="sig-paren">(</span><em>a</em>, <em>origins=0</em>, <em>cell_size=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/grid.html#euc_dist"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.grid.euc_dist" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the euclidean distance and/or allocation</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>a</strong> (<em>array</em>) – numpy float or integer array</li>
<li><strong>origins</strong> (<em>number</em><em>, </em><em>list</em><em> or </em><em>tuple</em>) – The locations to calculate distance for.  Anything that is not a mask
is an origin. If a single number is provided, a <cite>mask</cite> will be created
using it.  A list/tuple of values can be used for multiple value
masking.</li>
<li><strong>cell_size</strong> (<em>float</em><em>, </em><em>int</em>) – The cell size of the raster.  What does each cell represent on the
ground.  1.0 is assumed</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools.grid.euc_alloc">
<code class="descclassname">arraytools.grid.</code><code class="descname">euc_alloc</code><span class="sig-paren">(</span><em>a</em>, <em>fill_zones=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/grid.html#euc_alloc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.grid.euc_alloc" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the euclidean distance and/or allocation</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>a</strong> (<em>array</em>) – numpy float or integer array</li>
<li><strong>fill_zones</strong> (<em>number</em><em>, </em><em>list</em><em> or </em><em>tuple</em>) – These are the cells/zones to fill with the values of the closest cell.
If a single number is provided, a <cite>mask</cite> will be created using it.  A
list or tuple of values can be used to provide multiple value masking.</li>
<li><strong>dist</strong> (<em>boolean</em>) – True, the distance of the closest non-masked value to the masked cell</li>
<li><strong>alloc</strong> (<em>boolean</em>) – True, the value of the closest non-masked value to the masked cell</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools.grid.expand_">
<code class="descclassname">arraytools.grid.</code><code class="descname">expand_</code><span class="sig-paren">(</span><em>a</em>, <em>val=1</em>, <em>mask_vals=0</em>, <em>buff_dist=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/grid.html#expand_"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.grid.expand_" title="Permalink to this definition">¶</a></dt>
<dd><p>Expand/buffer a raster by cells (a distance)</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.grid.shrink_">
<code class="descclassname">arraytools.grid.</code><code class="descname">shrink_</code><span class="sig-paren">(</span><em>a</em>, <em>val=1</em>, <em>mask_vals=0</em>, <em>buff_dist=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/grid.html#shrink_"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.grid.shrink_" title="Permalink to this definition">¶</a></dt>
<dd><p>Expand/buffer a raster by a distance</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.grid.regions_">
<code class="descclassname">arraytools.grid.</code><code class="descname">regions_</code><span class="sig-paren">(</span><em>a</em>, <em>cross=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/grid.html#regions_"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.grid.regions_" title="Permalink to this definition">¶</a></dt>
<dd><p>Delineate <cite>regions</cite> or <cite>zones</cite> in a raster.  This is analogous to
<cite>regiongroup</cite> in gis software.  In scipy.ndimage, a <cite>label</cite> is ascribed
to these groupings.  Any nonzero value will be considered a zone.
A <cite>structure</cite> is used to filter the raster to describe cell connectivity.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>a</strong> (<em>ndarray</em>) – pre-processing may be needed to assign values to <cite>0</cite> which will be
considered background/offsite</li>
<li><strong>cross</strong> (<em>boolean</em>) – <ul>
<li>True, [[0,1,0], [1,1,1], [0,1,0]], diagonal cells not included</li>
<li>False, [[1,1,1], [1,1,1], [1,1,1]], diagonals included</li>
</ul>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>The use of <cite>np.unique</cite> will ensure that array values are queried and
returned in ascending order.</p>
<dl class="docutils">
<dt>big sample 2000x2000  about 1 sec with 16 classes</dt>
<dd>aa = np.repeat(np.repeat(a, 500, axis=1), 500, axis=0)</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="arraytools.grid.expand_zone">
<code class="descclassname">arraytools.grid.</code><code class="descname">expand_zone</code><span class="sig-paren">(</span><em>a</em>, <em>zone=None</em>, <em>win=2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/grid.html#expand_zone"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.grid.expand_zone" title="Permalink to this definition">¶</a></dt>
<dd><p>Expand a value (zone) in a 2D array, normally assumed to represent a
raster surface.</p>
<dl class="docutils">
<dt>zone <span class="classifier-delimiter">:</span> <span class="classifier">number</span></dt>
<dd>The value/class to expand into the surrounding cells</dd>
<dt>win <span class="classifier-delimiter">:</span> <span class="classifier">list/tuple</span></dt>
<dd>select a (2, 2) or (3, 3) moving window</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="arraytools.grid.fill_arr">
<code class="descclassname">arraytools.grid.</code><code class="descname">fill_arr</code><span class="sig-paren">(</span><em>a</em>, <em>win=(3</em>, <em>3)</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/grid.html#fill_arr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.grid.fill_arr" title="Permalink to this definition">¶</a></dt>
<dd><p>try filling an array
as in fill, sinks</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.grid.reclass_vals">
<code class="descclassname">arraytools.grid.</code><code class="descname">reclass_vals</code><span class="sig-paren">(</span><em>a</em>, <em>old_vals=[]</em>, <em>new_vals=[]</em>, <em>mask=False</em>, <em>mask_val=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/grid.html#reclass_vals"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.grid.reclass_vals" title="Permalink to this definition">¶</a></dt>
<dd><p>Reclass an array of integer or floating point values.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>old_vals</strong> (<em>number</em><em>(</em><em>s</em><em>)</em>) – list/array of values to reclassify</li>
<li><strong>new_bins</strong> (<em>number</em><em>(</em><em>s</em><em>)</em>) – new class values for old value</li>
<li><strong>mask</strong> (<em>boolean</em>) – Does the raster contains nodata values or values to be masked</li>
<li><strong>mask_val</strong> (<em>number</em><em>(</em><em>s</em><em>)</em>) – Values to use as the mask</li>
<li><strong>dimensions will be squeezed.</strong> (<em>Array</em>) – <div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">art</span><span class="o">.</span><span class="n">reclass_vals</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">a0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ones_like</span><span class="p">(</span><span class="n">a0</span><span class="p">))</span>
<span class="go"># array([[0, 1, 2, 3, 4]   ==&gt; array([[1, 1, 1, 1, 1],</span>
<span class="go">#        [5, 6, 7, 8, 9]])           [5, 6, 7, 8, 9]])</span>
</pre></div>
</div>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools.grid.reclass_ranges">
<code class="descclassname">arraytools.grid.</code><code class="descname">reclass_ranges</code><span class="sig-paren">(</span><em>a</em>, <em>bins=[]</em>, <em>new_bins=[]</em>, <em>mask=False</em>, <em>mask_val=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/grid.html#reclass_ranges"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.grid.reclass_ranges" title="Permalink to this definition">¶</a></dt>
<dd><p>Reclass an array of integer or floating point values based on old and
new range values.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>bins</strong> (<em>list/array</em>) – Sequential list/array of the lower limits of each class include one
value higher to cover the upper range.</li>
<li><strong>new_bins</strong> (<em>number</em><em>(</em><em>s</em><em>)</em>) – New class values for each bin</li>
<li><strong>mask</strong> (<em>boolean</em>) – Does the raster contains nodata values or values to be masked</li>
<li><strong>mask_val</strong> (<em>number</em><em>(</em><em>s</em><em>)</em>) – Values to use as the mask</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>:param Array dimensions will be squeezed::: &gt;&gt;&gt; z = np.arange(3*5).reshape(3,5)</dt>
<dd><div class="first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">bins</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_bins</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z_recl</span> <span class="o">=</span> <span class="n">reclass</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">bins</span><span class="p">,</span> <span class="n">new_bins</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">mask_val</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="go"># ==&gt; .... z                     ==&gt; .... z_recl</span>
<span class="go">array([[ 0,  1,  2,  3,  4],   array([[1, 1, 1, 1, 1],</span>
<span class="gp">... </span>   <span class="p">[</span> <span class="mi">5</span><span class="p">,</span>  <span class="mi">6</span><span class="p">,</span>  <span class="mi">7</span><span class="p">,</span>  <span class="mi">8</span><span class="p">,</span>  <span class="mi">9</span><span class="p">],</span>          <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>   <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">]])</span>         <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">]])</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="arraytools.grid.scale_up">
<code class="descclassname">arraytools.grid.</code><code class="descname">scale_up</code><span class="sig-paren">(</span><em>a</em>, <em>x=2</em>, <em>y=2</em>, <em>num_z=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/grid.html#scale_up"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.grid.scale_up" title="Permalink to this definition">¶</a></dt>
<dd><p>Scale the input array repeating the array values up by the
x and y factors.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>a</strong> (<em>array</em>) – An ndarray, 1D arrays will be upcast to 2D</li>
<li><strong>y</strong> (<em>x</em><em>,</em>) – Factors to scale the array in x (col) and y (row).  Scale factors
must be greater than 2</li>
<li><strong>num_z</strong> (<em>number</em>) – For 3D, produces the 3rd dimension, ie. if num_z = 3 with the
defaults, you will get an array with shape=(3, 6, 6).  If
num_z != None or 0, then the options are ‘repeat’, ‘random’.
With ‘repeat’ the extras are kept the same and you can add random
values to particular slices of the 3rd dimension, or multiply them.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><em>&gt;&gt;&gt; a = np.array([[0, 1, 2], [3, 4, 5]]</em></li>
<li><em>&gt;&gt;&gt; b = scale(a, x=2, y=2)</em></li>
<li><em>array([[0, 0, 1, 1, 2, 2],</em> – [0, 0, 1, 1, 2, 2],
[3, 3, 4, 4, 5, 5],
[3, 3, 4, 4, 5, 5]])</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="go">array([[0, 1],</span>
<span class="go">       [2, 3]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f_</span><span class="p">(</span><span class="n">scale</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">num_z</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
<span class="go">Array... shape (3, 4, 4), ndim 3, not masked</span>
<span class="go">0, 0, 1, 1    0, 0, 1, 1    0, 0, 1, 1</span>
<span class="go">0, 0, 1, 1    0, 0, 1, 1    0, 0, 1, 1</span>
<span class="go">2, 2, 3, 3    2, 2, 3, 3    2, 2, 3, 3</span>
<span class="go">2, 2, 3, 3    2, 2, 3, 3    2, 2, 3, 3</span>
<span class="go">sub (0)       sub (1)       sub (2)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
</div>
<div class="section" id="set-operations">
<h2>set operations<a class="headerlink" href="#set-operations" title="Permalink to this headline">¶</a></h2>
<p>Set operations on arrays.</p>
<span class="target" id="module-arraytools.ndset"></span><p>Script :   ndset.py</p>
<p>Author :   <a class="reference external" href="mailto:Dan_Patterson&#37;&#52;&#48;carleton&#46;ca">Dan_Patterson<span>&#64;</span>carleton<span>&#46;</span>ca</a></p>
<p>Modified : 2019-01-06</p>
<p>Purpose :</p>
<p>This set of functions is largely directed to extending some of numpy set
functions to apply to Nxd shaped arrays as well as structured and recarrays.
The functionality largely depends on using a <cite>view</cite> of the input array so that
each row can be treated as a unique record in the array.</p>
<p>If you are working with arrays and wish to perform functions on certain columns
then you will have to preprocess/preselect.  You can only add so much to a
function before it loses its readability and utility.</p>
<p>ndset:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_view_as_struct_</span><span class="p">,</span> <span class="n">is_in</span><span class="p">,</span> <span class="n">nd_diff</span><span class="p">,</span> <span class="n">nd_diffxor</span><span class="p">,</span> <span class="n">nd_intersect</span><span class="p">,</span> <span class="n">nd_union</span><span class="p">,</span> <span class="n">nd_uniq</span>
</pre></div>
</div>
<p class="rubric">Notes</p>
<dl class="docutils">
<dt>_view_as_struct_(a)</dt>
<dd><div class="first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span>  <span class="mi">0</span><span class="p">,</span>   <span class="mi">0</span><span class="p">],</span> <span class="p">[</span>  <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_view_as_struct_</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gp">... </span><span class="n">array</span><span class="p">([[(</span>  <span class="mi">0</span><span class="p">,</span>   <span class="mi">0</span><span class="p">)],</span>
<span class="gp">... </span>       <span class="p">[(</span>  <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)],</span>
<span class="gp">... </span>       <span class="p">[(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">)]],</span> <span class="n">dtype</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;f0&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;i4&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;f1&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;i4&#39;</span><span class="p">)])</span>
</pre></div>
</div>
</dd>
<dt>is_in</dt>
<dd><div class="first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span>  <span class="mi">0</span><span class="p">,</span>   <span class="mi">0</span><span class="p">],</span> <span class="p">[</span>  <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look_for</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span>  <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">is_in</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">look_for</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">array([[  0, 100],</span>
<span class="gp">... </span>   <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">is_in</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">look_for</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">array([[0, 0]])</span>
</pre></div>
</div>
</dd>
<dt>For the following:</dt>
<dd><div class="first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span>  <span class="mi">0</span><span class="p">,</span>   <span class="mi">0</span><span class="p">],</span> <span class="p">[</span>  <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span>  <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>
</pre></div>
</div>
</dd>
<dt>nd_diff(a, b)</dt>
<dd><div class="first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">nd_diff</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="go">array([[0, 0]])</span>
</pre></div>
</div>
</dd>
<dt>nd_diffxor(a, b, uni=False)</dt>
<dd><div class="first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">nd_diffxor</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">uni</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">array([[  0, 100],</span>
<span class="go">       [ 20,  20],</span>
<span class="go">       [100,   0],</span>
<span class="go">       [100,  20],</span>
<span class="go">       [100, 100]])</span>
</pre></div>
</div>
</dd>
<dt>nd_intersect(a, b, invert=False)</dt>
<dd><div class="first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">nd_intersect</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">invert</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">array([[  0, 100],</span>
<span class="go">       [100, 100]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nd_intersect</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">invert</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">array([[0, 0]])</span>
</pre></div>
</div>
</dd>
<dt>nd_union(a, b)</dt>
<dd><div class="first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">nd_union</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
<span class="go">array([[  0,   0],</span>
<span class="go">       [  0, 100],</span>
<span class="go">       [ 20,  20],</span>
<span class="go">       [100,   0],</span>
<span class="go">       [100,  20],</span>
<span class="go">       [100, 100]])</span>
</pre></div>
</div>
</dd>
<dt>nd_uniq(a, counts=False)</dt>
<dd><div class="first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span> <span class="p">[</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>
<span class="go">nd_uniq(d)</span>
<span class="go">array([[  0,   0],</span>
<span class="go">       [100, 100]])</span>
</pre></div>
</div>
</dd>
</dl>
<p class="rubric">References</p>
<p><a class="reference external" href="https://community.esri.com/blogs/dan_patterson/2016/10/23/numpy-lessons-5-identical-duplicate-unique-different">https://community.esri.com/blogs/dan_patterson/2016/10/23/numpy-lessons-5-identical-duplicate-unique-different</a>.</p>
<p><a class="reference external" href="https://github.com/numpy/numpy/blob/master/numpy/lib/arraysetops.py">https://github.com/numpy/numpy/blob/master/numpy/lib/arraysetops.py</a>.</p>
<dl class="function">
<dt id="arraytools.ndset.nd_diff">
<code class="descclassname">arraytools.ndset.</code><code class="descname">nd_diff</code><span class="sig-paren">(</span><em>a</em>, <em>b</em>, <em>invert=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/ndset.html#nd_diff"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.ndset.nd_diff" title="Permalink to this definition">¶</a></dt>
<dd><p>See nd_intersect.  This just returns the opposite/difference</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.ndset.nd_diffxor">
<code class="descclassname">arraytools.ndset.</code><code class="descname">nd_diffxor</code><span class="sig-paren">(</span><em>a</em>, <em>b</em>, <em>uni=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/ndset.html#nd_diffxor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.ndset.nd_diffxor" title="Permalink to this definition">¶</a></dt>
<dd><p>using setxor… it is slower than nd_diff, 36 microseconds vs 18.2
but this is faster for large sets</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.ndset.nd_intersect">
<code class="descclassname">arraytools.ndset.</code><code class="descname">nd_intersect</code><span class="sig-paren">(</span><em>a</em>, <em>b</em>, <em>invert=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/ndset.html#nd_intersect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.ndset.nd_intersect" title="Permalink to this definition">¶</a></dt>
<dd><p>Intersect of two, 2D arrays using views and in1d</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>b</strong> (<em>a</em><em>,</em>) – Arrays are assumed to have a shape = (N, 2)</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<p><a class="reference external" href="https://github.com/numpy/numpy/blob/master/numpy/lib/arraysetops.py">https://github.com/numpy/numpy/blob/master/numpy/lib/arraysetops.py</a>.</p>
<p><a class="reference external" href="https://stackoverflow.com/questions/9269681/intersection-of-2d-numpy-ndarrays">https://stackoverflow.com/questions/9269681/intersection-of-2d-numpy-ndarrays</a>.</p>
<p><a class="reference external" href="https://stackoverflow.com/questions/8317022/get-intersecting-rows-across-two-2d-numpy-arrays">https://stackoverflow.com/questions/8317022/get-intersecting-rows-across-two-2d-numpy-arrays</a>.</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.ndset.nd_isin">
<code class="descclassname">arraytools.ndset.</code><code class="descname">nd_isin</code><span class="sig-paren">(</span><em>a</em>, <em>look_for</em>, <em>reverse=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/ndset.html#nd_isin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.ndset.nd_isin" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks ndarray <cite>a</cite> for the presence of other records ndarray <cite>look_for</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>arr</strong> (<em>array</em>) – the array to check for the elements</li>
<li><strong>look_for</strong> (<em>number</em><em>, </em><em>list</em><em> or </em><em>array</em>) – what to use for the good</li>
<li><strong>reverse</strong> (<em>boolean</em>) – Switch the query look_for to <cite>True</cite> to find those not in <cite>a</cite></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools.ndset.nd_merge">
<code class="descclassname">arraytools.ndset.</code><code class="descname">nd_merge</code><span class="sig-paren">(</span><em>a</em>, <em>b</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/ndset.html#nd_merge"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.ndset.nd_merge" title="Permalink to this definition">¶</a></dt>
<dd><p>Merge views of 2 ndarrays or recarrays.  Duplicates are not removed, use
nd_union instead.</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.ndset.nd_union">
<code class="descclassname">arraytools.ndset.</code><code class="descname">nd_union</code><span class="sig-paren">(</span><em>a</em>, <em>b</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/ndset.html#nd_union"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.ndset.nd_union" title="Permalink to this definition">¶</a></dt>
<dd><p>Union view of arrays</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.ndset.nd_uniq">
<code class="descclassname">arraytools.ndset.</code><code class="descname">nd_uniq</code><span class="sig-paren">(</span><em>a</em>, <em>counts=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/ndset.html#nd_uniq"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.ndset.nd_uniq" title="Permalink to this definition">¶</a></dt>
<dd><p>Taken from, but modified for simple axis 0 and 1 and structured
arrays in (N, m) or (N,) format.</p>
<p>To enable determination of unique values in uniform arrays with
uniform dtypes.  np.unique in versions &lt; 1.13 need to use this.</p>
<p><a class="reference external" href="https://github.com/numpy/numpy/blob/master/numpy/lib/arraysetops.py">https://github.com/numpy/numpy/blob/master/numpy/lib/arraysetops.py</a>.</p>
</dd></dl>

<hr class="docutils" />
</div>
<div class="section" id="python-tools">
<h2>python tools<a class="headerlink" href="#python-tools" title="Permalink to this headline">¶</a></h2>
<p>General python tools.</p>
<span class="target" id="module-arraytools.py_tools"></span><div class="section" id="py-tools">
<h3>py_tools<a class="headerlink" href="#py-tools" title="Permalink to this headline">¶</a></h3>
<p>Script : py_tools.py</p>
<p>Author : <a class="reference external" href="mailto:Dan_Patterson&#37;&#52;&#48;carleton&#46;ca">Dan_Patterson<span>&#64;</span>carleton<span>&#46;</span>ca</a></p>
<p>Modified : 2019-01-06</p>
<p>Purpose : tools for working with python, numpy and other python packages</p>
<dl class="function">
<dt id="arraytools.py_tools.comp_info">
<code class="descclassname">arraytools.py_tools.</code><code class="descname">comp_info</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/py_tools.html#comp_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.py_tools.comp_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Return information for the computer and python version</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.py_tools.get_dir">
<code class="descclassname">arraytools.py_tools.</code><code class="descname">get_dir</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/py_tools.html#get_dir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.py_tools.get_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the directory list from a path, excluding geodatabase folders.
Used by.. folders</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get_dir</span><span class="p">(</span><span class="s1">&#39;C:/Git_Dan/arraytools&#39;</span><span class="p">)</span>
<span class="go">[&#39;C:/Git_Dan/arraytools/.spyproject&#39;,</span>
<span class="go"> &#39;C:/Git_Dan/arraytools/analysis&#39;,</span>
<span class="go"> ... snip ...</span>
<span class="go"> &#39;C:/Git_Dan/arraytools/__pycache__&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># ---- common path prefix</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">commonprefix</span><span class="p">(</span><span class="n">get_dir</span><span class="p">(</span><span class="s1">&#39;C:/Git_Dan/arraytools&#39;</span><span class="p">))</span>
<span class="go">&#39;C:/Git_Dan/arraytools/&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools.py_tools.folders">
<code class="descclassname">arraytools.py_tools.</code><code class="descname">folders</code><span class="sig-paren">(</span><em>path</em>, <em>first=True</em>, <em>prefix=''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/py_tools.html#folders"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.py_tools.folders" title="Permalink to this definition">¶</a></dt>
<dd><p>Print recursive listing of folders in a path.  Make sure you <cite>raw</cite>
format the path:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>``r&#39;c:\Temp&#39;  or &#39;c:/Temp&#39; or &#39;c:\Temp&#39;``
</pre></div>
</div>
<p>Requires,  <code class="docutils literal notranslate"><span class="pre">_get_dir</span></code> also, an example of path common prefix</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.py_tools.sub_folders">
<code class="descclassname">arraytools.py_tools.</code><code class="descname">sub_folders</code><span class="sig-paren">(</span><em>path</em>, <em>combine=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/py_tools.html#sub_folders"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.py_tools.sub_folders" title="Permalink to this definition">¶</a></dt>
<dd><p>Print the folders in a path, excluding ‘.’ folders
This is the best one.</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.py_tools.dir_py">
<code class="descclassname">arraytools.py_tools.</code><code class="descname">dir_py</code><span class="sig-paren">(</span><em>obj</em>, <em>colwise=False</em>, <em>cols=4</em>, <em>prn=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/py_tools.html#dir_py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.py_tools.dir_py" title="Permalink to this definition">¶</a></dt>
<dd><p>The non-numpy version of dirr</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.py_tools.flatten_shape">
<code class="descclassname">arraytools.py_tools.</code><code class="descname">flatten_shape</code><span class="sig-paren">(</span><em>shp</em>, <em>completely=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/py_tools.html#flatten_shape"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.py_tools.flatten_shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Flatten a array or geometry shape object using itertools.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>shp</strong> (<em>array</em>) – an array or an array representing polygon, polyline, or point shapes</li>
<li><strong>completely</strong> (<em>boolean</em>) – True returns points for all objects
False, returns Array for polygon or polyline objects</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>For conventional array-like objects use <cite>completely = False</cite> to flatten
the object completely.</p>
<p>For geometry objects, use <cite>True</cite> for polygon and polylines to retain their
parts, but for points, use <cite>False</cite> since you need to retain the x,y pair</p>
<p>The <cite>__iter__</cite> property.  Polygon, Polyline, Array all have this property.
Points do not.</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.py_tools.pack">
<code class="descclassname">arraytools.py_tools.</code><code class="descname">pack</code><span class="sig-paren">(</span><em>a</em>, <em>param='__iter__'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/py_tools.html#pack"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.py_tools.pack" title="Permalink to this definition">¶</a></dt>
<dd><p>Pack an iterable into an ndarray or object array</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.py_tools.unpack">
<code class="descclassname">arraytools.py_tools.</code><code class="descname">unpack</code><span class="sig-paren">(</span><em>iterable</em>, <em>param='__iter__'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/py_tools.html#unpack"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.py_tools.unpack" title="Permalink to this definition">¶</a></dt>
<dd><p>Unpack an iterable based on the param(eter) condition using recursion.</p>
<p class="rubric">Notes</p>
<ul class="simple">
<li>Use <cite>flatten</cite> for recarrays or structured arrays.</li>
<li>See main docs for more information and options.</li>
<li>To produce uniform array from this, use the following after this is done.</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">out</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">xy</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">xy</span><span class="p">)</span><span class="o">//</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li>To check whether unpack can be used.</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">void</span><span class="p">))</span> <span class="n">like</span> <span class="ow">in</span> <span class="n">flatten</span> <span class="n">above</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools.py_tools.combine_dicts">
<code class="descclassname">arraytools.py_tools.</code><code class="descname">combine_dicts</code><span class="sig-paren">(</span><em>ds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/py_tools.html#combine_dicts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.py_tools.combine_dicts" title="Permalink to this definition">¶</a></dt>
<dd><p>Combine dictionary values from multiple dictionaries and combine
their keys if needed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>not at the top of the script</strong><strong>, </strong><strong>import numpy as np</strong> (<em>If</em>) – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">A new dictionary.</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<hr class="docutils" />
</div>
<div class="section" id="switch-arrange-weave-shape">
<h2>Switch arrange weave shape<a class="headerlink" href="#switch-arrange-weave-shape" title="Permalink to this headline">¶</a></h2>
<p>A multipurpose set of tools for reorganizing arrays.</p>
<span class="target" id="module-arraytools.saws"></span><p>Script :   saws.py</p>
<p>Author :   <a class="reference external" href="mailto:Dan_Patterson&#37;&#52;&#48;carleton&#46;ca">Dan_Patterson<span>&#64;</span>carleton<span>&#46;</span>ca</a></p>
<p>Modified : 2019-01-19</p>
<dl class="docutils">
<dt>Purpose :</dt>
<dd>Tools for sorting arrays, arranging, weaving and shaping</dd>
</dl>
<dl class="function">
<dt id="arraytools.saws.sort_by_columns">
<code class="descclassname">arraytools.saws.</code><code class="descname">sort_by_columns</code><span class="sig-paren">(</span><em>a</em>, <em>order=None</em>, <em>descending=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/saws.html#sort_by_columns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.saws.sort_by_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort a Nxm array by a column order, numbered from 0 for the first column</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>a</strong> (<em>array-like</em>) – Specifically, the array must of the same dtype with at least 2D in
shape</li>
<li><strong>order</strong> (<em>None</em><em>, </em><em>list</em><em>, </em><em>tuple</em><em>, </em><em>np.ndarray</em>) – See the order options within the code.
- None :  reverses shape[1]  shape = (N, 3) yields order = (2, 1, 0)
- integer : sorts on that column
- tuple/list : sorts on the reversed order</li>
<li><strong>a = np.array</strong><strong>(</strong><strong>[</strong><strong>[</strong><strong>0</strong><strong>, </strong><strong>0</strong><strong>, </strong><strong>0</strong><strong>]</strong><strong>,</strong> (<em>&gt;&gt;&gt;</em>) – [2, 1, 1],
[1, 1, 2],
[2, 1, 2],
[0, 2, 2],
[0, 2, 0]])</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools.saws.sort_on_column">
<code class="descclassname">arraytools.saws.</code><code class="descname">sort_on_column</code><span class="sig-paren">(</span><em>a</em>, <em>col=0</em>, <em>descending=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/saws.html#sort_on_column"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.saws.sort_on_column" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort on a single column.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sort_rows_by_col</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>    <span class="n">array</span><span class="p">([[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span>
<span class="go">              [3, 4, 5],           [3, 4, 5],</span>
<span class="go">              [6, 7, 8]])          [0, 1, 2]])</span>
</pre></div>
</div>
<p class="rubric">References</p>
<p>Steve Tjoa on
<a class="reference external" href="https://stackoverflow.com/questions/2828059/sorting-arrays-in-numpy-by-column/2828121#2828121">https://stackoverflow.com/questions/2828059/sorting-arrays-in-numpy-by-column/2828121#2828121</a>.</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.saws.sort_cols_by_row">
<code class="descclassname">arraytools.saws.</code><code class="descname">sort_cols_by_row</code><span class="sig-paren">(</span><em>a</em>, <em>descending=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/saws.html#sort_cols_by_row"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.saws.sort_cols_by_row" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort the rows of an array in the order of their column values.
Uses lexsort</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.saws.radial_sort">
<code class="descclassname">arraytools.saws.</code><code class="descname">radial_sort</code><span class="sig-paren">(</span><em>pnts</em>, <em>cent=None</em>, <em>distance=True</em>, <em>as_azimuth=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/saws.html#radial_sort"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.saws.radial_sort" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort about the point cloud center or from a given point</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pnts</strong> (<em>points</em>) – An array of points (x,y) as array or list</li>
<li><strong>cent</strong> (<em>array-like</em>) – <ul>
<li>A list, tuple, array of the center’s x,y coordinates.</li>
<li>None, the center’s coordinate is calculated from the values with
duplicates removed</li>
</ul>
</li>
<li><strong>cent =</strong><strong> [</strong><strong>0</strong><strong>, </strong><strong>0</strong><strong>] or </strong><strong>np.array</strong><strong>(</strong><strong>[</strong><strong>0</strong><strong>, </strong><strong>0</strong><strong>]</strong><strong>)</strong> (<em>&gt;&gt;&gt;</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><em>- The angles in the range -180, 180 x-axis oriented</em></li>
<li><em>- The pnts are NOT returned sorted, you will have to use the sort_order to</em> – complete the sorting.</li>
<li><em>&gt;&gt;&gt; pnts_sorted = pnts[sort_order]</em></li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools.saws.sort_structured">
<code class="descclassname">arraytools.saws.</code><code class="descname">sort_structured</code><span class="sig-paren">(</span><em>a</em>, <em>sort_fields=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/saws.html#sort_structured"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.saws.sort_structured" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort a structured array of based on field order.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>a</strong> (<em>structured/record array</em>) – The array requires fields identifing the equivalent of an X and Y field</li>
<li><strong>xy_fields</strong> (<em>list</em>) – The field names representing the fields to sort on. eg. [‘X’, ‘Y’]</li>
<li><strong>struct</strong> (<em>boolean</em>) – See <code class="docutils literal notranslate"><span class="pre">sort_points_radial</span></code> for more information regarding outputs</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-func docutils literal notranslate"><span class="pre">This()</span></code></p>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools.saws.sort_points">
<code class="descclassname">arraytools.saws.</code><code class="descname">sort_points</code><span class="sig-paren">(</span><em>a</em>, <em>as_structured=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/saws.html#sort_points"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.saws.sort_points" title="Permalink to this definition">¶</a></dt>
<dd><p>Radial sort of points about the centre point.  The output is a
structured array or optionally an ndarray.  In both cases, an array of the
sort order is returned.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>a</strong> (<em>array</em>) – 2D array</li>
<li><strong>as_structured</strong> (<em>boolean</em>) – <ul>
<li>True, returns the sorted points and an array of sort indices</li>
<li>False, returns a structured array and and an array of sort indices</li>
</ul>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>More information is returned as well, including the angle from the
centre to the point.  This angle is relative to the x-axis following
mathemetical conventions.</p>
<dl class="docutils">
<dt>The output dtype for the structured array contains the new and old point</dt>
<dd>ids and the angle and distance from the centre.</dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a_s</span><span class="p">,</span> <span class="n">indices</span> <span class="o">=</span> <span class="n">sort_points</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a_s</span><span class="o">.</span><span class="n">dtype</span>
<span class="go">dtype=[(&#39;ID&#39;, &#39;&lt;i4&#39;), (&#39;Old_ID&#39;, &#39;&lt;i4&#39;), (&#39;X&#39;, &#39;&lt;f8&#39;), (&#39;Y&#39;, &#39;&lt;f8&#39;),</span>
<span class="go">       (&#39;Angle&#39;, &#39;&lt;f8&#39;), (&#39;Distance&#39;, &#39;&lt;f8&#39;)]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools.saws.view_sort">
<code class="descclassname">arraytools.saws.</code><code class="descname">view_sort</code><span class="sig-paren">(</span><em>a</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/saws.html#view_sort"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.saws.view_sort" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort ndarrays by row.  This assumes the array represent coordinates
and other baggage, in the order that they appear in the row.  It is best
used for sorting x,y or x,y,z coordinates, using argsort.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><ul class="simple">
<li><em>This is a very smart option since if fakes a structured/record array format</em></li>
<li>enabling argsort to be used with its <cite>order</cite> option.</li>
<li><em>The sorted array and the indices of their original positions in the</em></li>
<li><em>input array.</em></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span>      <span class="n">a</span>           <span class="n">view_sort</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gp">... </span><span class="n">array</span><span class="p">([[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span>   <span class="n">array</span><span class="p">([[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="go">           [9, 5],          [5, 9],</span>
<span class="go">           [8, 5],          [7, 5],</span>
<span class="go">           [7, 5],          [8, 5],</span>
<span class="gp">... </span>       <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]])</span>         <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">5</span><span class="p">]])</span>
<span class="go">indices returned:  array([4, 0, 3, 2, 1], dtype=int64))</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-func docutils literal notranslate"><span class="pre">sort_by_order()</span></code>, <a class="reference internal" href="#arraytools.saws.xy_sort" title="arraytools.saws.xy_sort"><code class="xref py py-func docutils literal notranslate"><span class="pre">xy_sort()</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools.saws.xy_sort">
<code class="descclassname">arraytools.saws.</code><code class="descname">xy_sort</code><span class="sig-paren">(</span><em>a</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/saws.html#xy_sort"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.saws.xy_sort" title="Permalink to this definition">¶</a></dt>
<dd><p>Formally called <cite>view_sort</cite>.  See the documentation there.</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.saws.weave">
<code class="descclassname">arraytools.saws.</code><code class="descname">weave</code><span class="sig-paren">(</span><em>a</em>, <em>b</em>, <em>match=False</em>, <em>by_row=True</em>, <em>by_cell=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/saws.html#weave"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.saws.weave" title="Permalink to this definition">¶</a></dt>
<dd><p>interweave arrays of the same dimension</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>b</strong> (<em>a</em><em>,</em>) – Equally shaped arrays, truncation will occur for the longer array</li>
<li><strong>match</strong> (<em>boolean</em>) – <ul>
<li>False, slices the array with the greater 1st dimension to match the /
second</li>
<li>True, converts the dtype to <cite>float</cite> and pads the shorter array with
np.nan</li>
</ul>
</li>
<li><strong>by_row</strong> (<em>boolean</em>) – <ul>
<li>For 1D arrays, the weave is by element in the array</li>
<li>For N-d arrays, the weave is by dimension, mixing or flattening</li>
</ul>
</li>
<li><strong>np.asarray</strong><strong>(</strong><strong>[</strong><strong>*sum</strong><strong>(</strong><strong>zip</strong><strong>(</strong><strong>a</strong><strong>, </strong><strong>b</strong><strong>)</strong><strong>, </strong><strong>(</strong><strong>)</strong><strong>)</strong><strong>]</strong><strong>)</strong> (<em>**cool!!!**</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">An array of the same dimension is returned</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>  <span class="c1"># array([0, 1, 2, 3, 4, 5, 6, 7])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>       <span class="c1"># array([7, 6, 5, 4, 3, 2, 1, 0])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">weave</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>  <span class="c1"># array([0, 7, 1, 6, 2, 5, 3, 4, 4, 3, 5, 2, 6, 1, 7, 0])</span>
<span class="gp">... </span><span class="mi">2</span><span class="n">D</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># reshape arrays</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>  <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">weave</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">by_row</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">array([[0, 1, 2, 3, 7, 6, 5, 4],</span>
<span class="go">       [4, 5, 6, 7, 3, 2, 1, 0]])</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">weave</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<span class="go">array([[0, 1, 2, 3],</span>
<span class="go">       [4, 5, 6, 7],</span>
<span class="go">       [7, 6, 5, 4],</span>
<span class="go">       [3, 2, 1, 0]])</span>
<span class="gp">... </span><span class="mi">3</span><span class="n">D</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span>  <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="ow">and</span> <span class="n">b</span>         <span class="n">weave</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>   <span class="n">weave</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<span class="go">array([[[0, 1],     array([[[0, 1],      array([[[0, 1, 7, 6],</span>
<span class="go">        [2, 3]],            [2, 3],              [2, 3, 5, 4]],</span>
<span class="gp">... </span>                        <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>      <span class="o">...</span>
<span class="go">       [[4, 5],             [5, 4]],            [[4, 5, 3, 2],</span>
<span class="go">        [6, 7]]])       ...                      [6, 7, 1, 0]]])</span>
<span class="gp">... </span>                       <span class="p">[[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
<span class="go">array([[[7, 6],             [6, 7],</span>
<span class="go">        [5, 4]],            [3, 2],</span>
<span class="gp">... </span>                        <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]])</span>
<span class="go">       [[3, 2],</span>
<span class="go">        [1, 0]]])     Notice the positions of first blocks (0,1,2,3)</span>
<span class="gp">... </span> <span class="n">get</span> <span class="n">it</span> <span class="n">now</span>       <span class="ow">and</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span> <span class="n">when</span> <span class="n">weaving</span> <span class="n">by</span> <span class="n">row</span> <span class="ow">or</span> <span class="n">column</span><span class="o">.</span>
</pre></div>
</div>
<p class="rubric">References</p>
<p><a class="reference external" href="https://stackoverflow.com/questions/5347065/interweaving-two-numpy-arrays">https://stackoverflow.com/questions/5347065/interweaving-two-numpy-arrays</a>.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-func docutils literal notranslate"><span class="pre">-()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">np.concatenate()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">-()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">2()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">-()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">2()</span></code></p>
</div>
</dd></dl>

<hr class="docutils" />
</div>
<div class="section" id="statistical-tools-for-stacked-arrays">
<h2>Statistical tools for stacked arrays<a class="headerlink" href="#statistical-tools-for-stacked-arrays" title="Permalink to this headline">¶</a></h2>
<p>Statistics for N-D arrays.</p>
<span class="target" id="module-arraytools.stackstats"></span><p>Script:   stackstats.py</p>
<p>Author:   <a class="reference external" href="mailto:Dan&#46;Patterson&#37;&#52;&#48;carleton&#46;ca">Dan<span>&#46;</span>Patterson<span>&#64;</span>carleton<span>&#46;</span>ca</a></p>
<p>Modified: 2019-01-06</p>
<p>Purpose:  tools for working with numpy arrays</p>
<div class="section" id="requires">
<h3>Requires<a class="headerlink" href="#requires" title="Permalink to this headline">¶</a></h3>
<p>arraytools.tools - nd2struct, stride</p>
<p class="rubric">References</p>
<p><a class="reference external" href="https://community.esri.com/blogs/dan_patterson/2018/02/06/cell-statistics-made-easy-raster-data-over-time">https://community.esri.com/blogs/dan_patterson/2018/02/06/cell-statistics-made-easy-raster-data-over-time</a>.</p>
<dl class="function">
<dt id="arraytools.stackstats.check_shapes">
<code class="descclassname">arraytools.stackstats.</code><code class="descname">check_shapes</code><span class="sig-paren">(</span><em>arrs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/stackstats.html#check_shapes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.stackstats.check_shapes" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the shapes of the arrays to ensure they are all equal</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.stackstats.check_stack">
<code class="descclassname">arraytools.stackstats.</code><code class="descname">check_stack</code><span class="sig-paren">(</span><em>arrs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/stackstats.html#check_stack"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.stackstats.check_stack" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the basic checking of the stack to ensure that a 3D array is
generated</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.stackstats.mask_stack">
<code class="descclassname">arraytools.stackstats.</code><code class="descname">mask_stack</code><span class="sig-paren">(</span><em>arrs</em>, <em>nodata=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/stackstats.html#mask_stack"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.stackstats.mask_stack" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce masks for a 3d array</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.stackstats.stack_sum">
<code class="descclassname">arraytools.stackstats.</code><code class="descname">stack_sum</code><span class="sig-paren">(</span><em>arrs</em>, <em>nodata=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/stackstats.html#stack_sum"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.stackstats.stack_sum" title="Permalink to this definition">¶</a></dt>
<dd><p>see stack_stats</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.stackstats.stack_cumsum">
<code class="descclassname">arraytools.stackstats.</code><code class="descname">stack_cumsum</code><span class="sig-paren">(</span><em>arrs</em>, <em>nodata=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/stackstats.html#stack_cumsum"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.stackstats.stack_cumsum" title="Permalink to this definition">¶</a></dt>
<dd><p>see stack_stats</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.stackstats.stack_prod">
<code class="descclassname">arraytools.stackstats.</code><code class="descname">stack_prod</code><span class="sig-paren">(</span><em>arrs</em>, <em>nodata=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/stackstats.html#stack_prod"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.stackstats.stack_prod" title="Permalink to this definition">¶</a></dt>
<dd><p>see stack_stats</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.stackstats.stack_cumprod">
<code class="descclassname">arraytools.stackstats.</code><code class="descname">stack_cumprod</code><span class="sig-paren">(</span><em>arrs</em>, <em>nodata=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/stackstats.html#stack_cumprod"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.stackstats.stack_cumprod" title="Permalink to this definition">¶</a></dt>
<dd><p>see stack_stats</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.stackstats.stack_min">
<code class="descclassname">arraytools.stackstats.</code><code class="descname">stack_min</code><span class="sig-paren">(</span><em>arrs</em>, <em>nodata=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/stackstats.html#stack_min"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.stackstats.stack_min" title="Permalink to this definition">¶</a></dt>
<dd><p>see stack_stats</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.stackstats.stack_mean">
<code class="descclassname">arraytools.stackstats.</code><code class="descname">stack_mean</code><span class="sig-paren">(</span><em>arrs</em>, <em>nodata=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/stackstats.html#stack_mean"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.stackstats.stack_mean" title="Permalink to this definition">¶</a></dt>
<dd><p>see stack_stats</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.stackstats.stack_median">
<code class="descclassname">arraytools.stackstats.</code><code class="descname">stack_median</code><span class="sig-paren">(</span><em>arrs</em>, <em>nodata=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/stackstats.html#stack_median"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.stackstats.stack_median" title="Permalink to this definition">¶</a></dt>
<dd><p>see stack_stats</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.stackstats.stack_max">
<code class="descclassname">arraytools.stackstats.</code><code class="descname">stack_max</code><span class="sig-paren">(</span><em>arrs</em>, <em>nodata=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/stackstats.html#stack_max"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.stackstats.stack_max" title="Permalink to this definition">¶</a></dt>
<dd><p>see stack_stats</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.stackstats.stack_std">
<code class="descclassname">arraytools.stackstats.</code><code class="descname">stack_std</code><span class="sig-paren">(</span><em>arrs</em>, <em>nodata=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/stackstats.html#stack_std"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.stackstats.stack_std" title="Permalink to this definition">¶</a></dt>
<dd><p>see stack_stats</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.stackstats.stack_var">
<code class="descclassname">arraytools.stackstats.</code><code class="descname">stack_var</code><span class="sig-paren">(</span><em>arrs</em>, <em>nodata=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/stackstats.html#stack_var"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.stackstats.stack_var" title="Permalink to this definition">¶</a></dt>
<dd><p>see stack_stats</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.stackstats.stack_percentile">
<code class="descclassname">arraytools.stackstats.</code><code class="descname">stack_percentile</code><span class="sig-paren">(</span><em>arrs</em>, <em>q=50</em>, <em>nodata=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/stackstats.html#stack_percentile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.stackstats.stack_percentile" title="Permalink to this definition">¶</a></dt>
<dd><p>nanpercentile for an array stack with optional nodata masked</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>arrs</strong> (<em>array-like</em>) – Either a list, tuple of arrays or an array with ndim=3</li>
<li><strong>q</strong> (<em>number</em>) – the percentile</li>
<li><strong>nodata</strong> (<em>number</em>) – nodata value, numeric or np.nan (will upscale integers)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools.stackstats.stack_stats">
<code class="descclassname">arraytools.stackstats.</code><code class="descname">stack_stats</code><span class="sig-paren">(</span><em>arrs</em>, <em>ax=0</em>, <em>nodata=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/stackstats.html#stack_stats"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.stackstats.stack_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>All statistics for arrs.</p>
<ul class="simple">
<li><dl class="first docutils">
<dt>arrs :</dt>
<dd>either a list, tuple of arrays or an array with ndim=3</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>ax :</dt>
<dd>axis, either, 0 (by band) or (1,2) to get a single value for each band</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>nodata :</dt>
<dd>nodata value, numeric or np.nan (will upscale integers)</dd>
</dl>
</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="arraytools.stackstats.stack_stats_tbl">
<code class="descclassname">arraytools.stackstats.</code><code class="descname">stack_stats_tbl</code><span class="sig-paren">(</span><em>arrs</em>, <em>nodata=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/stackstats.html#stack_stats_tbl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.stackstats.stack_stats_tbl" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce the output table</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><ul class="simple">
<li><em>Table of statistical results by band.  The dtype is shown below</em></li>
<li><em>dtype=[(‘Band’, ‘&lt;i4’), (‘N’, ‘&lt;i4’), (‘N_nan’, ‘&lt;i4’), (‘Sum’, ‘&lt;f8’),</em> – (‘Min’, ‘&lt;f8’), (‘Mean’, ‘&lt;f8’), (‘Med’, ‘&lt;f8’), (‘Max’, ‘&lt;f8’),
(‘Std’, ‘&lt;f8’), (‘Var’, ‘&lt;f8’)])</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<hr class="docutils" />
</div>
<div class="section" id="table-operations-for-arrays">
<h2>Table operations for arrays<a class="headerlink" href="#table-operations-for-arrays" title="Permalink to this headline">¶</a></h2>
<p>Arrays as tables.</p>
<span class="target" id="module-arraytools.tbl"></span><div class="section" id="tbl">
<h3>tbl<a class="headerlink" href="#tbl" title="Permalink to this headline">¶</a></h3>
<p>Script :   tbl.py   tools for working with text arrays in table form</p>
<p>Author :   <a class="reference external" href="mailto:Dan&#46;Patterson&#37;&#52;&#48;carleton&#46;ca">Dan<span>&#46;</span>Patterson<span>&#64;</span>carleton<span>&#46;</span>ca</a></p>
<p>Modified : 2019-01-28</p>
<p>Purpose :  Tabulate data</p>
<ul class="simple">
<li>Unique counts on 2 or more variables.</li>
<li>Sums, mins, max etc on variable classes</li>
</ul>
<div class="section" id="id8">
<h4>Requires<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<p><cite>frmts.py</cite> is required since it uses print functions from there</p>
<p><cite>prn</cite> is used for fancy printing if it loads correctly</p>
<p class="rubric">Notes</p>
<p>To convert esri geodatabase tables or shapefile tables to arrays, use the
following guidelines:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">float_min</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">finfo</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float</span><span class="p">)</span><span class="o">.</span><span class="n">min</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">float_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">finfo</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float</span><span class="p">)</span><span class="o">.</span><span class="n">max</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">int_min</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">iinfo</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int_</span><span class="p">)</span><span class="o">.</span><span class="n">min</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">int_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">iinfo</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int_</span><span class="p">)</span><span class="o">.</span><span class="n">max</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="s1">&#39;C:/some/path/your.gdb/your_featureclass&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">null_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Int_fld&#39;</span><span class="p">:</span> <span class="n">int_min</span><span class="p">,</span> <span class="s1">&#39;Float_fld&#39;</span><span class="p">:</span> <span class="n">float_min</span><span class="p">}</span>  <span class="c1"># None stuff</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flds</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Int_field&#39;</span><span class="p">,</span> <span class="s1">&#39;Txt01&#39;</span><span class="p">,</span> <span class="s1">&#39;Txt02&#39;</span><span class="p">]</span>  <span class="c1"># 2 text fields</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">arcpy</span><span class="o">.</span><span class="n">da</span><span class="o">.</span><span class="n">TableToNumPyArray</span><span class="p">(</span><span class="n">in_table</span><span class="o">=</span><span class="n">f</span><span class="p">,</span> <span class="n">field_names</span><span class="o">=</span><span class="n">flds</span><span class="p">,</span>
<span class="go">                                  skip_nulls=False,</span>
<span class="go">                                  null_value=null_dict)  # if needed</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">row</span> <span class="o">=</span> <span class="s1">&#39;Txt01&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">col</span> <span class="o">=</span> <span class="s1">&#39;Txt02&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ctab</span> <span class="o">=</span> <span class="n">crosstab</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Useful tips</strong></p>
<p><cite>…install folder…/Lib/site-packages/numpy/core/numerictypes.py</cite></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># import string is costly to import!</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Construct the translation tables directly</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># A = chr(65), a = chr(97)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_all_chars</span> <span class="o">=</span> <span class="p">[</span><span class="nb">chr</span><span class="p">(</span><span class="n">_m</span><span class="p">)</span> <span class="k">for</span> <span class="n">_m</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">256</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_ascii_upper</span> <span class="o">=</span> <span class="n">_all_chars</span><span class="p">[</span><span class="mi">65</span><span class="p">:</span><span class="mi">65</span><span class="o">+</span><span class="mi">26</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_ascii_lower</span> <span class="o">=</span> <span class="n">_all_chars</span><span class="p">[</span><span class="mi">97</span><span class="p">:</span><span class="mi">97</span><span class="o">+</span><span class="mi">26</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_just_numbers</span> <span class="o">=</span> <span class="n">_all_chars</span><span class="p">[</span><span class="mi">48</span><span class="p">:</span><span class="mi">58</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">LOWER_TABLE</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">_all_chars</span><span class="p">[:</span><span class="mi">65</span><span class="p">]</span> <span class="o">+</span> <span class="n">_ascii_lower</span> <span class="o">+</span> <span class="n">_all_chars</span><span class="p">[</span><span class="mi">65</span><span class="o">+</span><span class="mi">26</span><span class="p">:])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">UPPER_TABLE</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">_all_chars</span><span class="p">[:</span><span class="mi">97</span><span class="p">]</span> <span class="o">+</span> <span class="n">_ascii_upper</span> <span class="o">+</span> <span class="n">_all_chars</span><span class="p">[</span><span class="mi">97</span><span class="o">+</span><span class="mi">26</span><span class="p">:])</span>
</pre></div>
</div>
<ul class="simple">
<li>np.char.split(s, ‘ ‘)</li>
<li>np.char.startswith(s, ‘S’)</li>
<li>np.char.strip()</li>
<li>np.char.str_len(s)</li>
<li>np.sum(np.char.startswith(s, ‘ ‘))  # check for leading spaces</li>
<li>np.sum(np.char.endswith(s0, ‘ ‘))   # check for trailing spaces</li>
<li>s0 = np.char.rstrip(s0)</li>
</ul>
<p>Partitioning:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">lp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">char</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="n">s0</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)[:,</span> <span class="mi">0</span><span class="p">]</span>   <span class="c1"># get the left-most partition</span>
<span class="n">rp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">char</span><span class="o">.</span><span class="n">rpartition</span><span class="p">(</span><span class="n">s0</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)[:,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="c1"># get the right-most partition</span>
<span class="n">lpu</span><span class="p">,</span> <span class="n">lpcnts</span><span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">lp</span><span class="p">,</span> <span class="n">return_counts</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">rpu</span><span class="p">,</span> <span class="n">rpcnts</span><span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">rp</span><span class="p">,</span> <span class="n">return_counts</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">References</p>
<p><a class="reference external" href="https://stackoverflow.com/questions/12983067/how-to-find-unique-vectors-of-a-2d-array-over-a-particular-axis-in-a-vectorized">https://stackoverflow.com/questions/12983067/how-to-find-unique-vectors-of-a-2d-array-over-a-particular-axis-in-a-vectorized</a>.</p>
<p><a class="reference external" href="https://stackoverflow.com/questions/16970982/find-unique-rows-in-numpy-array">https://stackoverflow.com/questions/16970982/find-unique-rows-in-numpy-array</a>.</p>
<p><a class="reference external" href="http://stackoverflow.com/questions/38030054/create-adjacency-matrix-in-python-for-large-dataset">http://stackoverflow.com/questions/38030054/create-adjacency-matrix-in-python-for-large-dataset</a>.</p>
<p>np.unique - in the newer version, they use flags to get the sums</p>
<dl class="function">
<dt id="arraytools.tbl.find_a_in_b">
<code class="descclassname">arraytools.tbl.</code><code class="descname">find_a_in_b</code><span class="sig-paren">(</span><em>a</em>, <em>b</em>, <em>a_fields=None</em>, <em>b_fields=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tbl.html#find_a_in_b"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tbl.find_a_in_b" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the indices of the elements in a smaller 2d array contained in
a larger 2d array. If the arrays are stuctured with field names,then these
need to be specified.  It should go without saying that the dtypes need to
be the same.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>b</strong> (<em>a</em><em>,</em>) – The arrays are arranged so that <cite>a</cite> is the smallest and <cite>b</cite> is the
largest.  If the arrays are stuctured with field names, then these
need to be specified.  It should go without saying that the dtypes
need to be the same.</li>
<li><strong>b_fields</strong> (<em>a_fields</em><em>,</em>) – If the dtype has names, specify these in a list.  Both do not need
names.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>To demonstrate, a small array was made from the last 10 records of a larger
array to check that they could be found.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; a.dtype
``([(&#39;ID&#39;, &#39;&lt;i4&#39;), (&#39;X&#39;, &#39;&lt;f8&#39;), (&#39;Y&#39;, &#39;&lt;f8&#39;), (&#39;Z&#39;, &#39;&lt;f8&#39;)])``
&gt;&gt;&gt; b.dtype ``([(&#39;X&#39;, &#39;&lt;f8&#39;), (&#39;Y&#39;, &#39;&lt;f8&#39;)])``
&gt;&gt;&gt; a.shape, b.shape # ((69688,), (10,))
&gt;&gt;&gt; find_a_in_b(a, b, flds, flds)
array([69678, 69679, 69680, 69681, 69682,
       69683, 69684, 69685, 69686, 69687], dtype=int64)
</pre></div>
</div>
<p class="rubric">References</p>
<p><a class="reference external" href="https://stackoverflow.com/questions/38674027/find-the-row-indexes-of-several-values-in-a-numpy-array/38674038#38674038">https://stackoverflow.com/questions/38674027/find-the-row-indexes-of-several-values-in-a-numpy-array/38674038#38674038</a>.</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.tbl.find_in">
<code class="descclassname">arraytools.tbl.</code><code class="descname">find_in</code><span class="sig-paren">(</span><em>a</em>, <em>col</em>, <em>what</em>, <em>where='in'</em>, <em>any_case=True</em>, <em>pull='all'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tbl.html#find_in"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tbl.find_in" title="Permalink to this definition">¶</a></dt>
<dd><p>Query a recarray/structured array for values</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>a</strong> (<em>recarray/structured array</em>) – Only text columns can be queried</li>
<li><strong>col</strong> (<em>column/field to query</em>) – Only 1 field can be queried at a time for the condition.</li>
<li><strong>what</strong> (<em>string</em><em> or </em><em>number</em>) – The query.  If a number, the field is temporarily converted to a
text representation for the query.</li>
<li><strong>where</strong> (<em>string</em>) – s, i, eq, en …. <cite>st`(arts with), `in</cite>, <a href="#id9"><span class="problematic" id="id10">`</span></a>eq`(ual), <a href="#id11"><span class="problematic" id="id12">`</span></a>en`(ds with)</li>
<li><strong>any_case</strong> (<em>boolean</em>) – True, will find records regardless of <cite>case</cite>, applies to text fields</li>
<li><strong>extract</strong> (<em>text</em><em> or </em><em>list</em>) – <ul>
<li><cite>all</cite>,  extracts all records where the column case is found</li>
<li><cite>list</cite>, extracts the records for only those fields in the list</li>
</ul>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; find_text(a, col=`FULLNAME`, what=`ABBEY`, pull=a.dtype.names[:2])
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools.tbl.tbl_count">
<code class="descclassname">arraytools.tbl.</code><code class="descname">tbl_count</code><span class="sig-paren">(</span><em>a</em>, <em>row=None</em>, <em>col=None</em>, <em>verbose=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tbl.html#tbl_count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tbl.tbl_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Crosstabulate 2 fields data arrays, shape (N,), using np.unique.
scipy.sparse has similar functionality and is faster for large arrays.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>a</strong> (<em>array</em>) – A 2D array of data with shape(N,) representing two variables.</li>
<li><strong>row</strong> (<em>field/column</em>) – The table column/field to use for the row variable</li>
<li><strong>col</strong> (<em>field/column</em>) – The table column/field to use for thecolumn variable</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>See useage section above for converting Arc* tables to arrays.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><ul class="simple">
<li><strong>ctab</strong> (<em>array</em>) – the crosstabulation result as row, col, count array</li>
<li><strong>a</strong> (<em>array</em>) – the crosstabulation in a row, col, count, but filled out whether a
particular combination exists or not.</li>
<li><strong>r, c</strong> (<em>names</em>) – unique values/names for the row and column variables</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools.tbl.tbl_sum">
<code class="descclassname">arraytools.tbl.</code><code class="descname">tbl_sum</code><span class="sig-paren">(</span><em>a</em>, <em>row=None</em>, <em>col=None</em>, <em>val_fld=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tbl.html#tbl_sum"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tbl.tbl_sum" title="Permalink to this definition">¶</a></dt>
<dd><p>Tabular sum of values for two attributes</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>a</strong> (<em>array</em>) – Structured/recarray</li>
<li><strong>col</strong> (<em>row</em><em>,</em>) – The fields to be used as the table rows and columns</li>
<li><strong>val_fld</strong> (<em>string</em>) – The field that will be summed for the unique combinations of
row/column classes</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">A table summarizing the sums for the row/column combinations.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="statistical-tools-for-tabular-arrays">
<h2>Statistical tools for tabular arrays<a class="headerlink" href="#statistical-tools-for-tabular-arrays" title="Permalink to this headline">¶</a></h2>
<p>Statistics for N-D arrays.</p>
<span class="target" id="module-arraytools.tblstats"></span><div class="section" id="tblstats">
<h3>tblstats<a class="headerlink" href="#tblstats" title="Permalink to this headline">¶</a></h3>
<p>Script :   tblstats.py</p>
<p>Author :   <a class="reference external" href="mailto:Dan&#46;Patterson&#37;&#52;&#48;carleton&#46;ca">Dan<span>&#46;</span>Patterson<span>&#64;</span>carleton<span>&#46;</span>ca</a></p>
<p>Modified : 2019-01-06</p>
<p>Purpose :  Descriptive statistics for tables using numpy.</p>
<div class="section" id="references">
<h4>References:<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h4>
<p><a class="reference external" href="https://github.com/numpy/numpy/blob/master/numpy/lib/nanfunctions.py">https://github.com/numpy/numpy/blob/master/numpy/lib/nanfunctions.py</a>.</p>
<p>_replace_nan(a, val) -  mask = np.isnan(a) - to get the mask</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span><span class="p">,</span> <span class="n">mask</span> <span class="o">=</span> <span class="n">_replace_nan</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>  <span class="c1"># for mean</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span> <span class="o">=</span> <span class="n">array</span><span class="p">([</span><span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span>  <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span>  <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">bool</span><span class="p">)</span>
</pre></div>
</div>
<dl class="function">
<dt id="arraytools.tblstats.freq">
<code class="descclassname">arraytools.tblstats.</code><code class="descname">freq</code><span class="sig-paren">(</span><em>a</em>, <em>flds=None</em>, <em>to_array=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tblstats.html#freq"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tblstats.freq" title="Permalink to this definition">¶</a></dt>
<dd><p>Frequency and crosstabulation</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>a</strong> (<em>array</em>) – input structured array</li>
<li><strong>flds</strong> (<em>string</em><em> or </em><em>list</em>) – fields/columns to use in the analysis</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<ol class="arabic simple">
<li>slice the input array by the classification fields</li>
<li>sort the sliced array using the flds as sorting keys</li>
<li>use unique on the sorted array to return the results</li>
<li>reassemble the original columns and the new count data</li>
</ol>
</dd></dl>

<dl class="function">
<dt id="arraytools.tblstats.summ">
<code class="descclassname">arraytools.tblstats.</code><code class="descname">summ</code><span class="sig-paren">(</span><em>a</em>, <em>cls_flds</em>, <em>uniq</em>, <em>sum_flds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tblstats.html#summ"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tblstats.summ" title="Permalink to this definition">¶</a></dt>
<dd><p>sum the input field</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>a</strong> (<em>array</em>) – large array sliced by the classification fields</li>
<li><strong>cls_fields</strong> (<em>fields</em>) – fields to slice the array with</li>
<li><strong>uniq</strong> (<em>string</em>) – unique values to sum on</li>
<li><strong>sum_flds</strong> (<em>string</em><em> or </em><em>list</em>) – The fields to do the sum on</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools.tblstats.skew_kurt">
<code class="descclassname">arraytools.tblstats.</code><code class="descname">skew_kurt</code><span class="sig-paren">(</span><em>a</em>, <em>avg</em>, <em>var_x</em>, <em>std_x</em>, <em>col=True</em>, <em>mom='both'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tblstats.html#skew_kurt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tblstats.skew_kurt" title="Permalink to this definition">¶</a></dt>
<dd><p>Momental and unbiased skewness</p>
<p>Emulates the nan functions approach to calculating these parameters
when data contains nan values.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>a</strong> (<em>array</em>) – an array of float/double values where there are at least 3 non-nan
numbers in each column.  This is not checked since this situation
should never arise in real world data sets that have been checked.</li>
<li><strong>moment</strong> (<em>string</em>) – both, skew or kurt  to return the moments</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">16.</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">masked_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">a</span> <span class="o">==</span> <span class="n">mask</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools.tblstats.col_stats">
<code class="descclassname">arraytools.tblstats.</code><code class="descname">col_stats</code><span class="sig-paren">(</span><em>a</em>, <em>fields=None</em>, <em>deci=2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tblstats.html#col_stats"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tblstats.col_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate statistics for a structured/recarray with or without specified
fields.  Efforts have been made to check for all possible scenarios, but
human intelligence should prevail when one decides what to throw at it.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">dtype</span><span class="o">.</span><span class="n">names</span>  <span class="c1"># to return a list of field names</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">col_stats</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="s1">&#39;A&#39;</span><span class="p">)</span>  <span class="c1"># run with field &#39;A&#39;, must be integer/float</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">col_stats</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">])</span>  <span class="c1"># both fields checked</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>a</strong> (<em>array</em>) – A structured/recarray</li>
<li><strong>fields</strong> (<em>list</em><em>, </em><em>string</em><em> or </em><em>None</em>) – <ul>
<li>None,  checks all fields or assumes that the input array is a singleton</li>
<li>string, a single field name, if the column names are known</li>
<li>list,  a list of field names</li>
</ul>
</li>
<li><strong>deci</strong> (<em>integer</em>) – an attempt to format floats with deci(mal) places</li>
<li><strong>Requires</strong> – </li>
<li><strong>--------</strong> – </li>
<li><strong>_numeric_fields_</strong> (<em>function</em>) – returns the numeric fields in a structured/recarray</li>
<li><strong>_calc_stats</strong> (<em>function</em>) – performs the actual field calculations</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools.tblstats.group_stats">
<code class="descclassname">arraytools.tblstats.</code><code class="descname">group_stats</code><span class="sig-paren">(</span><em>a</em>, <em>case_fld=None</em>, <em>num_flds=None</em>, <em>deci=2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tblstats.html#group_stats"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tblstats.group_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Group column statistics.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>a</strong> (<em>structured/recarray</em>) – Make sure that you know the field names in advance</li>
<li><strong>case_fld</strong> (<em>string</em><em>, </em><em>list</em>) – String,  summarized by the unique values in the case_fld.
List, to further fine-tune the selection or crosstabulation</li>
<li><strong>num_flds</strong> (<em>string</em><em>, </em><em>list</em>) – You can limit the input fields accordingly, if you only need a few
know numeric fields.</li>
<li><strong>Requires</strong> – </li>
<li><strong>--------</strong> – </li>
<li><strong>col_stats</strong> (<em>function ... which requires</em>) – <dl class="docutils">
<dt>: _numeric_fields_ <span class="classifier-delimiter">:</span> <span class="classifier">function</span></dt>
<dd>returns the numeric fields in a structured/recarray</dd>
<dt>: _calc_stats <span class="classifier-delimiter">:</span> <span class="classifier">function</span></dt>
<dd>performs the actual field calculations</dd>
</dl>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="main-array-tools">
<h2>main array tools<a class="headerlink" href="#main-array-tools" title="Permalink to this headline">¶</a></h2>
<p>A large collection of tools for working with arrays.</p>
<span class="target" id="module-arraytools.tools"></span><p>Script :   tools.py</p>
<p>Author :   <a class="reference external" href="mailto:Dan_Patterson&#37;&#52;&#48;carleton&#46;ca">Dan_Patterson<span>&#64;</span>carleton<span>&#46;</span>ca</a></p>
<p>Modified : 2019-01-06</p>
<p>Purpose :  tools for working with numpy arrays</p>
<dl class="function">
<dt id="arraytools.tools.arr2xyz">
<code class="descclassname">arraytools.tools.</code><code class="descname">arr2xyz</code><span class="sig-paren">(</span><em>a</em>, <em>keep_masked=False</em>, <em>verbose=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tools.html#arr2xyz"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tools.arr2xyz" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce an array such that the row, column values are used for x,y
and array values for z.  Masked arrays are sorted.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><ul class="simple">
<li><em>A mesh grid with values, dimensions and shapes are changed so</em></li>
<li><em>that ndim=2, ie shape(3,4,5), ndim=3 becomes shape(12,5), ndim=2</em></li>
<li><em>::</em> – #&gt;&gt;&gt; a = np.arange(9).reshape(3, 3)
#array([[0, 1, 2],
#       [3, 4, 5],
#       [6, 7, 8]])
#&gt;&gt;&gt; arr2xyz(am, keep_masked=True)   # keep the masked values…
#masked_array(data =
#[[0 0 0]
# [1 0 -]
# [2 0 2]
# [0 1 -]
# [1 1 4]
# [2 1 -]
# [0 2 6]
# [1 2 7]
# [2 2 8]],
#         mask =
# [[False False False]… snip
# [False False False]],
#       fill_value = 999999)
#&gt;&gt;&gt;
#&gt;&gt;&gt; arr2xyz(am, keep_masked=False)  # remove the masked values
#array([[0, 0, 0],
#       [2, 0, 2],
#       [1, 1, 4],
#       [0, 2, 6],
#       [1, 2, 7],
#       [2, 2, 8]])</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#arraytools.tools.xy_vals" title="arraytools.tools.xy_vals"><code class="xref py py-func docutils literal notranslate"><span class="pre">xy_vals()</span></code></a>, <code class="xref py py-func docutils literal notranslate"><span class="pre">num_to_mask()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">to()</span></code></p>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools.tools.make_blocks">
<code class="descclassname">arraytools.tools.</code><code class="descname">make_blocks</code><span class="sig-paren">(</span><em>rows=3</em>, <em>cols=3</em>, <em>r=2</em>, <em>c=2</em>, <em>dt='int'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tools.html#make_blocks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tools.make_blocks" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a block array with rows * cols containing r*c sub windows.
Specify the rows, columns, then the block size as r, c and dtype
Use <cite>scale</cite>, if you want specific values during array construction.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>rows</strong> (<em>integer</em>) – rows in initial array</li>
<li><strong>cols</strong> (<em>integer</em>) – columns in the initial array</li>
<li><strong>r</strong> (<em>integer</em>) – rows in sub window</li>
<li><strong>c</strong> (<em>integer</em>) – columns in sub window</li>
<li><strong>dt</strong> (<em>np.dtype</em>) – array data type</li>
<li><strong>Returns</strong> – </li>
<li><strong>--------</strong> – </li>
<li><strong>defaults produce an 8 column by 8 row array numbered from</strong> (<em>The</em>) – </li>
<li><strong>to</strong><strong> (</strong><strong>rows*cols</strong><strong>) </strong><strong>- 1</strong> (<em>0</em>) – </li>
<li><strong>array.shape =</strong><strong> (</strong><strong>rows * r</strong><strong>, </strong><strong>cols * c</strong><strong>)  </strong><strong>#</strong><strong> (</strong><strong>6</strong><strong>, </strong><strong>6</strong><strong>)</strong> (<em>&gt;&gt;&gt;</em>) – </li>
<li><strong>make_blocks</strong><strong>(</strong><strong>rows=3</strong><strong>, </strong><strong>cols=3</strong><strong>, </strong><strong>r=2</strong><strong>, </strong><strong>c=2</strong><strong>, </strong><strong>dt='int'</strong><strong>)</strong> (<em>&gt;&gt;&gt;</em>) – </li>
<li><strong>0</strong><strong>, </strong><strong>1</strong><strong>, </strong><strong>1</strong><strong>, </strong><strong>2</strong><strong>, </strong><strong>2</strong><strong>]</strong><strong>,</strong> (<em>array</em><em>(</em><em>[</em><em>[</em><em>0</em><em>,</em>) – [0, 0, 1, 1, 2, 2],
[3, 3, 4, 4, 5, 5],
[3, 3, 4, 4, 5, 5],
[6, 6, 7, 7, 8, 8],
[6, 6, 7, 7, 8, 8]])</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools.tools.group_vals">
<code class="descclassname">arraytools.tools.</code><code class="descname">group_vals</code><span class="sig-paren">(</span><em>seq</em>, <em>delta=0</em>, <em>oper='!='</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tools.html#group_vals"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tools.group_vals" title="Permalink to this definition">¶</a></dt>
<dd><p>Group consecutive values separated by no more than delta</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>seq</strong> (<em>array</em><em>, </em><em>list tuple</em>) – sequence of values</li>
<li><strong>delta</strong> (<em>number</em>) – difference between consecutive values</li>
<li><strong>oper</strong> (<em>string</em>) – ‘eq’, ‘==’, ‘ne’, ‘!=’, ‘gt’, ‘&gt;’, ‘lt’, ‘&lt;’</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<p><a class="reference external" href="https://stackoverflow.com/questions/7352684/how-to-find-the-groups-of-consecutive-elements-from-an-array-in-numpy">https://stackoverflow.com/questions/7352684/how-to-find-the-groups-of-consecutive-elements-from-an-array-in-numpy</a>.</p>
<p class="rubric">Notes</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">group_vals</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">oper</span><span class="o">=</span><span class="s1">&#39;!=&#39;</span><span class="p">)</span>  <span class="c1"># sequential difference !=0</span>
<span class="go">[array([1, 1, 1]), array([2, 2]), array([3]), array([1, 1, 1])]</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="#arraytools.tools.split_array" title="arraytools.tools.split_array"><code class="xref py py-func docutils literal notranslate"><span class="pre">split_array()</span></code></a></dt>
<dd>form structured or recarrays</dd>
</dl>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools.tools.reclass">
<code class="descclassname">arraytools.tools.</code><code class="descname">reclass</code><span class="sig-paren">(</span><em>a</em>, <em>bins=None</em>, <em>new_bins=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tools.html#reclass"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tools.reclass" title="Permalink to this definition">¶</a></dt>
<dd><p>Reclass an array of integer or floating point values.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>bins</strong> (<em>list/tuple</em>) – sequential list/array of the lower limits of each class
include one value higher to cover the upper range.</li>
<li><strong>new_bins</strong> (<em>list/tuple</em>) – new class values for each bin</li>
<li><strong>mask</strong> (boolean <strong>deferred</strong>) – whether the raster contains nodata values or values to
be masked with mask_val</li>
<li><strong>mask_val</strong> (number <strong>deferred</strong>) – value to be masked</li>
<li><strong>dimensions will be squeezed.</strong> (<em>Array</em>) – </li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<p>inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
<span class="n">bins</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">]</span>
<span class="n">new_bins</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="n">z_recl</span> <span class="o">=</span> <span class="n">reclass</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">bins</span><span class="p">,</span> <span class="n">new_bins</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">mask_val</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<p>outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">==&gt;</span> <span class="o">....</span> <span class="n">z</span>                     <span class="o">==&gt;</span> <span class="o">....</span> <span class="n">z_recl</span>
<span class="n">array</span><span class="p">([[</span> <span class="mi">0</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">2</span><span class="p">,</span>  <span class="mi">3</span><span class="p">,</span>  <span class="mi">4</span><span class="p">],</span>   <span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
       <span class="p">[</span> <span class="mi">5</span><span class="p">,</span>  <span class="mi">6</span><span class="p">,</span>  <span class="mi">7</span><span class="p">,</span>  <span class="mi">8</span><span class="p">,</span>  <span class="mi">9</span><span class="p">],</span>          <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
       <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">]])</span>         <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools.tools.scale">
<code class="descclassname">arraytools.tools.</code><code class="descname">scale</code><span class="sig-paren">(</span><em>a</em>, <em>x=2</em>, <em>y=2</em>, <em>num_z=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tools.html#scale"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tools.scale" title="Permalink to this definition">¶</a></dt>
<dd><p>Scale the input array repeating the array values up by the
x and y factors.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>a</strong> (<em>An ndarray</em><em>, </em><em>1D arrays will be upcast to 2D.</em>) – </li>
<li><strong>y</strong> (<em>x</em>) – </li>
<li><strong>be greater than 2.</strong> (<em>must</em>) – </li>
<li><strong>num_z</strong> (<em>For 3D</em><em>, </em><em>produces the 3rd dimension</em><em>, </em><em>ie. if num_z = 3 with the</em>) – </li>
<li><strong>you will get an array with shape=</strong><strong>(</strong><strong>3</strong><strong>, </strong><strong>6</strong><strong>, </strong><strong>6</strong><strong>)</strong><strong>,</strong> (<em>defaults</em><em>,</em>) – </li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">scale</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="go">array([[0, 0, 1, 1, 2, 2],</span>
<span class="go">       [0, 0, 1, 1, 2, 2],</span>
<span class="go">       [3, 3, 4, 4, 5, 5],</span>
<span class="go">       [3, 3, 4, 4, 5, 5]])</span>
</pre></div>
</div>
<p class="rubric">Notes</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="go">array([[0, 1],</span>
<span class="go">       [2, 3]])</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">frmt_</span><span class="p">(</span><span class="n">scale</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">num_z</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
<span class="go">Array... shape (3, 4, 4), ndim 3, not masked</span>
<span class="go">  0, 0, 1, 1    0, 0, 1, 1    0, 0, 1, 1</span>
<span class="go">  0, 0, 1, 1    0, 0, 1, 1    0, 0, 1, 1</span>
<span class="go">  2, 2, 3, 3    2, 2, 3, 3    2, 2, 3, 3</span>
<span class="go">  2, 2, 3, 3    2, 2, 3, 3    2, 2, 3, 3</span>
<span class="go">  sub (0)       sub (1)       sub (2)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools.tools.split_array">
<code class="descclassname">arraytools.tools.</code><code class="descname">split_array</code><span class="sig-paren">(</span><em>a</em>, <em>fld='ID'</em>, <em>ordered=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tools.html#split_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tools.split_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Split a structured or recarray array using unique values in the
<cite>fld</cite> field.  It is assumed that there is a sequential ordering to
the values in the field.  If there is not, use np.where in conjunction
with np.unique or sort the array first.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>a</strong> (<em>A structured</em><em> or </em><em>recarray.</em>) – </li>
<li><strong>fld</strong> (<em>A numeric field assumed to be sorted which indicates which group</em>) – </li>
<li><strong>record belongs to.</strong> (<em>a</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">A list of arrays split on the categorizing field</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools.tools.make_flds">
<code class="descclassname">arraytools.tools.</code><code class="descname">make_flds</code><span class="sig-paren">(</span><em>n=2</em>, <em>as_type='float'</em>, <em>names=None</em>, <em>def_name='col'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tools.html#make_flds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tools.make_flds" title="Permalink to this definition">¶</a></dt>
<dd><p>Create float or integer fields for statistics and their names.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>n</strong> (<em>integer</em>) – number of fields to create excluding the names field</li>
<li><strong>def_name</strong> (<em>string</em>) – base name to use, numeric values will be produced for each dimension
for the 3D array, ie Values_00… Values_nn</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>a dtype</strong> (<em>which contains the necessary fields to contain the values.</em>)</li>
<li><em>&gt;&gt;&gt; from numpy.lib._iotools import easy_dtype as easy</em></li>
<li><em>&gt;&gt;&gt; make_flds(n=1, as_type=’float’, names=None, def_name=”col”)</em></li>
<li><em>dtype([(‘col_00’, ‘&lt;f8’)])</em></li>
<li><em>&gt;&gt;&gt; make_flds(n=2, as_type=’int’, names=[‘f01’, ‘f02’], def_name=”col”)</em></li>
<li><em>dtype([(‘f01’, ‘&lt;i8’), (‘f02’, ‘&lt;i8’)])</em></li>
<li><em>Don’t forget the above, a cool way to create fields quickly</em></li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools.tools.nd_rec">
<code class="descclassname">arraytools.tools.</code><code class="descname">nd_rec</code><span class="sig-paren">(</span><em>a</em>, <em>flds=None</em>, <em>types=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tools.html#nd_rec"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tools.nd_rec" title="Permalink to this definition">¶</a></dt>
<dd><p>Change a uniform array to an array of mixed dtype as a recarray</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>flds</strong> (<em>string</em><em> or </em><em>None</em>) – flds=’a, b, c’</li>
<li><strong>types</strong> (<em>string</em><em> or </em><em>None</em>) – types=’U8, f8, i8’</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="#arraytools.tools.nd_struct" title="arraytools.tools.nd_struct"><code class="xref py py-func docutils literal notranslate"><span class="pre">nd_struct()</span></code></a></dt>
<dd>alternate using lists rather than string inputs</dd>
</dl>
</div>
<p class="rubric">Notes</p>
<p>The a.T turns the columns to rows so that each row can be assigned a
separate data type.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a_r</span> <span class="o">=</span> <span class="n">nd_rec</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">flds</span><span class="o">=</span><span class="s1">&#39;a, b, c&#39;</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="s1">&#39;U8, f8, i8&#39;</span><span class="p">)</span>
<span class="go">a_r</span>
<span class="go">rec.array([(&#39;0&#39;,  1., 2), (&#39;3&#39;,  4., 5), (&#39;6&#39;,  7., 8)],</span>
<span class="go">   dtype=[(&#39;a&#39;, &#39;&lt;U8&#39;), (&#39;b&#39;, &#39;&lt;f8&#39;), (&#39;c&#39;, &#39;&lt;i8&#39;)])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools.tools.nd_struct">
<code class="descclassname">arraytools.tools.</code><code class="descname">nd_struct</code><span class="sig-paren">(</span><em>a</em>, <em>flds=None</em>, <em>types=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tools.html#nd_struct"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tools.nd_struct" title="Permalink to this definition">¶</a></dt>
<dd><p>Change an array with uniform dtype to an array of mixed dtype as a
structured array.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>flds</strong> (<em>list</em><em> or </em><em>None</em>) – flds=[‘A’, ‘B’, ‘C’]</li>
<li><strong>types</strong> (<em>list</em><em> or </em><em>None</em>) – types=[‘U8’, ‘f8’, ‘i8’]</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-func docutils literal notranslate"><span class="pre">-()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">-()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">names()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">-()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">fld_name()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">but()</span></code></p>
</div>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a_s</span> <span class="o">=</span> <span class="n">nd_struct</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">flds</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">],</span> <span class="n">types</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;U8&#39;</span><span class="p">,</span> <span class="s1">&#39;f8&#39;</span><span class="p">,</span> <span class="s1">&#39;i8&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a_s</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">array</span><span class="p">([(</span><span class="s1">&#39;0&#39;</span><span class="p">,</span>  <span class="mf">1.</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;3&#39;</span><span class="p">,</span>  <span class="mf">4.</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;6&#39;</span><span class="p">,</span>  <span class="mf">7.</span><span class="p">,</span> <span class="mi">8</span><span class="p">)],</span>
<span class="gp">&gt;&gt;&gt; </span>      <span class="n">dtype</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;U8&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;f8&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;i8&#39;</span><span class="p">)])</span>
</pre></div>
</div>
<p>Timing of nd_rec and nd_struct:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="o">%</span><span class="n">timeit</span> <span class="n">nd_rec</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">flds</span><span class="o">=</span><span class="s1">&#39;a, b, c&#39;</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="s1">&#39;U8, f8, i8&#39;</span><span class="p">)</span>
<span class="go">465 µs ± 53 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="o">%</span><span class="n">timeit</span> <span class="n">nd_struct</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">flds</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">],</span> <span class="n">types</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;U8&#39;</span><span class="p">,</span> <span class="s1">&#39;f8&#39;</span><span class="p">,</span> <span class="s1">&#39;i8&#39;</span><span class="p">])</span>
<span class="go">253 µs ± 27.1 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools.tools.nd2struct">
<code class="descclassname">arraytools.tools.</code><code class="descname">nd2struct</code><span class="sig-paren">(</span><em>a</em>, <em>fld_names=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tools.html#nd2struct"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tools.nd2struct" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a view of an ndarray as structured array with a uniform dtype.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>a</strong> (<em>array</em>) – ndarray with a uniform dtype.</li>
<li><strong>fld_names</strong> (<em>list/tuple</em>) – One name for each column/field.  If none are provided, then the field
names are assigned from an alphabetical list up to 26 fields.
The dtype of the input array is retained, but can be upcast.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="go">array([[0, 1, 2],</span>
<span class="go">       [3, 4, 5]])  # dtype(&#39;int64&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">nd2struct</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">array([(0, 1, 2), (3, 4, 5)],</span>
<span class="go">      dtype=[(&#39;A&#39;, &#39;&lt;i8&#39;), (&#39;B&#39;, &#39;&lt;i8&#39;), (&#39;C&#39;, &#39;&lt;i8&#39;)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">nd2struct</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">))</span>
<span class="go">array([( 0.,  1.,  2.), ( 3.,  4.,  5.)],</span>
<span class="go">      dtype=[(&#39;A&#39;, &#39;&lt;f8&#39;), (&#39;B&#39;, &#39;&lt;f8&#39;), (&#39;C&#39;, &#39;&lt;f8&#39;)])</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-func docutils literal notranslate"><span class="pre">-()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">names()</span></code></p>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools.tools.nd2rec">
<code class="descclassname">arraytools.tools.</code><code class="descname">nd2rec</code><span class="sig-paren">(</span><em>a</em>, <em>fld_names=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tools.html#nd2rec"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tools.nd2rec" title="Permalink to this definition">¶</a></dt>
<dd><p>Shell to nd2struct but yielding a recarray.</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.tools.rc_vals">
<code class="descclassname">arraytools.tools.</code><code class="descname">rc_vals</code><span class="sig-paren">(</span><em>a</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tools.html#rc_vals"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tools.rc_vals" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert array to rcv, for 2D arrays.  See xy_val for details.</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.tools.xy_vals">
<code class="descclassname">arraytools.tools.</code><code class="descname">xy_vals</code><span class="sig-paren">(</span><em>a</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tools.html#xy_vals"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tools.xy_vals" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert array to xyz, for 2D arrays</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>a</strong> (<em>array</em>) – 2D array of values</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><ul class="simple">
<li><em>Triplets of x, y and vals as an nx3 array</em></li>
<li><em>&gt;&gt;&gt; a = np.random.randint(1,5,size=(2,4))</em></li>
<li><em>&gt;&gt;&gt; a</em></li>
<li><em>array([[4, 1, 4, 3],</em> – [2, 3, 1, 3]])</li>
<li><em>&gt;&gt;&gt; xy_val(a)</em></li>
<li><em>array([(0, 0, 4), (1, 0, 1), (2, 0, 4), (3, 0, 3),</em> –  (0, 1, 2), (1, 1, 3), (2, 1, 1), (3, 1, 3)],
dtype=[(‘X’, ‘&lt;i8’), (‘Y’, ‘&lt;i8’), (‘Val’, ‘&lt;i4’)])</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools.tools.arrays_struct">
<code class="descclassname">arraytools.tools.</code><code class="descname">arrays_struct</code><span class="sig-paren">(</span><em>arrs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tools.html#arrays_struct"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tools.arrays_struct" title="Permalink to this definition">¶</a></dt>
<dd><p>Stack arrays of any dtype to form a structured array, stacked in
columns format.</p>
<p>fix</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.tools.change_arr">
<code class="descclassname">arraytools.tools.</code><code class="descname">change_arr</code><span class="sig-paren">(</span><em>a</em>, <em>order=None</em>, <em>prn=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tools.html#change_arr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tools.change_arr" title="Permalink to this definition">¶</a></dt>
<dd><p>Reorder and/or drop columns in an ndarray or structured array.</p>
<p>Fields not included will be dropped in the output array.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>order</strong> (<em>list of field names</em><em> or </em><em>order numbers</em>) – fields in the order that you want them</li>
<li><strong>prn</strong> (<em>boolean</em>) – True, prints additional information prior to returning the array</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<dl class="docutils">
<dt>reorder fields <span class="classifier-delimiter">:</span> <span class="classifier">[‘a’, ‘c’, ‘b’]</span></dt>
<dd>For a structured/recarray, the desired field order is required.
An ndarray, not using named fields, will require the numerical
order of the fields.</dd>
<dt>remove fields <span class="classifier-delimiter">:</span> <span class="classifier">[‘a’, ‘c’]   …  <cite>b</cite> is dropped</span></dt>
<dd>To remove fields, simply leave them out of the list.  The
order of the remaining fields will be reflected in the output.
This is a convenience function…. see the module header for
one-liner syntax.</dd>
<dt>Tip :</dt>
<dd>Use… <cite>arraytools._base_functions.arr_info(a, verbose=True)</cite>
This gives field names which can be copied for use here.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="arraytools.tools.concat_arrs">
<code class="descclassname">arraytools.tools.</code><code class="descname">concat_arrs</code><span class="sig-paren">(</span><em>arrs</em>, <em>sep=' '</em>, <em>name=None</em>, <em>with_ids=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tools.html#concat_arrs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tools.concat_arrs" title="Permalink to this definition">¶</a></dt>
<dd><p>Concatenate a sequence of arrays to string format and return a
structured array or ndarray</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>arrs</strong> (<em>list</em>) – A list of single arrays of the same length</li>
<li><strong>sep</strong> (<em>string</em>) – The separator between lists</li>
<li><strong>name</strong> (<em>string</em>) – A default name used for constructing the array field names.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools.tools.pad_">
<code class="descclassname">arraytools.tools.</code><code class="descname">pad_</code><span class="sig-paren">(</span><em>a</em>, <em>pad_with=None</em>, <em>size=(1</em>, <em>1)</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tools.html#pad_"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tools.pad_" title="Permalink to this definition">¶</a></dt>
<dd><p>To use when padding a strided array for window construction.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>pad_with</strong> (<em>number</em>) – Options for number types</li>
<li><strong>ints</strong> (<em>-</em>) – </li>
<li><strong>float</strong> (<em>-</em>) – </li>
<li><strong>size</strong> (<em>list/tuple</em>) – Size of padding on sides in cells.</li>
<li><strong>2D</strong> (<em>-</em>) – </li>
<li><strong>3D</strong> (<em>-</em>) – </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools.tools.stride">
<code class="descclassname">arraytools.tools.</code><code class="descname">stride</code><span class="sig-paren">(</span><em>a</em>, <em>win=(3</em>, <em>3)</em>, <em>stepby=(1</em>, <em>1)</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tools.html#stride"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tools.stride" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide a 2D sliding/moving view of an array.
There is no edge correction for outputs. Use the <cite>pad_</cite> function first.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>as_strided</strong> (<em>function</em>) – from numpy.lib.stride_tricks import as_strided</li>
<li><strong>a</strong> (<em>array</em><em> or </em><em>list</em>) – Usually a 2D array.  Assumes rows &gt;=1, it is corrected as is the
number of columns.</li>
<li><strong>stepby</strong> (<em>win</em><em>,</em>) – tuple/list/array of window strides by dimensions</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>:param Recommendations:::</dt>
<dd><ul class="first last simple">
<li>1D - (3,)       (1,)       3 elements, step by 1</li>
<li>2D - (3, 3)     (1, 1)     3x3 window, step by 1 rows and col.</li>
<li>3D - (1, 3, 3)  (1, 1, 1)  1x3x3, step by 1 row, col, depth</li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># stride(a, (3,), (1,)) 3 value moving window, step by 1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stride</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="p">(</span><span class="mi">3</span><span class="p">,),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,))</span>
<span class="go">array([[0, 1, 2],</span>
<span class="gp">... </span>   <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
<span class="gp">... </span>   <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
<span class="gp">... </span>   <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">6</span><span class="o">*</span><span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stride</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>  <span class="c1"># sliding window</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stride</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>  <span class="c1"># block an array</span>
</pre></div>
</div>
<p class="rubric">Notes</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">product</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="o">==</span> <span class="n">a</span><span class="o">.</span><span class="n">size</span>   <span class="c1"># shape product equals array size</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># To check if the base array and the strided version share memory</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">may_share_memory</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">a_s</span><span class="p">)</span>     <span class="c1"># True</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools.tools.block">
<code class="descclassname">arraytools.tools.</code><code class="descname">block</code><span class="sig-paren">(</span><em>a</em>, <em>win=(3</em>, <em>3)</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tools.html#block"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tools.block" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls stride with step_by equal to win size.
No padding of the array, so this works best when win size is divisible
in both directions</p>
<p>See block_arr if you want padding</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.tools.sliding_window_view">
<code class="descclassname">arraytools.tools.</code><code class="descname">sliding_window_view</code><span class="sig-paren">(</span><em>a</em>, <em>shape=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tools.html#sliding_window_view"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tools.sliding_window_view" title="Permalink to this definition">¶</a></dt>
<dd><p>Create rolling window views of the 2D array with the given shape.
proposed for upcoming numpy version.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>a</strong> (<em>2D array</em>) – </li>
<li><strong>shape</strong> (<em>tuple</em>) – window size. eg. (3, 3), (2, 2) etc</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<p><a class="reference external" href="https://github.com/numpy/numpy/pull/10771">https://github.com/numpy/numpy/pull/10771</a>.</p>
<p><a class="reference external" href="https://github.com/scikit-image/scikit-image/blob/master/skimage/util/shape.py#L107">https://github.com/scikit-image/scikit-image/blob/master/skimage/util/shape.py#L107</a>.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-func docutils literal notranslate"><span class="pre">view_as_windows()</span></code></p>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools.tools.block_arr">
<code class="descclassname">arraytools.tools.</code><code class="descname">block_arr</code><span class="sig-paren">(</span><em>a, win=[3, 3], nodata=-1, as_masked=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tools.html#block_arr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tools.block_arr" title="Permalink to this definition">¶</a></dt>
<dd><p>Block array into window sized chunks padding to the right and bottom
to accommodate array and window shape.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>a</strong> (<em>array</em>) – 2D array</li>
<li><strong>win</strong> (<em>[</em><em>integer</em><em>, </em><em>integer</em><em>]</em>) – [rows, cols], aka y,x, m,n sized window</li>
<li><strong>nodata</strong> (<em>number</em>) – to use for the mask</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">The padded array and the masked array blocked.</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<p><a class="reference external" href="http://stackoverflow.com/questions/40275876/how-to-reshape-this-image-array-in-python">http://stackoverflow.com/questions/40275876/how-to-reshape-this-image-array-in-python</a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">block_2</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">blocks</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="go">        B = blocks # Blocksize</span>
<span class="go">        m, n = a.shape</span>
<span class="go">        out = a.reshape(m//B, B, n//B, B).swapaxes(1, 2).reshape(-1, B, B)</span>
<span class="go">        return out</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools.tools.rolling_stats">
<code class="descclassname">arraytools.tools.</code><code class="descname">rolling_stats</code><span class="sig-paren">(</span><em>a</em>, <em>no_null=True</em>, <em>prn=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tools.html#rolling_stats"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tools.rolling_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Statistics on the last two dimensions of an array.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>a</strong> (<em>array</em>) – 4D array  Note, use ‘stride’ above to obtain rolling stats</li>
<li><strong>no_null</strong> (<em>boolean</em>) – Whether to use masked values (nan) or not.</li>
<li><strong>prn</strong> (<em>boolean</em>) – To print the results or return the values.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><p class="first"><em>The results return an array of 4 dimensions representing the original 2D</em></p>
</li>
<li><p class="first"><em>array size and block size.  An original 6x6 array will be broken into</em></p>
</li>
<li><p class="first"><em>block 4 3x3 chunks</em></p>
</li>
<li><p class="first"><em>::</em> –</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">array</span><span class="p">([[</span> <span class="mi">0</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">2</span><span class="p">,</span>  <span class="mi">3</span><span class="p">],</span>  <span class="c1"># 2D array</span>
<span class="go">           [ 4,  5,  6,  7],</span>
<span class="go">           [ 8,  9, 10, 11],</span>
<span class="go">           [12, 13, 14, 15]])</span>
<span class="go">Array... ndim 4  shape(2, 2, 2, 2)  # blocked into 2x2</span>
<span class="go">|  0  1    2  3 |</span>
<span class="go">|  4  5    6  7 |</span>
<span class="go">|=&gt; (0 2 2 2)</span>
<span class="go">|  8  9   10 11 |</span>
<span class="go">| 12 13   14 15 |</span>
<span class="go">|=&gt; (1 2 2 2)</span>
</pre></div>
</div>
</li>
<li><p class="first"><em>&gt;&gt;&gt; rolling_stats(c)</em></p>
</li>
<li><p class="first"><em>Min…     Max…    Mean…        Med…         Sum…</em></p>
</li>
<li><p class="first"><em>[[ 0  2]   [[ 5  7]  [[ 2.5  4.5]   [[ 2.5  4.5]   [[10 18]</em> – [ 8 10]]   [13 15]]  [10.5 12.5]]   [10.5 12.5]]   [42 50]]</p>
</li>
<li><p class="first"><em>Std…         Var…         Range…</em></p>
</li>
<li><p class="first"><em>[[2.06 2.06]   [[4.25 4.25]   [[5 5]</em> – [2.06 2.06]]   [4.25 4.25]]   [5 5]]</p>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools.tools.find">
<code class="descclassname">arraytools.tools.</code><code class="descname">find</code><span class="sig-paren">(</span><em>a</em>, <em>func</em>, <em>this=None</em>, <em>count=0</em>, <em>keep=None</em>, <em>prn=False</em>, <em>r_lim=2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tools.html#find"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tools.find" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the conditions that are met in an array, defined by <cite>func</cite>.
<cite>this</cite> is the condition being looked for.  The other parameters are defined
in the Parameters section.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">find</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;gt&#39;</span><span class="p">,</span> <span class="n">this</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="go">array([6, 7, 8, 9])</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>a</strong> (<em>Array</em><em> or </em><em>array like.</em>) – </li>
<li><strong>func</strong> (<em>function</em>) – <cite>(cumsum, eq, neq, ls, lseq, gt, gteq, btwn, btwni, byond)</cite>
(        ==,  !=,  &lt;,   &lt;=,  &gt;,   &gt;=,  &gt;a&lt;, =&gt;a&lt;=,  &lt;a&gt; )</li>
<li><strong>count</strong> (<em>integer</em>) – only used for recursive functions</li>
<li><strong>keep</strong> (<em>None</em>) – for future use</li>
<li><strong>prn</strong> (<em>boolean</em>) – True for test printing</li>
<li><strong>max_depth</strong> (<em>integer</em>) – prevent recursive functions running wild, it can be varied</li>
<li><strong>functions</strong> (<em>Recursive</em>) – functions that call themselves</li>
<li><strong>cumsum</strong> – An example of using recursion to split a list/array of data
parsing the results into groups that sum to this.  For example,
split input into groups where the total population is less than
a threshold (this).  The default is to use a sequential list,
however, the inputs could be randomized prior to running.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">A 1D or 2D array meeting the conditions</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arraytools.tools.find_closest">
<code class="descclassname">arraytools.tools.</code><code class="descname">find_closest</code><span class="sig-paren">(</span><em>a</em>, <em>close_to=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tools.html#find_closest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tools.find_closest" title="Permalink to this definition">¶</a></dt>
<dd><p>Change values in an ndarray to match the closest in <cite>close_to</cite>.  This
may be a scalar, or array-like for multiple cases.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>a</strong> (<em>array</em>) – an ndarray of integer or floating point values</li>
<li><strong>close_to</strong> (<em>number</em><em> or </em><em>array-like</em>) – If a number, it will return <cite>close_to</cite> or 0.  If array-like, then the
closest value in <cite>close_to</cite> will be returned</li>
<li><strong>behaviour differs from np.digitize.</strong> (<em>This</em>) – </li>
<li><strong>a = np.array</strong><strong>(</strong><strong>[</strong><strong>0</strong><strong>, </strong><strong>1</strong><strong>, </strong><strong>2</strong><strong>, </strong><strong>3</strong><strong>, </strong><strong>4</strong><strong>, </strong><strong>5</strong><strong>, </strong><strong>6</strong><strong>, </strong><strong>7</strong><strong>, </strong><strong>8</strong><strong>, </strong><strong>9</strong><strong>]</strong><strong>)</strong> (<em>&gt;&gt;&gt;</em>) – </li>
<li><strong>find_closest</strong><strong>(</strong><strong>a</strong><strong>, </strong><strong>close_to=</strong><strong>[</strong><strong>3</strong><strong>, </strong><strong>6</strong><strong>, </strong><strong>9</strong><strong>]</strong><strong>)</strong> (<em>&gt;&gt;&gt;</em>) – </li>
<li><strong>3</strong><strong>, </strong><strong>3</strong><strong>, </strong><strong>3</strong><strong>, </strong><strong>3</strong><strong>, </strong><strong>6</strong><strong>, </strong><strong>6</strong><strong>, </strong><strong>6</strong><strong>, </strong><strong>9</strong><strong>, </strong><strong>9</strong><strong>]</strong><strong>)</strong> (<em>array</em><em>(</em><em>[</em><em>3</em><em>,</em>) – </li>
<li><strong>&gt;&gt;&gt;</strong> – </li>
<li><strong>np.digitize</strong><strong>(</strong><strong>a</strong><strong>, </strong><strong>bins=</strong><strong>[</strong><strong>3</strong><strong>, </strong><strong>6</strong><strong>, </strong><strong>9</strong><strong>]</strong><strong>)</strong> (<em>&gt;&gt;&gt;</em>) – </li>
<li><strong>0</strong><strong>, </strong><strong>0</strong><strong>, </strong><strong>1</strong><strong>, </strong><strong>1</strong><strong>, </strong><strong>1</strong><strong>, </strong><strong>2</strong><strong>, </strong><strong>2</strong><strong>, </strong><strong>2</strong><strong>, </strong><strong>3</strong><strong>]</strong><strong>, </strong><strong>dtype=int64</strong><strong>)</strong> (<em>array</em><em>(</em><em>[</em><em>0</em><em>,</em>) – </li>
<li><strong>arrays with ndim &gt;= 2.</strong> (<em>For</em>) – </li>
<li><strong>a = np.array</strong><strong>(</strong><strong>[</strong><strong>[</strong><strong>3</strong><strong>, </strong><strong>2</strong><strong>, </strong><strong>4</strong><strong>, </strong><strong>3</strong><strong>, </strong><strong>3</strong><strong>]</strong><strong>,</strong> (<em>&gt;&gt;&gt;</em>) – [1, 2, 3, 4, 1],
[2, 4, 4, 1, 1]])</li>
<li><strong>find_closest</strong><strong>(</strong><strong>a</strong><strong>, </strong><strong>close_to=</strong><strong>[</strong><strong>0</strong><strong>, </strong><strong>4</strong><strong>]</strong><strong>)</strong> (<em>&gt;&gt;&gt;</em>) – </li>
<li><strong>0</strong><strong>, </strong><strong>4</strong><strong>, </strong><strong>4</strong><strong>, </strong><strong>4</strong><strong>]</strong><strong>,</strong> (<em>array</em><em>(</em><em>[</em><em>[</em><em>4</em><em>,</em>) – [0, 0, 4, 4, 0],
[0, 4, 4, 0, 0]])</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>If you set close_to to a singleton list you will get unexpected but
correct results because np.isscalar returns the following conditions.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">isscalar</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>    <span class="c1"># True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">isscalar</span><span class="p">([</span><span class="mi">5</span><span class="p">])</span>  <span class="c1"># False</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools.tools.group_pnts">
<code class="descclassname">arraytools.tools.</code><code class="descname">group_pnts</code><span class="sig-paren">(</span><em>a, key_fld='IDs', shp_flds=['Xs', 'Ys']</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tools.html#group_pnts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tools.group_pnts" title="Permalink to this definition">¶</a></dt>
<dd><p>Group points for a feature that has been exploded to points by
<cite>arcpy.da.FeatureClassToNumPyArray</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>a</strong> (<em>array</em>) – A structured array, assuming ID, X, Y, {Z} and whatever else.
The array is assumed to be sorted… which will usually be the case.</li>
<li><strong>key_fld</strong> (<em>string</em>) – Normally this is the <cite>IDs</cite> or similar</li>
<li><strong>shp_flds</strong> (<em>strings</em>) – The fields that are used to produce the geometry.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">See np.unique descriptions below</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<p><a class="reference external" href="https://jakevdp.github.io/blog/2017/03/22/group-by-from-scratch/">https://jakevdp.github.io/blog/2017/03/22/group-by-from-scratch/</a>.
<a class="reference external" href="http://esantorella.com/2016/06/16/groupby/">http://esantorella.com/2016/06/16/groupby/</a>.</p>
<p class="rubric">Notes</p>
<p>split-apply-combine …. that is the general rule</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.tools.uniq">
<code class="descclassname">arraytools.tools.</code><code class="descname">uniq</code><span class="sig-paren">(</span><em>ar</em>, <em>key_flds=None</em>, <em>return_index=False</em>, <em>return_inverse=False</em>, <em>return_counts=False</em>, <em>axis=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tools.html#uniq"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tools.uniq" title="Permalink to this definition">¶</a></dt>
<dd><p>Taken from, but modified for simple axis 0 and 1 and structured
arrays in (N, m) or (N,) format.</p>
<p>To enable determination of unique values in uniform arrays with
uniform dtypes.  np.unique in versions &lt; 1.13 need to use this.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>ar</strong> (<em>array</em>) – If this is a structured array, you can use <cite>key_flds</cite> to control
how uniqueness is determined.</li>
<li><strong>key_flds</strong> (<em>list</em><em> or </em><em>tuple</em>) – Specify fields to slice the input array to determine uniqueness.</li>
<li><strong>unique values are then used to return a slice of the input array.</strong> (<em>The</em>) – </li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<p><a class="reference external" href="https://github.com/numpy/numpy/blob/master/numpy/lib/arraysetops.py">https://github.com/numpy/numpy/blob/master/numpy/lib/arraysetops.py</a>.</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.tools.is_in">
<code class="descclassname">arraytools.tools.</code><code class="descname">is_in</code><span class="sig-paren">(</span><em>arr</em>, <em>look_for</em>, <em>keep_shape=True</em>, <em>binary=True</em>, <em>not_in=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tools.html#is_in"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tools.is_in" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to <cite>np.isin</cite> for numpy versions &lt; 1.13, but with additions to
return the original shaped array with an <cite>int</cite> dtype</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>arr</strong> (<em>array</em>) – the array to check for the elements</li>
<li><strong>look_for</strong> (<em>number</em><em>, </em><em>list</em><em> or </em><em>array</em>) – what to use for the check</li>
<li><strong>keep_shape</strong> (<em>boolean</em>) – True, returns the array’s original shape.  False, summarizes all axes</li>
<li><strong>not_in</strong> (<em>boolean</em>) – Switch the query look_for True</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">numpy.lib</span> <span class="k">import</span> <span class="n">NumpyVersion</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">if</span> <span class="n">NumpyVersion</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">__version__</span><span class="p">)</span> <span class="o">&lt;</span> <span class="s1">&#39;1.13.0&#39;</span><span class="p">):</span>
<span class="go">    # can add for older versions later</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools.tools.running_count">
<code class="descclassname">arraytools.tools.</code><code class="descname">running_count</code><span class="sig-paren">(</span><em>a</em>, <em>to_label=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tools.html#running_count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tools.running_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a running count on a 1D array identifying the order number
of the value in the sequence.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>a</strong> (<em>array</em>) – 1D array of values, int, float or string</li>
<li><strong>to_label</strong> (<em>boolean</em>) – Return the output as a concatenated string of value-sequence numbers if
True, or if False, return a structured array with a specified dtype.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#  [3, 5, 7, 5, 9, 2, 2, 2, 6, 4] #</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">running_count</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<span class="go">array([(3, 1), (5, 1), (7, 1), (5, 2), (9, 1), (2, 1), (2, 2),</span>
<span class="go">       (2, 3), (6, 1), (4, 1)],</span>
<span class="go">      dtype=[(&#39;Value&#39;, &#39;&lt;i4&#39;), (&#39;Count&#39;, &#39;&lt;i4&#39;)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">running_count</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<span class="go">array([&#39;3_001&#39;, &#39;5_001&#39;, &#39;7_001&#39;, &#39;5_002&#39;, &#39;9_001&#39;, &#39;2_001&#39;, &#39;2_002&#39;,</span>
<span class="go">       &#39;2_003&#39;, &#39;6_001&#39;, &#39;4_001&#39;],</span>
<span class="go">      dtype=&#39;&lt;U5&#39;)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="s2">&quot;zabcaabbdedbz&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#  [&#39;z&#39;, &#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;a&#39;, &#39;a&#39;, &#39;b&#39;, &#39;b&#39;, &#39;d&#39;, &#39;e&#39;, &#39;d&#39;,&#39;b&#39;, &#39;z&#39;] #</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">running_count</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<span class="go">array([(&#39;z&#39;, 1), (&#39;a&#39;, 1), (&#39;b&#39;, 1), (&#39;c&#39;, 1), (&#39;a&#39;, 2), (&#39;a&#39;, 3),</span>
<span class="go">       (&#39;b&#39;, 2), (&#39;b&#39;, 3), (&#39;d&#39;, 1), (&#39;e&#39;, 1), (&#39;d&#39;, 2), (&#39;b&#39;, 4),</span>
<span class="go">       (&#39;z&#39;, 2)], dtype=[(&#39;Value&#39;, &#39;&lt;U1&#39;), (&#39;Count&#39;, &#39;&lt;i4&#39;)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">running_count</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<span class="go">array([&#39;z_001&#39;, &#39;a_001&#39;, &#39;b_001&#39;, &#39;c_001&#39;, &#39;a_002&#39;, &#39;a_003&#39;, &#39;b_002&#39;,</span>
<span class="go">       &#39;b_003&#39;, &#39;d_001&#39;, &#39;e_001&#39;, &#39;d_002&#39;, &#39;b_004&#39;, &#39;z_002&#39;], dtype=&#39;&lt;U5&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools.tools.sequences">
<code class="descclassname">arraytools.tools.</code><code class="descname">sequences</code><span class="sig-paren">(</span><em>data</em>, <em>stepsize=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tools.html#sequences"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tools.sequences" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an array of sequence information denoted by stepsize.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>data</strong> (<em>array-like</em>) – List/array of values in 1D</li>
<li><strong>stepsize</strong> (<em>integer</em>) – Separation between the values.</li>
<li><strong>stepsize=0</strong><strong>, </strong><strong>sequences of equal values will be searched.  If stepsize</strong> (<em>If</em>) – </li>
<li><strong>1</strong><strong>, </strong><strong>then sequences incrementing by 1 etcetera.</strong> (<em>is</em>) – </li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>:param Stepsize can be both positive or negative::: &gt;&gt;&gt; # check for incrementing sequence by 1’s</dt>
<dd><div class="first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">sequences</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">|array([(0, 0, 4, 1, 4), (1, 4, 6, 4, 2)],</span>
<span class="go">|      dtype=[(&#39;ID&#39;, &#39;&lt;i4&#39;), (&#39;From_&#39;, &#39;&lt;i4&#39;), (&#39;To_&#39;, &#39;&lt;i4&#39;),</span>
<span class="go">|             (&#39;Value&#39;, &#39;&lt;i4&#39;), (&#39;Count&#39;, &#39;&lt;i4&#39;)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">art</span><span class="o">.</span><span class="n">prn</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">id  ID    From_   To_   Value   Count</span>
<span class="go">----------------------------------------</span>
<span class="go">000     0       0     4       1       4</span>
<span class="go">001     1       4     6       4       2</span>
</pre></div>
</div>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>For strings, use</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">partitions</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">!=</span> <span class="n">a</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>
</pre></div>
</div>
<p>Change <strong>N</strong> in the expression to find other splits in the data</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">data</span><span class="p">))</span> <span class="o">&gt;=</span> <span class="n">N</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>Keep for now:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">checking</span> <span class="n">sequences</span> <span class="n">of</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="o">|</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">([[</span><span class="n">x</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span> <span class="o">*</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">-</span><span class="mi">1</span><span class="p">)]</span>
<span class="o">|</span>           <span class="k">if</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span>
<span class="o">|</span>           <span class="k">else</span> <span class="n">x</span>
<span class="o">|</span>           <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">)])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="c1"># array([1, 0, 3, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0])</span>
</pre></div>
</div>
<p class="rubric">References</p>
<p><a class="reference external" href="https://stackoverflow.com/questions/7352684/how-to-find-the-groups-of-sequences-elements-from-an-array-in-numpy">https://stackoverflow.com/questions/7352684/how-to-find-the-groups-of-sequences-elements-from-an-array-in-numpy</a>.</p>
</dd></dl>

<dl class="function">
<dt id="arraytools.tools.pack_last_axis">
<code class="descclassname">arraytools.tools.</code><code class="descname">pack_last_axis</code><span class="sig-paren">(</span><em>arr</em>, <em>names=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/tools.html#pack_last_axis"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.tools.pack_last_axis" title="Permalink to this definition">¶</a></dt>
<dd><p>used in nd2struct
Then you could do:
&gt;&gt;&gt; pack_last_axis(uv).tolist()
to get a list of tuples.</p>
</dd></dl>

<hr class="docutils" />
</div>
<div class="section" id="utility-functions">
<h2>utility functions<a class="headerlink" href="#utility-functions" title="Permalink to this headline">¶</a></h2>
<p>General utility functions and helpers.</p>
<span class="target" id="module-arraytools.utils"></span><p>Script :   utils.py</p>
<p>Author :   <a class="reference external" href="mailto:Dan_Patterson&#37;&#52;&#48;carleton&#46;ca">Dan_Patterson<span>&#64;</span>carleton<span>&#46;</span>ca</a></p>
<p>Modified : 2019-01-06</p>
<p>Purpose:  tools for working with numpy arrays</p>
<p class="rubric">References</p>
<p><a class="reference external" href="http://pro.arcgis.com/en/pro-app/arcpy/data-access/numpyarraytotable.htm">http://pro.arcgis.com/en/pro-app/arcpy/data-access/numpyarraytotable.htm</a>.</p>
<p><a class="reference external" href="http://pro.arcgis.com/en/pro-app/arcpy/data-access/tabletonumpyarray.htm">http://pro.arcgis.com/en/pro-app/arcpy/data-access/tabletonumpyarray.htm</a>.</p>
<div class="section" id="useage">
<h3>Useage:<a class="headerlink" href="#useage" title="Permalink to this headline">¶</a></h3>
<p><strong>doc_func(func=None)</strong> : see get_func and get_modu</p>
<p><strong>get_func</strong> :</p>
<p>Retrieve function information:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">get_func</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">line_nums</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">art</span><span class="o">.</span><span class="n">get_func</span><span class="p">(</span><span class="n">art</span><span class="o">.</span><span class="n">main</span><span class="p">))</span>

<span class="n">Function</span><span class="p">:</span> <span class="o">....</span> <span class="n">main</span> <span class="o">....</span>
<span class="n">Line</span> <span class="n">number</span><span class="o">...</span> <span class="mi">1334</span>
<span class="n">Docs</span><span class="p">:</span>
<span class="n">Do</span> <span class="n">nothing</span>
<span class="n">Defaults</span><span class="p">:</span> <span class="kc">None</span>
<span class="n">Keyword</span> <span class="n">Defaults</span><span class="p">:</span> <span class="kc">None</span>
<span class="n">Variable</span> <span class="n">names</span><span class="p">:</span>
<span class="n">Source</span> <span class="n">code</span><span class="p">:</span>
   <span class="mi">0</span>  <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
   <span class="mi">1</span>   <span class="s1">&#39;&#39;&#39;Do nothing&#39;&#39;&#39;</span>
   <span class="mi">2</span>      <span class="k">pass</span>
</pre></div>
</div>
<dl class="docutils">
<dt>get_modu :</dt>
<dd>retrieve module info</dd>
</dl>
<p><strong>info</strong> :</p>
<p>Retrieve array information:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>- array([(0, 1, 2, 3, 4), (5, 6, 7, 8, 9),
         (10, 11, 12, 13, 14), (15, 16, 17, 18, 19)],
  dtype=[(&#39;A&#39;, &#39;&lt;i8&#39;), (&#39;B&#39;, &#39;&lt;i8&#39;)... snip ..., (&#39;E&#39;, &#39;&lt;i8&#39;)])
---------------------
Array information....
array
  |__shape (4,)
  |__ndim  1
  |__size  4
  |__type  &lt;class &#39;numpy.ndarray&#39;&gt;
dtype      [(&#39;A&#39;, &#39;&lt;i8&#39;), (&#39;B&#39;, &#39;&lt;i8&#39;) ... , (&#39;E&#39;, &#39;&lt;i8&#39;)]
  |__kind  V
  |__char  V
  |__num   20
  |__type  &lt;class &#39;numpy.void&#39;&gt;
  |__name  void320
  |__shape ()
  |__description
     |__name, itemsize
     |__[&#39;A&#39;, &#39;&lt;i8&#39;]
     |__[&#39;B&#39;, &#39;&lt;i8&#39;]
     |__[&#39;C&#39;, &#39;&lt;i8&#39;]
     |__[&#39;D&#39;, &#39;&lt;i8&#39;]
     |__[&#39;E&#39;, &#39;&lt;i8&#39;]
</pre></div>
</div>
<dl class="function">
<dt id="arraytools.utils.time_deco">
<code class="descclassname">arraytools.utils.</code><code class="descname">time_deco</code><span class="sig-paren">(</span><em>func</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/utils.html#time_deco"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.utils.time_deco" title="Permalink to this definition">¶</a></dt>
<dd><p>Timing decorator function</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>following import.  Uncomment the import</strong><strong> or </strong><strong>move it inside the script.</strong> (<em>The</em>) – </li>
<li><strong>from functools import wraps</strong> (<em>&gt;&gt;&gt;</em>) – </li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>:param Example function::: &#64;time_deco  # on the line above the function</dt>
<dd><dl class="first last docutils">
<dt>def some_func():</dt>
<dd><code class="docutils literal notranslate"><span class="pre">do</span> <span class="pre">stuff</span></code>
return None</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="arraytools.utils.run_deco">
<code class="descclassname">arraytools.utils.</code><code class="descname">run_deco</code><span class="sig-paren">(</span><em>func</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/utils.html#run_deco"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.utils.run_deco" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints basic function information and the results of a run.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>following import.  Uncomment the import</strong><strong> or </strong><strong>move it inside the script.</strong> (<em>The</em>) – </li>
<li><strong>from functools import wraps</strong> (<em>&gt;&gt;&gt;</em>) – </li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>:param Example function::: &#64;run_deco  # on the line above the function</dt>
<dd><dl class="first last docutils">
<dt>def some_func():</dt>
<dd><code class="docutils literal notranslate"><span class="pre">do</span> <span class="pre">stuff</span></code>
return None</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="arraytools.utils.doc_func">
<code class="descclassname">arraytools.utils.</code><code class="descname">doc_func</code><span class="sig-paren">(</span><em>func=None</em>, <em>verbose=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/utils.html#doc_func"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.utils.doc_func" title="Permalink to this definition">¶</a></dt>
<dd><p>(doc_func)…Documenting code using inspect</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>func</strong> (<em>function</em>) – Function name to document, without quotes</li>
<li><strong>verbose</strong> (<em>Boolean</em>) – True prints the result, False returns a string of the result.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">A listing of the source code with line numbers</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Requires the <cite>inspect</cite> module</p>
<p>Source code for:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">module</span> <span class="n">level</span>
<span class="o">-</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getsourcelines</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="vm">__name__</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>

<span class="n">function</span> <span class="n">level</span>
<span class="o">-</span> <span class="k">as</span> <span class="n">a</span> <span class="nb">list</span> <span class="o">=&gt;</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getsourcelines</span><span class="p">(</span><span class="n">num_41</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="o">-</span> <span class="k">as</span> <span class="n">a</span> <span class="n">string</span> <span class="o">=&gt;</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getsource</span><span class="p">(</span><span class="n">num_41</span><span class="p">)</span>

<span class="n">file</span> <span class="n">level</span>
<span class="o">-</span> <span class="n">script</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools.utils.get_func">
<code class="descclassname">arraytools.utils.</code><code class="descname">get_func</code><span class="sig-paren">(</span><em>func</em>, <em>line_nums=True</em>, <em>verbose=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/utils.html#get_func"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.utils.get_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Get function information (ie. for a def)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>from textwrap import dedent</strong><strong>, </strong><strong>indent</strong><strong>, </strong><strong>wrap</strong> (<em>&gt;&gt;&gt;</em>) – </li>
<li><strong>import inspect</strong> (<em>&gt;&gt;&gt;</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><em>The function information includes arguments and source code.</em></li>
<li><em>A string is returned for printing.</em></li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Import the module containing the function and put the object name in
without quotes…</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">arraytools.utils</span> <span class="k">import</span> <span class="n">get_func</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_func</span><span class="p">(</span><span class="n">get_func</span><span class="p">)</span>  <span class="c1"># returns this source code etc.</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools.utils.get_modu">
<code class="descclassname">arraytools.utils.</code><code class="descname">get_modu</code><span class="sig-paren">(</span><em>obj</em>, <em>code=False</em>, <em>verbose=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/utils.html#get_modu"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.utils.get_modu" title="Permalink to this definition">¶</a></dt>
<dd><p>Get module (script) information, including source code for
documentation purposes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>from textwrap import dedent</strong><strong>, </strong><strong>indent</strong> (<em>&gt;&gt;&gt;</em>) – </li>
<li><strong>import inspect</strong> (<em>&gt;&gt;&gt;</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><em>A string is returned for printing.  It will be the whole module</em></li>
<li><em>so use with caution.</em></li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Useage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">arraytools.utils</span> <span class="k">import</span> <span class="n">get_modu</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_modu</span><span class="p">(</span><span class="n">tools</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># No quotes around module name, code=True for module code</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arraytools.utils.dirr">
<code class="descclassname">arraytools.utils.</code><code class="descname">dirr</code><span class="sig-paren">(</span><em>obj</em>, <em>colwise=False</em>, <em>cols=4</em>, <em>sub=None</em>, <em>prn=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/arraytools/utils.html#dirr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arraytools.utils.dirr" title="Permalink to this definition">¶</a></dt>
<dd><p>A formatted <cite>dir</cite> listing of an object, module, function… anything you
can get a listing for.</p>
<p>Source, arraytools.py_tools has a pure python equivalent</p>
<p>Also, arraytools <cite>__init__._info()</cite> has an abbreviated version</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>colwise</strong> (<em>boolean</em>) – <cite>True</cite> or <cite>1</cite>, otherwise, <cite>False</cite> or <cite>0</cite></li>
<li><strong>cols</strong> (<em>number</em>) – pick a size to suit</li>
<li><strong>sub</strong> (<em>text</em>) – sub array with wildcards</li>
<li><strong>arr*</strong> (<em>-</em>) – </li>
<li><strong>*arr</strong> (<em>-</em>) – </li>
<li><strong>*arr*</strong> (<em>-</em>) – </li>
<li><strong>prn</strong> (<em>boolean</em>) – <cite>True</cite> for print or <cite>False</cite> to return output as string</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><em>A directory listing of a module’s namespace or a part of it if the</em></li>
<li><cite>sub</cite> option is specified.</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>See the <cite>inspect</cite> module for possible additions like <cite>isfunction</cite>,
<cite>ismethod</cite>, <cite>ismodule</cite></p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dirr</span><span class="p">(</span><span class="n">art</span><span class="p">,</span> <span class="n">colwise</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cols</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">sub</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">prn</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># all columnwise</span>
<span class="n">dirr</span><span class="p">(</span><span class="n">art</span><span class="p">,</span> <span class="n">colwise</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cols</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">sub</span><span class="o">=</span><span class="s1">&#39;arr&#39;</span><span class="p">,</span> <span class="n">prn</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># just the `arr`s</span>

  <span class="p">(</span><span class="mi">001</span><span class="p">)</span>    <span class="n">_arr_common</span>     <span class="n">arr2xyz</span>         <span class="n">arr_json</span>
  <span class="p">(</span><span class="mi">002</span><span class="p">)</span>    <span class="n">arr_pnts</span>        <span class="n">arr_polygon_fc</span>  <span class="n">arr_polyline_fc</span>
  <span class="p">(</span><span class="mi">003</span><span class="p">)</span>    <span class="n">array2raster</span>    <span class="n">array_fc</span>
  <span class="p">(</span><span class="mi">004</span><span class="p">)</span>    <span class="n">array_struct</span>    <span class="n">arrays_cols</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Sphinx_documentation.html" class="btn btn-neutral float-right" title="Sphinx Documentation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Welcome to arraytools’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Dan Patterson

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>